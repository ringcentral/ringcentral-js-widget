{"version":3,"sources":["modules/TransferUI/index.ts"],"names":["TransferUI","name","deps","dep","optional","locale","activeCallControl","webphone","contactSearch","regionSettings","routerInteraction","options","_locale","_activeCallControl","_webphone","_contactSearch","_regionSettings","_routerInteraction","params","sessionId","type","session","activeSession","sessions","find","id","currentLocale","searchContactList","sortedResult","controlBusy","busy","phoneSourceNameRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","phoneTypeRenderer","setActiveSessionId","onTransfer","transferNumber","transfer","onBack","goBack","onCallEnd","replace","formatPhone","phoneNumber","areaCode","countryCode","searchContact","searchString","debouncedSearch","RcUIModule"],"mappings":"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","sourcesContent":["import Module from 'ringcentral-integration/lib/di/decorators/module';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'TransferUI',\n  deps: [\n    'Locale',\n    'RegionSettings',\n    'RouterInteraction',\n    { dep: 'ContactSearch', optional: true },\n    { dep: 'Webphone', optional: true },\n    { dep: 'ActiveCallControl', optional: true },\n  ],\n})\nexport default class TransferUI extends RcUIModule {\n  constructor({\n    locale,\n    activeCallControl,\n    webphone,\n    contactSearch,\n    regionSettings,\n    routerInteraction,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._locale = locale;\n    this._activeCallControl = activeCallControl;\n    this._webphone = webphone;\n    this._contactSearch = contactSearch;\n    this._regionSettings = regionSettings;\n    this._routerInteraction = routerInteraction;\n  }\n\n  getUIProps({ params: { sessionId, type = 'active' } }) {\n    let session = null;\n    if (type === 'active' && this._activeCallControl) {\n      session = this._activeCallControl.activeSession;\n    } else if (type === 'webphone' && this._webphone) {\n      session = this._webphone.sessions.find(\n        (session) => session.id === sessionId,\n      );\n    }\n\n    return {\n      sessionId,\n      currentLocale: this._locale.currentLocale,\n      searchContactList:\n        this._contactSearch && this._contactSearch.sortedResult,\n      session,\n      controlBusy:\n        (this._activeCallControl && this._activeCallControl.busy) || false,\n    };\n  }\n\n  getUIFunctions({\n    params: { type = 'active' },\n    phoneSourceNameRenderer,\n    recipientsContactInfoRenderer,\n    recipientsContactPhoneRenderer,\n    phoneTypeRenderer,\n  }) {\n    return {\n      setActiveSessionId: (sessionId) => {\n        if (type === 'active' && this._activeCallControl) {\n          this._activeCallControl.setActiveSessionId(sessionId);\n        }\n      },\n      onTransfer: (transferNumber, sessionId) => {\n        if (type === 'active' && this._activeCallControl) {\n          this._activeCallControl.transfer(transferNumber, sessionId);\n        } else if (type === 'webphone' && this._webphone) {\n          this._webphone.transfer(transferNumber, sessionId);\n        }\n      },\n      onBack: () => {\n        this._routerInteraction.goBack();\n      },\n      onCallEnd: () => {\n        if (type === 'active') {\n          this._routerInteraction.replace('/calls');\n        } else {\n          this._routerInteraction.replace('/dialer');\n        }\n      },\n      formatPhone: (phoneNumber) =>\n        formatNumber({\n          phoneNumber,\n          areaCode: this._regionSettings.areaCode,\n          countryCode: this._regionSettings.countryCode,\n        }),\n      searchContact: (searchString) => {\n        if (this._contactSearch) {\n          this._contactSearch.debouncedSearch({ searchString });\n        }\n      },\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      recipientsContactInfoRenderer,\n      recipientsContactPhoneRenderer,\n    };\n  }\n}\n"],"file":"index.js"}