{"version":3,"sources":["modules/ContactMatcherV2/ContactMatcher.ts"],"names":["ContactMatcher","name","deps","phoneNumber","ignoreCache","match","queries","dataMapping","length","phoneNumbers","ignoreQueue","forceMatchBatchNumbers","DataMatcher","proxify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAWaA,c,WAHZ,gBAAO;AACNC,EAAAA,IAAI,EAAE;AADA,CAAP,C;;;;;AAIC,0BAAYC,IAAZ,EAAwB;AAAA;;AAAA,6BAChBA,IADgB,EACV,gBADU;AAEvB;;;;;;;;;;;;;;AAICC,gBAAAA,W,QAAAA,W,0BACAC,W,EAAAA,W,iCAAc,K;;uBAER,KAAKC,KAAL,CAAW;AACfC,kBAAAA,OAAO,EAAE,CAACH,WAAD,CADM;AAEfC,kBAAAA,WAAW,EAAXA;AAFe,iBAAX,C;;;iDAIC,+BAAKG,WAAL,CAAiBJ,WAAjB,iFAA+BK,MAA/B,IAAwC,C;;;;;;;;;;;;;;;;;;;;;;;;;AAK/CC,gBAAAA,Y,SAAAA,Y;;uBAEM,KAAKJ,KAAL,CAAW;AACfC,kBAAAA,OAAO,EAAEG,YADM;AAEfL,kBAAAA,WAAW,EAAE,IAFE;AAGfM,kBAAAA,WAAW,EAAE;AAHE,iBAAX,C;;;;;;;;;;;;;;;;;;;;;;;;;AAQiBP,gBAAAA,W,SAAAA,W;;uBACjB,KAAKQ,sBAAL,CAA4B;AAChCF,kBAAAA,YAAY,EAAE,CAACN,WAAD;AADkB,iBAA5B,C;;;;;;;;;;;;;;;;;;;EA9B0BS,yB,oEAKjCC,mB,qKAYAA,mB,uKAWAA,mB","sourcesContent":["import { Module } from '../../lib/di';\nimport { DataMatcher, Deps } from '../../lib/DataMatcherV2';\nimport proxify from '../../lib/proxy/proxify';\nimport {\n  HasMatchNumberOptions,\n  ForceMatchBatchNumbersOptions,\n  ForceMatchNumberOptions,\n} from './ContactMatcher.interface';\nimport { Entity } from '../../interfaces/Entity.interface';\n\n@Module({\n  name: 'ContactMatcher',\n})\nexport class ContactMatcher extends DataMatcher<Entity> {\n  constructor(deps: Deps) {\n    super(deps, 'ContactMatcher');\n  }\n\n  @proxify\n  async hasMatchNumber({\n    phoneNumber,\n    ignoreCache = false,\n  }: HasMatchNumberOptions) {\n    await this.match({\n      queries: [phoneNumber],\n      ignoreCache,\n    });\n    return this.dataMapping[phoneNumber]?.length > 0;\n  }\n\n  @proxify\n  async forceMatchBatchNumbers({\n    phoneNumbers,\n  }: ForceMatchBatchNumbersOptions) {\n    await this.match({\n      queries: phoneNumbers,\n      ignoreCache: true,\n      ignoreQueue: true,\n    });\n  }\n\n  @proxify\n  async forceMatchNumber({ phoneNumber }: ForceMatchNumberOptions) {\n    await this.forceMatchBatchNumbers({\n      phoneNumbers: [phoneNumber],\n    });\n  }\n}\n"],"file":"ContactMatcher.js"}