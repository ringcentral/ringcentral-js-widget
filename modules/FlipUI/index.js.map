{"version":3,"sources":["modules/FlipUI/index.js"],"names":["FlipUI","name","deps","locale","webphone","forwardingNumber","regionSettings","routerInteraction","options","_webphone","_locale","_forwardingNumber","_regionSettings","_routerInteraction","sessionId","params","session","sessions","find","s","id","isOnFlip","currentLocale","flipNumbers","onFlip","flipNumber","flip","onComplete","hangup","onBack","goBack","onCallEnd","replace","formatPhone","phoneNumber","areaCode","countryCode","RcUIModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAYqBA,M,WAVpB,wBAAO;AACNC,EAAAA,IAAI,EAAE,QADA;AAENC,EAAAA,IAAI,EAAE,CACJ,QADI,EAEJ,UAFI,EAGJ,kBAHI,EAIJ,gBAJI,EAKJ,mBALI;AAFA,CAAP,C;;;;;AAWC,wBAOG;AAAA;;AAAA,QANDC,MAMC,QANDA,MAMC;AAAA,QALDC,QAKC,QALDA,QAKC;AAAA,QAJDC,gBAIC,QAJDA,gBAIC;AAAA,QAHDC,cAGC,QAHDA,cAGC;AAAA,QAFDC,iBAEC,QAFDA,iBAEC;AAAA,QADEC,OACF;;AAAA;;AACD,gDACKA,OADL;AAGA,UAAKC,SAAL,GAAiBL,QAAjB;AACA,UAAKM,OAAL,GAAeP,MAAf;AACA,UAAKQ,iBAAL,GAAyBN,gBAAzB;AACA,UAAKO,eAAL,GAAuBN,cAAvB;AACA,UAAKO,kBAAL,GAA0BN,iBAA1B;AARC;AASF;;;;sCAEqC;AAAA,UAAfO,SAAe,SAAzBC,MAAyB,CAAfD,SAAe;;AACpC,UAAME,OAAO,GAAG,KAAKP,SAAL,CAAeQ,QAAf,CAAwBC,IAAxB,CAA6B,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACC,EAAF,KAASN,SAAhB;AAAA,OAA7B,CAAhB;;AAEA,aAAO;AACLA,QAAAA,SAAS,EAATA,SADK;AAELO,QAAAA,QAAQ,EAAEL,OAAO,IAAIA,OAAO,CAACK,QAFxB;AAGLC,QAAAA,aAAa,EAAE,KAAKZ,OAAL,CAAaY,aAHvB;AAILC,QAAAA,WAAW,EAAE,KAAKZ,iBAAL,CAAuBY,WAJ/B;AAKLP,QAAAA,OAAO,EAAPA;AALK,OAAP;AAOD;;;qCAEgB;AAAA;;AACf,aAAO;AACLQ,QAAAA,MAAM,EAAE,gBAACC,UAAD,EAAaX,SAAb,EAA2B;AACjC,iBAAO,MAAI,CAACL,SAAL,CAAeiB,IAAf,CAAoBD,UAApB,EAAgCX,SAAhC,CAAP;AACD,SAHI;AAILa,QAAAA,UAAU,EAAE,oBAACb,SAAD,EAAe;AACzB,UAAA,MAAI,CAACL,SAAL,CAAemB,MAAf,CAAsBd,SAAtB;AACD,SANI;AAOLe,QAAAA,MAAM,EAAE,kBAAM;AACZ,UAAA,MAAI,CAAChB,kBAAL,CAAwBiB,MAAxB;AACD,SATI;AAULC,QAAAA,SAAS,EAAE,qBAAM;AACf,UAAA,MAAI,CAAClB,kBAAL,CAAwBmB,OAAxB,CAAgC,SAAhC;AACD,SAZI;AAaLC,QAAAA,WAAW,EAAE,qBAACC,WAAD;AAAA,iBACX,8BAAa;AACXA,YAAAA,WAAW,EAAXA,WADW;AAEXC,YAAAA,QAAQ,EAAE,MAAI,CAACvB,eAAL,CAAqBuB,QAFpB;AAGXC,YAAAA,WAAW,EAAE,MAAI,CAACxB,eAAL,CAAqBwB;AAHvB,WAAb,CADW;AAAA;AAbR,OAAP;AAoBD;;;;EApDiCC,uB","sourcesContent":["import Module from 'ringcentral-integration/lib/di/decorators/module';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'FlipUI',\n  deps: [\n    'Locale',\n    'Webphone',\n    'ForwardingNumber',\n    'RegionSettings',\n    'RouterInteraction',\n  ],\n})\nexport default class FlipUI extends RcUIModule {\n  constructor({\n    locale,\n    webphone,\n    forwardingNumber,\n    regionSettings,\n    routerInteraction,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._webphone = webphone;\n    this._locale = locale;\n    this._forwardingNumber = forwardingNumber;\n    this._regionSettings = regionSettings;\n    this._routerInteraction = routerInteraction;\n  }\n\n  getUIProps({ params: { sessionId } }) {\n    const session = this._webphone.sessions.find((s) => s.id === sessionId);\n\n    return {\n      sessionId,\n      isOnFlip: session && session.isOnFlip,\n      currentLocale: this._locale.currentLocale,\n      flipNumbers: this._forwardingNumber.flipNumbers,\n      session,\n    };\n  }\n\n  getUIFunctions() {\n    return {\n      onFlip: (flipNumber, sessionId) => {\n        return this._webphone.flip(flipNumber, sessionId);\n      },\n      onComplete: (sessionId) => {\n        this._webphone.hangup(sessionId);\n      },\n      onBack: () => {\n        this._routerInteraction.goBack();\n      },\n      onCallEnd: () => {\n        this._routerInteraction.replace('/dialer');\n      },\n      formatPhone: (phoneNumber) =>\n        formatNumber({\n          phoneNumber,\n          areaCode: this._regionSettings.areaCode,\n          countryCode: this._regionSettings.countryCode,\n        }),\n    };\n  }\n}\n"],"file":"index.js"}