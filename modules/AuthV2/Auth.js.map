{"version":3,"sources":["modules/AuthV2/Auth.ts"],"names":["LoginStatusChangeEvent","Auth","name","deps","dep","optional","trackEvents","authentication","logout","_loggedIn","_beforeLogoutHandlers","Set","_afterLoggedInHandlers","_unbindEvents","_lastEnvironmentCounter","_proxyUri","_redirectUri","token","loginStatus","loggedIn","ownerId","owner_id","endpointId","endpoint_id","accessToken","access_token","expireTime","expire_time","expiresIn","expires_in","scope","parentModule","analytics","_identify","userId","notLoggedIn","isFreshLogin","refreshTokenValid","loggingIn","beforeLogout","loggingOut","platform","_deps","client","service","_client","onRequestError","error","Error","message","onLoginSuccess","auth","data","setLoginSuccess","handlers","handler","onLoginError","setLoginError","onLogoutSuccess","setLogoutSuccess","onLogoutError","_cache","clean","setLogoutError","alert","danger","authMessages","logoutError","payload","onRefreshSuccess","setRefreshSuccess","onRefreshError","isOffline","resStatus","response","status","setRefreshError","sessionExpired","ttl","addListener","events","loginSuccess","loginError","logoutSuccess","refreshSuccess","refreshError","requestError","removeListener","moduleStatuses","pending","locale","ready","tabManager","environment","send","event","args","fetchToken","changeCounter","_bindEvents","setInitLogin","username","password","extension","remember","code","redirectUri","tokenType","setLogin","setData","token_type","refresh_token_expires_in","account","get","extensionData","id","login","refresh","then","json","state","brandId","display","prompt","force","implicit","loginUrl","usePKCE","dismissAllAlert","setBeforeLogout","dismissAll","result","setCancelLogout","Promise","reject","console","beforeLogoutError","setLogout","isImplicit","add","removeBeforeLogoutHandler","String","newAuthData","emit","url","resolve","window","location","href","_clientSecret","length","authOptions","RcModuleV2","action","proxify"],"mappings":"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","sourcesContent":["import { GetExtensionInfoResponse } from '@rc-ex/core/definitions';\nimport {\n  action,\n  RcModuleV2,\n  state,\n  track,\n} from '@ringcentral-integration/core';\nimport url from 'url';\n\nimport moduleStatuses from '../../enums/moduleStatuses';\nimport { Module } from '../../lib/di';\nimport proxify from '../../lib/proxy/proxify';\nimport validateIsOffline from '../../lib/validateIsOffline';\nimport { trackEvents } from '../Analytics';\nimport { Deps, LoginOptions, Token, TokenInfo } from './Auth.interface';\nimport { authMessages } from './authMessages';\nimport { loginStatus } from './loginStatus';\n\nexport const LoginStatusChangeEvent = 'loginStatusChange';\n\n@Module({\n  name: 'Auth',\n  deps: [\n    'Client',\n    'Alert',\n    'Locale',\n    { dep: 'TabManager', optional: true },\n    { dep: 'Environment', optional: true },\n    { dep: 'AuthOptions', optional: true },\n  ],\n})\nclass Auth extends RcModuleV2<Deps> {\n  private _loggedIn: boolean = null;\n  _beforeLogoutHandlers: Set<Function> = new Set();\n  _afterLoggedInHandlers: Set<() => any> = new Set();\n  _unbindEvents: any = null;\n  _lastEnvironmentCounter: number = 0;\n  _proxyUri: string;\n  _redirectUri: string;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @state\n  loginStatus: string = null;\n\n  @state\n  isFreshLogin: boolean = null;\n\n  @state\n  token: Token = {};\n\n  @track(trackEvents.authentication)\n  @action\n  setLoginSuccess(token: TokenInfo) {\n    this.loginStatus = loginStatus.loggedIn;\n    this.token = {\n      ownerId: token.owner_id,\n      endpointId: token.endpoint_id,\n      accessToken: token.access_token,\n      expireTime: token.expire_time,\n      expiresIn: token.expires_in,\n      scope: token.scope,\n    };\n    // TODO: refactor for Analytics V2\n    (this.parentModule as any).analytics?._identify?.({\n      userId: token.owner_id,\n    });\n  }\n\n  @action\n  setLoginError() {\n    this.loginStatus = loginStatus.notLoggedIn;\n    this.token = {};\n    this.isFreshLogin = null;\n  }\n\n  @action\n  setLogoutSuccess() {\n    this.loginStatus = loginStatus.notLoggedIn;\n    this.token = {};\n    this.isFreshLogin = null;\n  }\n\n  @action\n  setRefreshSuccess(token: TokenInfo) {\n    this.loginStatus = loginStatus.loggedIn;\n    this.token = {\n      ownerId: token.owner_id,\n      endpointId: token.endpoint_id,\n      accessToken: token.access_token,\n      expireTime: token.expire_time,\n      expiresIn: token.expires_in,\n      scope: token.scope,\n    };\n  }\n\n  @action\n  setRefreshError(refreshTokenValid: boolean) {\n    this.isFreshLogin = null;\n    if (!refreshTokenValid) {\n      this.token = {};\n      this.loginStatus = loginStatus.notLoggedIn;\n    }\n  }\n\n  @action\n  setLogoutError() {\n    this.loginStatus = loginStatus.notLoggedIn;\n    this.token = {};\n    this.isFreshLogin = null;\n  }\n\n  @action\n  setLogin() {\n    this.loginStatus = loginStatus.loggingIn;\n    this.isFreshLogin = true;\n  }\n\n  @action\n  setBeforeLogout() {\n    this.loginStatus = loginStatus.beforeLogout;\n  }\n\n  @action\n  setCancelLogout() {\n    this.loginStatus = loginStatus.loggedIn;\n  }\n\n  @track(trackEvents.logout)\n  @action\n  setLogout() {\n    this.loginStatus = loginStatus.loggingOut;\n  }\n\n  @action\n  setInitLogin({ loggedIn, token }: { loggedIn: boolean; token: TokenInfo }) {\n    this.loginStatus = loggedIn\n      ? loginStatus.loggedIn\n      : loginStatus.notLoggedIn;\n    this.isFreshLogin = loggedIn ? false : null;\n    this.token = token\n      ? {\n          ownerId: token.owner_id,\n          endpointId: token.endpoint_id,\n          accessToken: token.access_token,\n          expireTime: token.expire_time,\n          expiresIn: token.expires_in,\n          scope: token.scope,\n        }\n      : {};\n  }\n\n  _bindEvents() {\n    if (this._unbindEvents) this._unbindEvents();\n\n    const platform = this._deps.client.service.platform();\n    const client = this._deps.client.service._client;\n    const onRequestError = (error: Error) => {\n      if (error instanceof Error && error.message === 'Token revoked') {\n        this.logout();\n      }\n    };\n\n    const onLoginSuccess = async () => {\n      const token: TokenInfo = await platform.auth().data();\n      this.setLoginSuccess(token);\n      const handlers = [...this._afterLoggedInHandlers];\n      for (const handler of handlers) {\n        handler();\n      }\n    };\n    const onLoginError = () => {\n      this.setLoginError();\n    };\n    const onLogoutSuccess = () => {\n      this.setLogoutSuccess();\n    };\n    const onLogoutError = (error: Error) => {\n      platform._cache.clean();\n      this.setLogoutError();\n      if (error) {\n        this._deps.alert.danger({\n          message: authMessages.logoutError,\n          payload: error,\n        });\n      }\n    };\n    const onRefreshSuccess = async () => {\n      const token: TokenInfo = await platform.auth().data();\n      this.setRefreshSuccess(token);\n    };\n    // TODO: fix `error` type.\n    const onRefreshError = async (error: any) => {\n      // user is still considered logged in if the refreshToken is still valid\n      const isOffline = validateIsOffline(error.message);\n\n      const resStatus = (error.response && error.response.status) || null;\n      const refreshTokenValid =\n        (isOffline || resStatus >= 500) &&\n        (await platform.auth().refreshTokenValid());\n      this.setRefreshError(refreshTokenValid);\n\n      if (\n        !refreshTokenValid &&\n        (await platform.auth().data()).access_token !== ''\n      ) {\n        this._deps.alert.danger({\n          message: authMessages.sessionExpired,\n          payload: error,\n          ttl: 0,\n        });\n        // clean the cache so the error doesn't show again\n        platform._cache.clean();\n      }\n    };\n    platform.addListener(platform.events.loginSuccess, onLoginSuccess);\n    platform.addListener(platform.events.loginError, onLoginError);\n    platform.addListener(platform.events.logoutSuccess, onLogoutSuccess);\n    platform.addListener(platform.events.logoutError, onLogoutError);\n    platform.addListener(platform.events.refreshSuccess, onRefreshSuccess);\n    platform.addListener(platform.events.refreshError, onRefreshError);\n    client.addListener(client.events.requestError, onRequestError);\n    this._unbindEvents = () => {\n      platform.removeListener(platform.events.loginSuccess, onLoginSuccess);\n      platform.removeListener(platform.events.loginError, onLoginError);\n      platform.removeListener(platform.events.logoutSuccess, onLogoutSuccess);\n      platform.removeListener(platform.events.logoutError, onLogoutError);\n      platform.removeListener(platform.events.refreshSuccess, onRefreshSuccess);\n      platform.removeListener(platform.events.refreshError, onRefreshError);\n      client.removeListener(client.events.requestError, onRequestError);\n    };\n  }\n\n  _shouldInit() {\n    return (\n      this.status === moduleStatuses.pending &&\n      this._deps.locale.ready &&\n      (!this._deps.tabManager || this._deps.tabManager.ready) &&\n      (!this._deps.environment || this._deps.environment.ready)\n    );\n  }\n\n  async onStateChange() {\n    if (this._deps.tabManager && this._deps.tabManager.ready && this.ready) {\n      if (\n        (this._loggedIn && this.loginStatus === loginStatus.notLoggedIn) ||\n        (!this._loggedIn && this.loginStatus === loginStatus.loggedIn)\n      ) {\n        this._loggedIn = !this._loggedIn;\n        this._deps.tabManager.send(LoginStatusChangeEvent, this._loggedIn);\n      } else if (\n        this._deps.tabManager.event &&\n        this._deps.tabManager.event.name === LoginStatusChangeEvent &&\n        this._deps.tabManager.event.args[0] !== this.loggedIn\n      ) {\n        /* eslint { \"prefer-destructuring\": 0 } */\n        this._loggedIn = this._deps.tabManager.event.args[0];\n        await this.fetchToken();\n      }\n    }\n    if (\n      this.ready &&\n      this._deps.environment &&\n      this._deps.environment.changeCounter !== this._lastEnvironmentCounter\n    ) {\n      this._lastEnvironmentCounter = this._deps.environment.changeCounter;\n      this._bindEvents();\n    }\n  }\n\n  async onInit() {\n    const platform = this._deps.client.service.platform();\n    this._loggedIn = await platform.loggedIn();\n    this._bindEvents();\n  }\n\n  async fetchToken() {\n    const platform = this._deps.client.service.platform();\n    const token: TokenInfo = this._loggedIn\n      ? await platform.auth().data()\n      : null;\n    this.setInitLogin({\n      loggedIn: this._loggedIn,\n      token,\n    });\n  }\n\n  async onInitSuccess() {\n    await this.fetchToken();\n  }\n\n  get redirectUri() {\n    return url.resolve(window.location.href, this._redirectUri);\n  }\n\n  get proxyUri() {\n    return this._proxyUri;\n  }\n\n  get ownerId() {\n    return this.token.ownerId;\n  }\n\n  get endpointId() {\n    return this.token.endpointId;\n  }\n\n  get accessToken() {\n    return this.token.accessToken;\n  }\n\n  /**\n   * @description Login either with username/password or with authorization code\n   */\n  @proxify\n  async login({\n    username,\n    password,\n    extension,\n    remember,\n    code,\n    redirectUri,\n    accessToken,\n    expiresIn,\n    endpointId,\n    tokenType,\n    scope,\n  }: LoginOptions) {\n    this.setLogin();\n    let ownerId: number;\n    if (accessToken) {\n      await this._deps.client.service.platform().auth().setData({\n        token_type: tokenType,\n        access_token: accessToken,\n        expires_in: expiresIn,\n        refresh_token_expires_in: expiresIn,\n        scope,\n      });\n      const extensionData: GetExtensionInfoResponse = await this._deps.client\n        .account()\n        .extension()\n        .get();\n      ownerId = extensionData.id;\n    }\n    // TODO: support to set redirectUri in js sdk v4 login function\n    if (!this._deps.client.service.platform()._redirectUri) {\n      this._deps.client.service.platform()._redirectUri = redirectUri;\n    }\n    return this._deps.client.service.platform().login({\n      username,\n      password,\n      extension,\n      remember,\n      code,\n      redirectUri,\n      endpoint_id: endpointId,\n      expires_in: expiresIn,\n      access_token: accessToken,\n      token_type: tokenType,\n      owner_id: ownerId,\n    });\n  }\n\n  @proxify\n  async refreshToken() {\n    const token = await this._deps.client.service\n      .platform()\n      .refresh()\n      .then((response: any) => response.json());\n\n    return token;\n  }\n\n  getLoginUrl({\n    redirectUri,\n    state,\n    brandId,\n    display,\n    prompt,\n    force,\n    implicit = false,\n  }: {\n    redirectUri: string;\n    state: string;\n    brandId: string;\n    display: string;\n    prompt: string;\n    force: boolean;\n    implicit?: boolean;\n  }) {\n    // TODO: support to set redirectUri in js sdk v4 login function\n    if (!this._deps.client.service.platform()._redirectUri) {\n      this._deps.client.service.platform()._redirectUri = redirectUri;\n    }\n    return `${this._deps.client.service.platform().loginUrl({\n      redirectUri,\n      state,\n      brandId,\n      display,\n      prompt,\n      implicit,\n      usePKCE: this.usePKCE,\n    })}${force ? '&force' : ''}`;\n  }\n\n  /**\n   * @description Triggers the beforeLogoutHandlers to run\n   *  and then proceed to logout from ringcentral.\n   */\n  @proxify\n  async logout({ dismissAllAlert = true } = {}) {\n    this.setBeforeLogout();\n    if (dismissAllAlert) {\n      this._deps.alert.dismissAll();\n    }\n    const handlers = [...this._beforeLogoutHandlers];\n    try {\n      if (this._deps.tabManager && this._deps.tabManager.ready) {\n        this._deps.tabManager.send(LoginStatusChangeEvent, false);\n      }\n      for (const handler of handlers) {\n        const result = await (async () => handler())();\n        if (result) {\n          this.setCancelLogout();\n          if (this._deps.tabManager && this._deps.tabManager.ready) {\n            this._deps.tabManager.send(LoginStatusChangeEvent, true);\n          }\n          return Promise.reject(result);\n        }\n      }\n    } catch (error) {\n      console.error(error);\n      this._deps.alert.danger({\n        message: authMessages.beforeLogoutError,\n        payload: error,\n      });\n    }\n    this.setLogout();\n    if (this.isImplicit) {\n      this._deps.client.service.platform()._cache.clean();\n      this.setLogoutSuccess();\n      return null;\n    }\n    return this._deps.client.service.platform().logout();\n  }\n\n  /**\n   * @function\n   * @param {Function} handler\n   * @returns {Function} return that delete handler event, call that will delete that event\n   */\n  addBeforeLogoutHandler(handler: Function): Function {\n    this._beforeLogoutHandlers.add(handler);\n    return () => {\n      this.removeBeforeLogoutHandler(handler);\n    };\n  }\n\n  /**\n   * @function\n   * @param {Function} handler\n   */\n  removeBeforeLogoutHandler(handler: Function) {\n    this._beforeLogoutHandlers.delete(handler);\n  }\n\n  addAfterLoggedInHandler(handler: () => any) {\n    this._afterLoggedInHandlers.add(handler);\n    return () => {\n      this._afterLoggedInHandlers.delete(handler);\n    };\n  }\n\n  @proxify\n  async refreshImplicitToken({\n    tokenType,\n    accessToken,\n    expiresIn,\n    endpointId,\n  }: {\n    tokenType: TokenInfo['token_type'];\n    accessToken: TokenInfo['access_token'];\n    expiresIn: TokenInfo['expires_in'];\n    endpointId: TokenInfo['endpoint_id'];\n  }) {\n    try {\n      const extensionData: GetExtensionInfoResponse = await this._deps.client\n        .account()\n        .extension()\n        .get();\n      const ownerId = String(extensionData.id);\n      if (ownerId !== String(this.ownerId)) {\n        return;\n      }\n      const platform = this._deps.client.service.platform();\n      const newAuthData = {\n        token_type: tokenType,\n        access_token: accessToken,\n        expires_in: expiresIn,\n        refresh_token_expires_in: expiresIn,\n        endpoint_id: endpointId,\n      };\n      platform.auth().setData(newAuthData);\n      platform.emit(platform.events.refreshSuccess, newAuthData);\n    } catch (error) {\n      console.error('refreshImplicitToken error:', error);\n    }\n  }\n\n  @proxify\n  async checkIsLoggedIn() {\n    // SDK would return false when there's temporary network issues,\n    // but we should not return use back to welcome string and should\n    // still consider the user as being logged in.\n    await this._deps.client.service.platform().loggedIn();\n    return this.loginStatus === loginStatus.loggedIn;\n  }\n\n  get loggedIn() {\n    return (\n      this.loginStatus === loginStatus.loggedIn ||\n      this.loginStatus === loginStatus.beforeLogout\n    );\n  }\n\n  get notLoggedIn() {\n    return this.loginStatus === loginStatus.notLoggedIn;\n  }\n\n  get isImplicit() {\n    return !(\n      this.usePKCE ||\n      (this._deps.client.service.platform()._clientSecret &&\n        this._deps.client.service.platform()._clientSecret.length > 0)\n    );\n  }\n\n  get usePKCE() {\n    return this._deps.authOptions?.usePKCE ?? false;\n  }\n}\n\nexport { Auth };\n"],"file":"Auth.js"}