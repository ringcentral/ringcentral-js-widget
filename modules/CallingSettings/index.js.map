{"version":3,"sources":["modules/CallingSettings/index.js"],"names":["LOCATION_NUMBER_ORDER","CallingSettings","deps","dep","optional","alert","brand","extensionInfo","extensionPhoneNumber","forwardingNumber","storage","rolesAndPermissions","tabManager","onFirstLogin","webphone","callerId","emergencyCallAvailable","defaultRingoutPrompt","showCallWithJupiter","extensionDevice","options","actionTypes","_alert","_brand","_extensionInfo","_extensionPhoneNumber","_forwardingNumber","_storage","_rolesAndPermissions","_tabManager","_webphone","_callerId","_storageKey","_emergencyCallAvailable","_extensionDevice","_onFirstLogin","initRingoutPrompt","registerReducer","key","reducer","_reducer","_showCallWithJupiter","store","subscribe","_onStateChange","_shouldInit","dispatch","type","init","_init","initSuccess","_shouldReset","_reset","_shouldValidate","_ringoutEnabled","ringoutEnabled","_webphoneEnabled","webphoneEnabled","_myPhoneNumbers","myPhoneNumbers","_otherPhoneNumbers","otherPhoneNumbers","_validateSettings","ready","pending","callingEnabled","_availableNumbers","availableNumbers","timestamp","defaultCallWith","callWithOptions","setData","callWith","Date","now","_warningEmergencyCallingNotAvailable","deprecatedCallingOptions","myphone","otherphone","customphone","callingOptions","ringout","isCustomLocation","_initFromNumber","resetSuccess","fromNumber","defaultCallerId","fromNumbers","ringOut","phoneNumber","defaultPhoneNumber","phoneInfo","defaultEntry","find","item","updateFromNumber","number","softphone","_hasWebphonePermissionRemoved","_setSoftPhoneToCallWith","danger","message","callingSettingsMessages","webphonePermissionRemoved","ttl","_hasPermissionChanged","permissionChanged","_hasPhoneNumberChanged","myLocation","phoneNumberChanged","browser","indexOf","devices","flipNumbers","mainCompanyNumber","extensionNumber","mainPhoneNumber","name","length","registedWithDevice","forEach","device","phoneLines","phoneLine","isFlipNumber","flipNumber","label","info","emergencyCallingNotAvailable","withPrompt","ringoutPrompt","saveSuccessWithSoftphone","jupiter","saveSuccessWithJupiter","saveSuccess","getItem","state","status","moduleStatuses","data","callingMode","callingModes","driver","RcModule","proxify","selector","numbers","hasOtherPhone","hasExtensionPhoneNumber","push","code","brandConfig","brandCode","directNumbers","map","callerIdNumbers","filterMapping","filter","sort","a","b","phoneNumbers","concat","result","locationLabel","_getLocationLabel","value","firstItem","lastItem","usageType"],"mappings":"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","sourcesContent":["import RcModule from '../../lib/RcModule';\nimport { Module } from '../../lib/di';\nimport {\n  getCallingSettingsReducer,\n  getCallingSettingsStorageReducer,\n} from './getCallingSettingsReducer';\nimport moduleStatuses from '../../enums/moduleStatuses';\nimport mapOptionToMode from './mapOptionToMode';\nimport callingOptions from './callingOptions';\nimport deprecatedCallingOptions from './deprecatedCallingOptions';\nimport callingModes from './callingModes';\nimport callingSettingsMessages from './callingSettingsMessages';\nimport actionTypes from './actionTypes';\nimport proxify from '../../lib/proxy/proxify';\nimport { selector } from '../../lib/selector';\n\nconst LOCATION_NUMBER_ORDER = ['Other', 'Main'];\n/**\n * @class\n * @description Call setting managing module\n */\n@Module({\n  deps: [\n    'Alert',\n    'Brand',\n    'ExtensionInfo',\n    'ExtensionPhoneNumber',\n    'ForwardingNumber',\n    'Storage',\n    'RolesAndPermissions',\n    'ExtensionDevice',\n    { dep: 'CallerId', optional: true },\n    { dep: 'TabManager', optional: true },\n    { dep: 'Webphone', optional: true },\n    { dep: 'CallingSettingsOptions', optional: true },\n  ],\n})\nexport default class CallingSettings extends RcModule {\n  /**\n   * @constructor\n   * @param {Object} params - params object\n   * @param {Alert} params.alert - alert module instance\n   * @param {Brand} params.brand - brand module instance\n   * @param {ExtensionInfo} params.extensionInfo - extensionInfo module instance\n   * @param {ExtensionPhoneNumber} params.extensionPhoneNumber - extensionPhoneNumber module instance\n   * @param {ForwardingNumber} params.forwardingNumber - forwardingNumber module instance\n   * @param {Storage} params.storage - storage module instance\n   * @param {RolesAndPermissions} params.rolesAndPermissions - rolesAndPermissions module instance\n   * @param {TabManager} params.tabManager - tabManager module instance\n   * @param {Webphone} params.webphone - webphone module instance\n   * @param {Function} params.onFirstLogin - func on first login\n   */\n  constructor({\n    alert,\n    brand,\n    extensionInfo,\n    extensionPhoneNumber,\n    forwardingNumber,\n    storage,\n    rolesAndPermissions,\n    tabManager,\n    onFirstLogin,\n    webphone,\n    callerId,\n    emergencyCallAvailable = false,\n    defaultRingoutPrompt,\n    showCallWithJupiter = true,\n    extensionDevice,\n    ...options\n  }) {\n    super({\n      ...options,\n      actionTypes,\n    });\n    this._alert = alert;\n    this._brand = brand;\n    this._extensionInfo = extensionInfo;\n    this._extensionPhoneNumber = extensionPhoneNumber;\n    this._forwardingNumber = forwardingNumber;\n    this._storage = storage;\n    this._rolesAndPermissions = rolesAndPermissions;\n    this._tabManager = tabManager;\n    this._webphone = webphone;\n    this._callerId = callerId;\n    this._storageKey = 'callingSettingsData';\n    this._emergencyCallAvailable = emergencyCallAvailable;\n    this._extensionDevice = extensionDevice;\n    this._onFirstLogin = onFirstLogin;\n    this.initRingoutPrompt = defaultRingoutPrompt;\n\n    this._storage.registerReducer({\n      key: this._storageKey,\n      reducer: getCallingSettingsStorageReducer(this.actionTypes),\n    });\n\n    this._reducer = getCallingSettingsReducer(this.actionTypes);\n    this._showCallWithJupiter = showCallWithJupiter;\n  }\n\n  initialize() {\n    this.store.subscribe(() => this._onStateChange());\n  }\n\n  async _onStateChange() {\n    if (this._shouldInit()) {\n      this.store.dispatch({\n        type: this.actionTypes.init,\n      });\n      await this._init();\n      this.store.dispatch({\n        type: this.actionTypes.initSuccess,\n      });\n    } else if (this._shouldReset()) {\n      this._reset();\n    } else if (this._shouldValidate()) {\n      this._ringoutEnabled = this._rolesAndPermissions.ringoutEnabled;\n      this._webphoneEnabled = this._rolesAndPermissions.webphoneEnabled;\n      this._myPhoneNumbers = this.myPhoneNumbers;\n      this._otherPhoneNumbers = this.otherPhoneNumbers;\n      await this._validateSettings();\n    }\n  }\n\n  _shouldInit() {\n    return (\n      this._storage.ready &&\n      this._extensionInfo.ready &&\n      this._extensionPhoneNumber.ready &&\n      this._forwardingNumber.ready &&\n      (!this._callerId || this._callerId.ready) &&\n      this._rolesAndPermissions.ready &&\n      this._extensionDevice.ready &&\n      this.pending\n    );\n  }\n\n  _shouldReset() {\n    return !!(\n      this.ready &&\n      (!this._storage.ready ||\n        !this._extensionInfo.ready ||\n        !this._extensionPhoneNumber.ready ||\n        !this._forwardingNumber.ready ||\n        !this._rolesAndPermissions.ready ||\n        (this._callerId && !this._callerId.ready) ||\n        !this._extensionDevice.ready)\n    );\n  }\n\n  _shouldValidate() {\n    return (\n      this.ready &&\n      (this._ringoutEnabled !== this._rolesAndPermissions.ringoutEnabled ||\n        this._webphoneEnabled !== this._rolesAndPermissions.webphoneEnabled ||\n        this._myPhoneNumbers !== this.myPhoneNumbers ||\n        this._otherPhoneNumbers !== this.otherPhoneNumbers)\n    );\n  }\n\n  async _init() {\n    if (!this._rolesAndPermissions.callingEnabled) return;\n    this._myPhoneNumbers = this.myPhoneNumbers;\n    this._otherPhoneNumbers = this.otherPhoneNumbers;\n    this._availableNumbers = this.availableNumbers;\n    this._ringoutEnabled = this._rolesAndPermissions.ringoutEnabled;\n    this._webphoneEnabled = this._rolesAndPermissions.webphoneEnabled;\n    if (!this.timestamp) {\n      // first time login\n      const defaultCallWith = this.callWithOptions && this.callWithOptions[0];\n      this.store.dispatch({\n        type: this.actionTypes.setData,\n        callWith: defaultCallWith,\n        timestamp: Date.now(),\n      });\n      if (!this._emergencyCallAvailable) {\n        this._warningEmergencyCallingNotAvailable();\n      }\n      if (typeof this._onFirstLogin === 'function') {\n        this._onFirstLogin();\n      }\n    }\n    if (\n      this.callWith === deprecatedCallingOptions.myphone ||\n      this.callWith === deprecatedCallingOptions.otherphone ||\n      this.callWith === deprecatedCallingOptions.customphone\n    ) {\n      this.store.dispatch({\n        type: this.actionTypes.setData,\n        callWith: callingOptions.ringout,\n        isCustomLocation:\n          this.callWith === deprecatedCallingOptions.customphone,\n      });\n    }\n    await this._validateSettings();\n    await this._initFromNumber();\n  }\n\n  _reset() {\n    this.store.dispatch({\n      type: this.actionTypes.resetSuccess,\n    });\n  }\n\n  @proxify\n  async _initFromNumber() {\n    const fromNumber = this.fromNumber;\n    if (!fromNumber) {\n      let defaultCallerId = this.fromNumbers[0];\n      if (this._callerId?.ringOut) {\n        if (this._callerId.ringOut.type === 'Blocked') {\n          defaultCallerId = { phoneNumber: 'anonymous' };\n        } else if (this._callerId.ringOut.type === 'PhoneNumber') {\n          const defaultPhoneNumber = this._callerId?.ringOut.phoneInfo\n            ?.phoneNumber;\n          const defaultEntry = this.fromNumbers.find(\n            (item) => item.phoneNumber === defaultPhoneNumber,\n          );\n          if (defaultEntry) {\n            defaultCallerId = defaultEntry;\n          }\n        }\n      }\n      await this.updateFromNumber(defaultCallerId);\n    }\n  }\n\n  @proxify\n  async updateFromNumber(number) {\n    this.store.dispatch({\n      type: this.actionTypes.updateFromNumber,\n      number: number && number.phoneNumber,\n    });\n  }\n\n  @proxify\n  async _setSoftPhoneToCallWith() {\n    this.store.dispatch({\n      type: this.actionTypes.setData,\n      callWith: callingOptions.softphone,\n      timestamp: Date.now(),\n    });\n  }\n\n  @proxify\n  async _validateSettings() {\n    if (this._hasWebphonePermissionRemoved()) {\n      await this._setSoftPhoneToCallWith();\n      this._alert.danger({\n        message: callingSettingsMessages.webphonePermissionRemoved,\n        ttl: 0,\n      });\n    } else if (this._hasPermissionChanged()) {\n      await this._setSoftPhoneToCallWith();\n      this._alert.danger({\n        message: callingSettingsMessages.permissionChanged,\n        ttl: 0,\n      });\n    } else if (this._hasPhoneNumberChanged()) {\n      this.store.dispatch({\n        type: this.actionTypes.setData,\n        callWith: callingOptions.ringout,\n        myLocation: this._myPhoneNumbers[0],\n        timestamp: Date.now(),\n      });\n      this._alert.danger({\n        message: callingSettingsMessages.phoneNumberChanged,\n        ttl: 0,\n      });\n    }\n  }\n\n  _hasWebphonePermissionRemoved() {\n    return (\n      !(this._webphoneEnabled && this._webphone) &&\n      this.callWith === callingOptions.browser\n    );\n  }\n\n  _hasPermissionChanged() {\n    return !this._ringoutEnabled && this.callWith === callingOptions.ringout;\n  }\n\n  _hasPhoneNumberChanged() {\n    return (\n      this.callWith === callingOptions.ringout &&\n      !this.isCustomLocation &&\n      this._availableNumbers.indexOf(this.myLocation) === -1\n    );\n  }\n\n  _getLocationLabel(phoneNumber) {\n    const { devices } = this._extensionDevice;\n    const { flipNumbers } = this._forwardingNumber;\n    const { mainCompanyNumber } = this._extensionPhoneNumber;\n    const { extensionNumber } = this._extensionInfo;\n    const mainPhoneNumber = `${mainCompanyNumber.phoneNumber}*${extensionNumber}`;\n    let name = null;\n    if (devices.length) {\n      let registedWithDevice = false;\n      devices.forEach((device) => {\n        const { phoneLines } = device;\n        if (phoneLines.length) {\n          registedWithDevice = phoneLines.find((phoneLine) => {\n            return phoneLine.phoneInfo.phoneNumber === phoneNumber;\n          });\n          if (registedWithDevice) {\n            name = device.name;\n          }\n        }\n      });\n      if (name) return name;\n    }\n    if (flipNumbers.length) {\n      const isFlipNumber = flipNumbers.find(\n        (flipNumber) => flipNumber.phoneNumber === phoneNumber,\n      );\n      if (isFlipNumber) {\n        return isFlipNumber.label || 'Other';\n      }\n    }\n\n    if (phoneNumber === mainPhoneNumber) {\n      return 'Main';\n    }\n    return 'Other';\n  }\n\n  @proxify\n  async _warningEmergencyCallingNotAvailable() {\n    if (this.callWith === callingOptions.browser) {\n      this._alert.info({\n        message: callingSettingsMessages.emergencyCallingNotAvailable,\n        ttl: 0,\n      });\n    }\n  }\n\n  get data() {\n    return this._storage.getItem(this._storageKey);\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get ready() {\n    return this.state.status === moduleStatuses.ready;\n  }\n\n  get pending() {\n    return this.state.status === moduleStatuses.pending;\n  }\n\n  get callWith() {\n    return this.data.callWith;\n  }\n\n  get callingMode() {\n    return mapOptionToMode(this.callWith);\n  }\n\n  get ringoutPrompt() {\n    return this.data.ringoutPrompt;\n  }\n\n  get defaultRingoutPrompt() {\n    return this.initRingoutPrompt;\n  }\n\n  get myLocation() {\n    return this.data.myLocation;\n  }\n\n  get isCustomLocation() {\n    return this.data.isCustomLocation;\n  }\n\n  get timestamp() {\n    return this.data.timestamp;\n  }\n\n  get isWebphoneMode() {\n    return this.callingMode === callingModes.webphone;\n  }\n\n  @selector\n  callWithOptions = [\n    () => this._rolesAndPermissions.ringoutEnabled,\n    () => this._rolesAndPermissions.webphoneEnabled,\n    () => this.otherPhoneNumbers.length > 0,\n    () => this._extensionPhoneNumber.numbers.length > 0,\n    (\n      ringoutEnabled,\n      webphoneEnabled,\n      hasOtherPhone,\n      hasExtensionPhoneNumber,\n    ) => {\n      if (!hasExtensionPhoneNumber) {\n        return [callingOptions.softphone];\n      }\n      const callWithOptions = [];\n      if (this._webphone && webphoneEnabled) {\n        callWithOptions.push(callingOptions.browser);\n      }\n      // only rc brand support call with RingCentral App\n      if (\n        this._brand &&\n        (this._brand.code === 'rc' ||\n          (this._brand.brandConfig &&\n            this._brand.brandConfig.brandCode === 'rc')) &&\n        this._showCallWithJupiter\n      ) {\n        callWithOptions.push(callingOptions.jupiter);\n      }\n\n      callWithOptions.push(callingOptions.softphone);\n      if (ringoutEnabled) {\n        callWithOptions.push(callingOptions.ringout);\n      }\n      return callWithOptions;\n    },\n  ];\n\n  @selector\n  myPhoneNumbers = [\n    () => this._extensionPhoneNumber.directNumbers,\n    () => this._extensionPhoneNumber.mainCompanyNumber,\n    () => this._extensionInfo.extensionNumber,\n    (directNumbers, mainCompanyNumber, extensionNumber) => {\n      const myPhoneNumbers = directNumbers.map((item) => item.phoneNumber);\n      if (mainCompanyNumber && extensionNumber) {\n        myPhoneNumbers.push(\n          `${mainCompanyNumber.phoneNumber}*${extensionNumber}`,\n        );\n      }\n      return myPhoneNumbers;\n    },\n  ];\n\n  @selector\n  otherPhoneNumbers = [\n    () => this._forwardingNumber.flipNumbers,\n    () => this._extensionPhoneNumber.callerIdNumbers,\n    () => this._extensionPhoneNumber.directNumbers,\n    (flipNumbers, callerIdNumbers, directNumbers) => {\n      const filterMapping = {};\n      callerIdNumbers.forEach((item) => {\n        filterMapping[item.phoneNumber] = true;\n      });\n      directNumbers.forEach((item) => {\n        filterMapping[item.phoneNumber] = true;\n      });\n      return flipNumbers\n        .filter((item) => !filterMapping[item.phoneNumber])\n        .sort((a, b) => (a.label === 'Mobile' && a.label !== b.label ? -1 : 1))\n        .map((item) => item.phoneNumber);\n    },\n  ];\n\n  @selector\n  availableNumbers = [\n    () => this.myPhoneNumbers,\n    () => this.otherPhoneNumbers,\n    (myPhoneNumbers, otherPhoneNumbers) => {\n      const phoneNumbers = myPhoneNumbers.concat(otherPhoneNumbers);\n      return phoneNumbers;\n    },\n  ];\n\n  @selector\n  availableNumbersWithLabel = [\n    () => this.availableNumbers,\n    (availableNumbers) => {\n      const result = [];\n      if (availableNumbers.length) {\n        availableNumbers.forEach((phoneNumber) => {\n          const locationLabel = this._getLocationLabel(phoneNumber);\n          result.push({\n            label: locationLabel,\n            value: phoneNumber,\n          });\n        });\n      }\n      result.sort(\n        (a, b) =>\n          LOCATION_NUMBER_ORDER.indexOf(a.label) -\n          LOCATION_NUMBER_ORDER.indexOf(b.label),\n      );\n      return result;\n    },\n  ];\n\n  get fromNumber() {\n    return this.data.fromNumber;\n  }\n\n  @selector\n  fromNumbers = [\n    () => this._extensionPhoneNumber.callerIdNumbers,\n    (phoneNumbers) =>\n      phoneNumbers.sort((firstItem, lastItem) => {\n        if (firstItem.usageType === 'DirectNumber') return -1;\n        if (lastItem.usageType === 'DirectNumber') return 1;\n        if (firstItem.usageType === 'MainCompanyNumber') return -1;\n        if (lastItem.usageType === 'MainCompanyNumber') return 1;\n        if (firstItem.usageType < lastItem.usageType) return -1;\n        if (firstItem.usageType > lastItem.usageType) return 1;\n        return 0;\n      }),\n  ];\n\n  @proxify\n  async setData(\n    { callWith, myLocation, ringoutPrompt, isCustomLocation },\n    withPrompt,\n  ) {\n    // TODO validate myLocation\n    this.store.dispatch({\n      type: this.actionTypes.setData,\n      callWith,\n      myLocation,\n      ringoutPrompt,\n      isCustomLocation,\n      timestamp: Date.now(),\n    });\n    if (withPrompt) {\n      if (this.callWith === callingOptions.softphone) {\n        this._alert.info({\n          message: callingSettingsMessages.saveSuccessWithSoftphone,\n        });\n      } else if (this.callWith === callingOptions.jupiter) {\n        this._alert.info({\n          message: callingSettingsMessages.saveSuccessWithJupiter,\n        });\n      } else {\n        this._alert.info({\n          message: callingSettingsMessages.saveSuccess,\n        });\n        if (!this._emergencyCallAvailable) {\n          this._warningEmergencyCallingNotAvailable();\n        }\n      }\n    }\n  }\n\n  /* ringtone */\n  get isChangeRingToneAllowed() {\n    return (\n      this._webphone &&\n      (this._storage.driver === 'INDEXEDDB' ||\n        this._storage.driver === 'WEBSQL')\n    );\n  }\n}\n"],"file":"index.js"}