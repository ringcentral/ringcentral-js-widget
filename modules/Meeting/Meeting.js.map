{"version":3,"sources":["modules/Meeting/Meeting.ts"],"names":["Meeting","deps","dep","optional","_enableServiceWebSettings","scheduleUserSettings","_enablePersonalMeeting","personalMeeting","scheduleLockedSettings","initialMeetingSetting","defaultLockedSettings","commonUserSettings","commonPersonalMeetingSettings","savedDefaultMeetingSetting","lastMeetingSetting","userSettings","lockedSettings","state","loginUser","extensionInfo","brand","alert","client","storage","availabilityMonitor","reducers","meetingProvider","showSaveAsDefault","enableInvitationApi","enablePersonalMeeting","enableReloadAfterSchedule","enableServiceWebSettings","enableScheduleOnBehalf","enableCustomTimezone","options","actionTypes","_brand","_alert","_client","_extensionInfo","_storage","_availabilityMonitor","_lastMeetingSettingKey","_defaultMeetingSettingKey","_showSaveAsDefault","_enableInvitationApi","_personalMeetingKey","_enableReloadAfterSchedule","_enableScheduleOnBehalf","_fetchPersonMeetingTimeout","_meetingProvider","_fetchDelegatorsTimeout","_enableCustomTimezone","_reducer","registerReducer","key","reducer","store","subscribe","_onStateChange","_shouldInit","_init","_shouldReset","_reset","pending","ready","isRCM","extensionId","_initPersonalMeeting","_updateServiceWebSettings","_initMeeting","dispatch","type","init","_initMeetingSettings","_initScheduleFor","initSuccess","resetSuccess","update","defaultMeetingSetting","host","id","_updatePreferences","clearTimeout","fetchPersonalMeeting","meetingInfoResponse","meeting","formatPersonalMeeting","updatePersonalMeeting","console","error","resetPersonalMeeting","warn","setTimeout","setDelegators","_meeting","_combineWithSWSettings","combineWithSettings","updateMeeting","isMeetingPasswordValid","validatePasswordSettings","password","_requireMeetingPassword","_comparePreferences","usePersonalMeetingId","pmiDefaultSettings","generalDefaultSettings","userExtensionId","delegators","length","hostId","user","item","updateMeetingPreferences","preferences","saveMeetingPreferencesState","isPreferencesChanged","Promise","all","getUserSettings","getLockedSettings","updateUserSettings","updateLockedSettings","usePmi","personalMeetingSettings","requirePasswordForSchedulingNewMeetings","requirePasswordForPmiMeetings","lockedRequirePasswordForSchedulingNewMeetings","lockedRequirePasswordForPmiMeetings","processedMeeting","allowJoinBeforeHost","_pmiPassword","pmiRequiresPwd","PMIRequirePassword","NONE","ALL","JBH_ONLY","pmiRequiresPwdLocked","_lockRequireMeetingPassword","getMeetingServiceInfo","serviceInfo","personalMeetingId","externalUserInfo","getMeeting","meetingInfo","shortId","settings","getDelegators","records","updateDelegatorList","isAlertSuccess","isScheduling","schedule","_promise","initScheduling","_validate","formattedMeeting","_format","saveAsDefault","saveAsDefaultSetting","postMeeting","resp","getMeetingInvitation","invitationInfo","scheduled","_saved","_createDialingNumberTpl","result","success","message","meetingStatus","scheduledSuccess","resetScheduling","_errorHandle","account","extension","get","meetingId","isAlertError","response","clone","json","errorCode","log","isMeetingDeleted","indexOf","danger","meetingIsDeleted","post","put","service","platform","res","code","send","method","url","apiResponse","invitation","recording","scheduleMeeting","startParticipantsVideo","startParticipantVideo","restScheduleOptions","processedScheduleMeeting","_isUpdating","initUpdating","putMeeting","updated","updatedSuccess","resetUpdating","mobileDialingNumberTpl","dialInNumbers","phoneDialingNumberTpl","errors","MeetingErrors","warning","permissionName","insufficientPermissions","payload","checkIfHAError","internalError","updatingStatus","obj","topic","meetingType","startHostVideo","audioOptions","recurrence","formatted","MeetingType","RECURRING","_schedule","durationInMinutes","timeZone","UTC_TIMEZONE_ID","startTime","moment","utc","format","until","PMI","SCHEDULED","invalidMeetingInfo","push","emptyTopic","noPassword","durationIncorrect","notShowAgain","isSecret","RCM_PASSWORD_REGEX","test","info","schedulingStatus","scheduleStatus","scheduling","status","COMMON_SETTINGS","settingLock","_initDefaultData","savedSetting","usePmiForScheduledMeetings","getItem","myself","name","ASSISTED_USERS_MYSELF","isLoginUser","RcModule","background","proxify","selector","usePmiDefaultFromSW","initialSetting","extensionName","currentHost","meetingName","setting","DEFAULT_LOCK_SETTINGS"],"mappings":"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","sourcesContent":["import { computed } from '@ringcentral-integration/core';\nimport moment from 'moment';\nimport { find, pick, isEmpty } from 'ramda';\nimport Client from 'ringcentral-client';\n\nimport {\n  comparePreferences,\n  getDefaultMeetingSettings,\n  getInitializedStartTime,\n  getMobileDialingNumberTpl,\n  getPhoneDialingNumberTpl,\n  MeetingType,\n  prunePreferencesObject,\n  UTC_TIMEZONE_ID,\n  generateRandomPassword,\n} from '../../helpers/meetingHelper';\nimport background from '../../lib/background';\nimport { Module } from '../../lib/di';\nimport proxify from '../../lib/proxy/proxify';\nimport RcModule from '../../lib/RcModule';\nimport { selector } from '../../lib/selector';\nimport actionTypes, { MeetingActionTypes } from './actionTypes';\nimport getMeetingReducer, {\n  getDefaultMeetingSettingReducer,\n  getMeetingStorageReducer,\n  getPersonalMeetingReducer,\n} from './getMeetingReducer';\nimport {\n  MeetingInfoResponse,\n  MeetingScheduleResource,\n  RcmInvitationInfo,\n  RcMMeetingModel,\n  ScheduleMeetingResponse,\n  MeetingDelegatorsResponse,\n  MeetingDelegators,\n  MeetingInitialExtraData,\n} from './interface';\nimport { MeetingErrors } from './meetingErrors';\nimport meetingStatus from './meetingStatus';\nimport scheduleStatus from './scheduleStatus';\nimport {\n  RCM_PASSWORD_REGEX,\n  ASSISTED_USERS_MYSELF,\n  PMIRequirePassword,\n  COMMON_SETTINGS,\n  DEFAULT_LOCK_SETTINGS,\n} from './constants';\n\n// eslint-disable-next-line\n@Module({\n  deps: [\n    'Brand',\n    'Alert',\n    'Client',\n    'ExtensionInfo',\n    'Storage',\n    'MeetingProvider',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'MeetingOptions', optional: true },\n  ],\n})\nexport class Meeting extends RcModule<Record<string, any>, MeetingActionTypes> {\n  // TODO: add state interface\n  private _brand: any;\n  public _alert: any;\n  public _client: Client;\n  private _extensionInfo: any;\n  private _storage: any;\n  private _availabilityMonitor: any;\n  private _lastMeetingSettingKey: any;\n  private _defaultMeetingSettingKey: any;\n  private _showSaveAsDefault: boolean;\n  private _enableInvitationApi: boolean;\n  private _personalMeetingKey: string;\n  private _enablePersonalMeeting: boolean;\n  private _enableReloadAfterSchedule: boolean;\n  private _enableServiceWebSettings: boolean;\n  private _enableScheduleOnBehalf: boolean;\n  private _fetchPersonMeetingTimeout: NodeJS.Timeout;\n  private _meetingProvider: any;\n  private _fetchDelegatorsTimeout: NodeJS.Timeout;\n  private _enableCustomTimezone: boolean;\n\n  constructor({\n    brand,\n    alert,\n    client,\n    extensionInfo,\n    storage,\n    availabilityMonitor,\n    reducers,\n    meetingProvider,\n    showSaveAsDefault = false,\n    enableInvitationApi = false,\n    enablePersonalMeeting = false,\n    enableReloadAfterSchedule = true,\n    enableServiceWebSettings = false,\n    enableScheduleOnBehalf = false,\n    enableCustomTimezone = false,\n    ...options\n  }) {\n    super({\n      ...options,\n      actionTypes: options.actionTypes || actionTypes,\n    });\n    this._brand = brand;\n    this._alert = alert;\n    this._client = client;\n    this._storage = storage;\n    this._extensionInfo = extensionInfo;\n    this._meetingProvider = meetingProvider;\n    this._showSaveAsDefault = showSaveAsDefault;\n    this._enableInvitationApi = enableInvitationApi;\n    this._enableCustomTimezone = enableCustomTimezone;\n    this._enableReloadAfterSchedule = enableReloadAfterSchedule;\n    this._enablePersonalMeeting = enablePersonalMeeting;\n    this._enableServiceWebSettings = enableServiceWebSettings;\n    this._enableScheduleOnBehalf = enableScheduleOnBehalf;\n    this._availabilityMonitor = availabilityMonitor;\n    this._lastMeetingSettingKey = 'lastMeetingSetting';\n    this._defaultMeetingSettingKey = 'defaultMeetingSetting';\n    this._personalMeetingKey = 'personalMeeting';\n    this._reducer = getMeetingReducer(this.actionTypes, reducers);\n    this._storage.registerReducer({\n      key: this._lastMeetingSettingKey,\n      reducer: getMeetingStorageReducer(this.actionTypes),\n    });\n    if (this._showSaveAsDefault) {\n      this._storage.registerReducer({\n        key: this._defaultMeetingSettingKey,\n        reducer: getDefaultMeetingSettingReducer(this.actionTypes),\n      });\n    }\n    if (this._enablePersonalMeeting) {\n      this._storage.registerReducer({\n        key: this._personalMeetingKey,\n        reducer: getPersonalMeetingReducer(this.actionTypes),\n      });\n    }\n  }\n\n  initialize() {\n    this.store.subscribe(() => this._onStateChange());\n  }\n\n  async _onStateChange() {\n    if (this._shouldInit()) {\n      await this._init();\n    } else if (this._shouldReset()) {\n      this._reset();\n    }\n  }\n\n  private _shouldInit() {\n    return (\n      this.pending &&\n      this._alert.ready &&\n      this._storage.ready &&\n      this._extensionInfo.ready &&\n      this._meetingProvider.ready &&\n      this._meetingProvider.isRCM &&\n      (!this._availabilityMonitor || this._availabilityMonitor.ready)\n    );\n  }\n\n  private async _initMeetingSettings(extensionId?: string) {\n    if (this._enablePersonalMeeting) {\n      await this._initPersonalMeeting(extensionId);\n    }\n\n    if (this._enableServiceWebSettings) {\n      await this._updateServiceWebSettings(extensionId);\n    }\n\n    await this._initMeeting(extensionId);\n  }\n\n  private async _init() {\n    this.store.dispatch({\n      type: this.actionTypes.init,\n    });\n\n    await this._initMeetingSettings();\n\n    if (this._enableScheduleOnBehalf) {\n      await this._initScheduleFor();\n    }\n\n    this.store.dispatch({\n      type: this.actionTypes.initSuccess,\n    });\n  }\n\n  private _shouldReset() {\n    return (\n      this.ready &&\n      (!this._alert.ready ||\n        !this._storage.ready ||\n        !this._extensionInfo.ready ||\n        !this._meetingProvider.ready ||\n        !this._meetingProvider.isRCM ||\n        (this._availabilityMonitor && !this._availabilityMonitor.ready))\n    );\n  }\n\n  private _reset() {\n    this.store.dispatch({\n      type: this.actionTypes.resetSuccess,\n    });\n  }\n\n  /**\n   * Init basic meeting information\n   * also load meeting setting from previous one.\n   */\n  @background\n  init() {\n    this._initMeeting();\n  }\n\n  @proxify\n  reload() {\n    this._initMeeting();\n  }\n\n  private _initMeeting(extensionId?: string) {\n    this.update({\n      ...this.defaultMeetingSetting,\n      host: {\n        id: extensionId || this.loginUser.id,\n      },\n    });\n    this._updatePreferences();\n  }\n\n  async _initPersonalMeeting(extensionId?: string) {\n    if (this._fetchPersonMeetingTimeout) {\n      clearTimeout(this._fetchPersonMeetingTimeout);\n    }\n    try {\n      const meetingInfoResponse = await this.fetchPersonalMeeting(extensionId);\n      const meeting = this.formatPersonalMeeting(meetingInfoResponse);\n      this.store.dispatch({\n        type: this.actionTypes.updatePersonalMeeting,\n        meeting,\n      });\n    } catch (e) {\n      console.error('fetch personal meeting error:', e);\n      this.store.dispatch({\n        type: this.actionTypes.resetPersonalMeeting,\n      });\n      console.warn('retry after 10s');\n      this._fetchPersonMeetingTimeout = setTimeout(() => {\n        this._initPersonalMeeting(extensionId);\n      }, 10000);\n    }\n  }\n\n  async _initScheduleFor() {\n    if (this._fetchDelegatorsTimeout) {\n      clearTimeout(this._fetchDelegatorsTimeout);\n    }\n    try {\n      await this.setDelegators();\n    } catch (e) {\n      console.error('fetch delegators error:', e);\n      console.warn('retry after 10s');\n      this._fetchDelegatorsTimeout = setTimeout(() => {\n        this.setDelegators();\n      }, 10000);\n    }\n  }\n\n  combineWithSettings(_meeting: RcMMeetingModel) {\n    return this._combineWithSWSettings(_meeting);\n  }\n\n  @proxify\n  update(_meeting: RcMMeetingModel) {\n    let meeting = _meeting;\n    if (this._enableServiceWebSettings) {\n      meeting = this.combineWithSettings(_meeting);\n    }\n    this.store.dispatch({\n      type: this.actionTypes.updateMeeting,\n      meeting: {\n        ...meeting,\n        isMeetingPasswordValid: this.validatePasswordSettings(\n          _meeting.password,\n          _meeting._requireMeetingPassword,\n        ),\n      },\n    });\n    this._comparePreferences();\n  }\n\n  @proxify\n  async switchUsePersonalMeetingId(usePersonalMeetingId: boolean) {\n    this.update(\n      usePersonalMeetingId\n        ? this.pmiDefaultSettings\n        : this.generalDefaultSettings,\n    );\n  }\n\n  @proxify\n  async updateScheduleFor(userExtensionId: string | number) {\n    if (!userExtensionId || !this.delegators || this.delegators.length === 0) {\n      return;\n    }\n    const hostId = `${userExtensionId}`;\n    const user = find((item) => item.id === hostId, this.delegators);\n\n    if (user) {\n      await this._initMeetingSettings(hostId);\n    }\n  }\n\n  private _updatePreferences() {\n    this.store.dispatch({\n      type: this.actionTypes.updateMeetingPreferences,\n      preferences: prunePreferencesObject(this.meeting),\n    });\n  }\n\n  private _comparePreferences() {\n    const { preferences, meeting } = this;\n    this.store.dispatch({\n      type: this.actionTypes.saveMeetingPreferencesState,\n      isPreferencesChanged: comparePreferences(preferences, meeting),\n    });\n  }\n\n  @proxify\n  private async _updateServiceWebSettings(extensionId?: string) {\n    const [userSettings, lockedSettings] = await Promise.all([\n      this.getUserSettings(extensionId),\n      this.getLockedSettings(),\n    ]);\n    this.store.dispatch({\n      type: this.actionTypes.updateUserSettings,\n      userSettings,\n    });\n    this.store.dispatch({\n      type: this.actionTypes.updateLockedSettings,\n      lockedSettings,\n    });\n  }\n\n  _initDefaultData(\n    meeting: RcMMeetingModel,\n    { userSettings, personalMeetingSettings }: MeetingInitialExtraData,\n    usePmi: boolean,\n  ): RcMMeetingModel {\n    if (!this._enableServiceWebSettings) {\n      return meeting;\n    }\n    const {\n      requirePasswordForSchedulingNewMeetings = false,\n      requirePasswordForPmiMeetings,\n    } = this.scheduleUserSettings;\n    const {\n      requirePasswordForSchedulingNewMeetings: lockedRequirePasswordForSchedulingNewMeetings,\n      requirePasswordForPmiMeetings: lockedRequirePasswordForPmiMeetings,\n    } = this.scheduleLockedSettings;\n    const processedMeeting = {\n      ...meeting,\n      ...(usePmi ? personalMeetingSettings : userSettings),\n      usePersonalMeetingId: usePmi,\n    };\n\n    // For PMI meetings\n    if (usePmi) {\n      const { allowJoinBeforeHost, password = '' } = processedMeeting;\n\n      if (password !== '') {\n        processedMeeting._pmiPassword = password;\n      }\n\n      let pmiRequiresPwd;\n      switch (requirePasswordForPmiMeetings) {\n        case PMIRequirePassword.NONE:\n          pmiRequiresPwd = password !== '';\n          break;\n        case PMIRequirePassword.ALL:\n          pmiRequiresPwd = true;\n          break;\n        case PMIRequirePassword.JBH_ONLY:\n          pmiRequiresPwd = allowJoinBeforeHost || password !== '';\n          break;\n        default:\n          pmiRequiresPwd = processedMeeting._requireMeetingPassword;\n      }\n\n      let pmiRequiresPwdLocked = processedMeeting._lockRequireMeetingPassword;\n      if (requirePasswordForPmiMeetings === PMIRequirePassword.JBH_ONLY) {\n        pmiRequiresPwdLocked =\n          lockedRequirePasswordForPmiMeetings && allowJoinBeforeHost;\n      } else if (\n        requirePasswordForPmiMeetings !== PMIRequirePassword.JBH_ONLY\n      ) {\n        pmiRequiresPwdLocked = lockedRequirePasswordForPmiMeetings;\n      }\n\n      processedMeeting._requireMeetingPassword = pmiRequiresPwd;\n      processedMeeting._lockRequireMeetingPassword = pmiRequiresPwdLocked;\n    } else {\n      // For non-PMI meetings\n      if (requirePasswordForSchedulingNewMeetings) {\n        processedMeeting._requireMeetingPassword = true;\n      }\n      if (lockedRequirePasswordForSchedulingNewMeetings) {\n        processedMeeting._lockRequireMeetingPassword = true;\n      }\n    }\n    return {\n      ...processedMeeting,\n      password:\n        processedMeeting._requireMeetingPassword && !processedMeeting.password\n          ? generateRandomPassword()\n          : processedMeeting.password,\n    };\n  }\n\n  _combineWithSWSettings(meeting: RcMMeetingModel): RcMMeetingModel {\n    if (!meeting.usePersonalMeetingId) {\n      return meeting;\n    }\n\n    const processedMeeting = { ...meeting };\n    const { allowJoinBeforeHost } = processedMeeting;\n    const { requirePasswordForPmiMeetings } = this.scheduleUserSettings;\n    const {\n      requirePasswordForPmiMeetings: lockedRequirePasswordForPmiMeetings,\n    } = this.scheduleLockedSettings;\n\n    if (\n      lockedRequirePasswordForPmiMeetings &&\n      requirePasswordForPmiMeetings === PMIRequirePassword.JBH_ONLY\n    ) {\n      if (allowJoinBeforeHost && !processedMeeting._requireMeetingPassword) {\n        processedMeeting._requireMeetingPassword = true;\n        processedMeeting.password =\n          processedMeeting._pmiPassword || generateRandomPassword();\n      }\n      processedMeeting._lockRequireMeetingPassword = allowJoinBeforeHost;\n    }\n    return processedMeeting;\n  }\n\n  @proxify\n  private async fetchPersonalMeeting(\n    extensionId?: string,\n  ): Promise<MeetingInfoResponse> {\n    const serviceInfo = await this.getMeetingServiceInfo(extensionId);\n    const personalMeetingId = serviceInfo.externalUserInfo.personalMeetingId;\n    const meetingInfoResponse = await this.getMeeting(personalMeetingId);\n    return meetingInfoResponse;\n  }\n\n  private formatPersonalMeeting(\n    meetingInfo: MeetingInfoResponse,\n    shortId?: string,\n  ): RcMMeetingModel {\n    const settings = {\n      ...this.initialMeetingSetting,\n      ...meetingInfo,\n      shortId: shortId || meetingInfo.id,\n      usePersonalMeetingId: true,\n    };\n    return {\n      ...settings,\n      _requireMeetingPassword: !!settings.password,\n    };\n  }\n\n  @proxify\n  private async setDelegators() {\n    const { records } = await this.getDelegators();\n    this.store.dispatch({\n      type: this.actionTypes.updateDelegatorList,\n      delegators: records,\n    });\n  }\n\n  @proxify\n  async schedule(\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    if (this.isScheduling) return (this.schedule as any)._promise;\n    meeting = meeting || this.meeting;\n    try {\n      this.store.dispatch({\n        type: this.actionTypes.initScheduling,\n      });\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n\n      if (this._showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      (this.schedule as any)._promise = Promise.all([\n        this.postMeeting(formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const [resp, serviceInfo] = await (this.schedule as any)._promise;\n      const invitationInfo = await this.getMeetingInvitation(resp.id);\n      this.store.dispatch({\n        type: this.actionTypes.scheduled,\n        meeting: {\n          ...formattedMeeting,\n          id: resp.id,\n          _saved: meeting._saved,\n        },\n      });\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this._enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this._enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.store.dispatch({\n          type: this.actionTypes.updatePersonalMeeting,\n          meeting: this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        });\n        if (this._enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been scheduled\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._alert.success({\n            message: meetingStatus.scheduledSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      this.store.dispatch({\n        type: this.actionTypes.resetScheduling,\n      });\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      delete (this.schedule as any)._promise;\n    }\n  }\n\n  @proxify\n  async getMeetingServiceInfo(extensionId?: string) {\n    return this._client\n      .account()\n      .extension(extensionId)\n      .meeting()\n      .serviceInfo()\n      .get();\n  }\n\n  @proxify\n  async getMeeting(meetingId: string, { isAlertError = true } = {}) {\n    try {\n      const settings = await this._client\n        .account()\n        .extension()\n        .meeting(meetingId)\n        .get();\n      return {\n        ...settings,\n        _requireMeetingPassword: !!settings.password,\n      };\n    } catch (e) {\n      const { errorCode, message } = await e.response.clone().json();\n      console.log(\n        `failed to get meeting info: ${meetingId}, ${errorCode}, ${message}`,\n      );\n      const isMeetingDeleted =\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1;\n      if (isAlertError && isMeetingDeleted) {\n        setTimeout(() => {\n          this._alert.danger({\n            message: meetingStatus.meetingIsDeleted,\n          });\n        }, 50);\n      }\n      throw e;\n    }\n  }\n\n  async postMeeting(formattedMeeting: RcMMeetingModel) {\n    return this._client.account().extension().meeting().post(formattedMeeting);\n  }\n\n  @proxify\n  async putMeeting(meetingId: string, formattedMeeting: RcMMeetingModel) {\n    return this._client\n      .account()\n      .extension()\n      .meeting(meetingId)\n      .put(formattedMeeting);\n  }\n\n  @proxify\n  async getDelegators(): Promise<MeetingDelegatorsResponse> {\n    const res = await this._client.service\n      .platform()\n      .get(\n        '/restapi/v1.0/account/~/extension/~/meetings-configuration/assisted',\n      );\n    return res.json();\n  }\n\n  @proxify\n  async getMeetingInvitation(meetingId: string): Promise<RcmInvitationInfo> {\n    if (!this._enableInvitationApi) {\n      return null;\n    }\n    // only rc brand is supported for now\n    if (this._brand.code !== 'rc') {\n      return null;\n    }\n    try {\n      const platform = this._client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: `/restapi/v1.0/account/~/extension/~/meeting/${meetingId}/invitation`,\n      });\n      const { invitation } = await apiResponse.json();\n      return {\n        invitation,\n      };\n    } catch (ex) {\n      console.warn(ex);\n      return null;\n    }\n  }\n\n  @proxify\n  async getUserSettings(extensionId = '~') {\n    try {\n      const platform = this._client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: `/restapi/v1.0/account/~/extension/${extensionId}/meeting/user-settings`,\n      });\n      const { recording = {}, scheduleMeeting = {} } = await apiResponse.json();\n      return {\n        recording,\n        scheduleMeeting,\n      };\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  }\n\n  @proxify\n  async getLockedSettings() {\n    try {\n      const platform = this._client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: '/restapi/v1.0/account/~/meeting/locked-settings',\n      });\n      const { recording = {}, scheduleMeeting = {} } = await apiResponse.json();\n      const {\n        startParticipantsVideo,\n        startParticipantVideo,\n        ...restScheduleOptions\n      } = scheduleMeeting;\n      const processedScheduleMeeting = {\n        ...restScheduleOptions,\n        startParticipantsVideo:\n          startParticipantsVideo || startParticipantVideo || false,\n      };\n      return {\n        recording,\n        scheduleMeeting: processedScheduleMeeting,\n      };\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  }\n\n  @proxify\n  async updateMeeting(\n    meetingId: string,\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = false }: { isAlertSuccess?: boolean } = {},\n  ) {\n    if (this._isUpdating(meetingId)) {\n      return (this.updateMeeting as any)._promise;\n    }\n    meeting = meeting || this.meeting;\n    try {\n      this.store.dispatch({\n        type: this.actionTypes.initUpdating,\n        meetingId,\n      });\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n      if (this._showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      (this.updateMeeting as any)._promise = Promise.all([\n        this.putMeeting(meetingId, formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const [resp, serviceInfo] = await (this.updateMeeting as any)._promise;\n      const invitationInfo = await this.getMeetingInvitation(meetingId);\n\n      this.store.dispatch({\n        type: this.actionTypes.updated,\n        meeting: {\n          ...formattedMeeting,\n          _saved: meeting._saved,\n        },\n        meetingId,\n      });\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this._enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this._enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.store.dispatch({\n          type: this.actionTypes.updatePersonalMeeting,\n          meeting: this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        });\n        if (this._enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been updated\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._alert.success({\n            message: meetingStatus.updatedSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      this.store.dispatch({\n        type: this.actionTypes.resetUpdating,\n        meetingId,\n      });\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      delete (this.updateMeeting as any)._promise;\n    }\n  }\n\n  async _createDialingNumberTpl(\n    serviceInfo: any,\n    resp: any,\n    invitationInfo: RcmInvitationInfo,\n  ) {\n    serviceInfo.mobileDialingNumberTpl = getMobileDialingNumberTpl(\n      serviceInfo.dialInNumbers,\n      resp.id,\n    );\n    serviceInfo.phoneDialingNumberTpl = getPhoneDialingNumberTpl(\n      serviceInfo.dialInNumbers,\n    );\n    const result = {\n      meeting: resp,\n      serviceInfo,\n      extensionInfo: this.extensionInfo,\n      invitationInfo,\n    };\n    return result;\n  }\n\n  async _errorHandle(errors: any) {\n    if (errors instanceof MeetingErrors) {\n      for (const error of errors.all) {\n        this._alert.warning(error);\n      }\n    } else if (errors && errors.response) {\n      const {\n        message,\n        errorCode,\n        permissionName,\n      } = await errors.response.clone().json();\n      if (errorCode === 'InsufficientPermissions' && permissionName) {\n        this._alert.danger({\n          message: meetingStatus.insufficientPermissions,\n          payload: {\n            permissionName,\n          },\n        });\n      } else if (\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1\n      ) {\n        this._alert.danger({\n          message: meetingStatus.meetingIsDeleted,\n        });\n      } else if (\n        !this._availabilityMonitor ||\n        !(await this._availabilityMonitor.checkIfHAError(errors))\n      ) {\n        this._alert.danger({ message: meetingStatus.internalError });\n      }\n    } else {\n      console.log('errors:', errors);\n      this._alert.danger({ message: meetingStatus.internalError });\n    }\n  }\n\n  /**\n   * @param {number} meetingId\n   */\n  _isUpdating(meetingId: string) {\n    return (\n      this.state.updatingStatus &&\n      find((obj: any) => obj.meetingId === meetingId, this.state.updatingStatus)\n    );\n  }\n\n  /**\n   * Format meeting information.\n   * @param {Object} meeting\n   */\n  _format(meeting: RcMMeetingModel): RcMMeetingModel {\n    const {\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password,\n      schedule,\n      recurrence,\n      usePersonalMeetingId,\n      _requireMeetingPassword,\n      host,\n    } = meeting;\n    const formatted = {\n      host,\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password: _requireMeetingPassword ? password : '',\n      recurrence,\n      usePersonalMeetingId,\n    } as RcMMeetingModel;\n    // Recurring meetings do not have schedule info\n    if (meetingType !== MeetingType.RECURRING) {\n      const _schedule: MeetingScheduleResource = {\n        durationInMinutes: schedule.durationInMinutes,\n        timeZone: {\n          id: this._enableCustomTimezone\n            ? schedule.timeZone.id\n            : UTC_TIMEZONE_ID,\n        },\n      };\n      if (schedule.startTime) {\n        // Format selected startTime to utc standard time\n        // Timezone information is not included here\n        _schedule.startTime = this._enableCustomTimezone\n          ? schedule.startTime\n          : moment.utc(schedule.startTime).format();\n      }\n      formatted.schedule = _schedule;\n\n      if (recurrence && recurrence.until) {\n        formatted.recurrence.until = moment.utc(recurrence.until).format();\n      }\n    }\n\n    // For PMI\n    formatted.meetingType =\n      formatted.meetingType === MeetingType.PMI\n        ? MeetingType.SCHEDULED\n        : formatted.meetingType;\n    return formatted;\n  }\n\n  /**\n   * Validate meeting information format.\n   * @param {Object} meeting\n   * @throws\n   */\n  _validate(meeting) {\n    if (!meeting) {\n      throw new MeetingErrors(meetingStatus.invalidMeetingInfo);\n    }\n    const { topic, password, schedule, _requireMeetingPassword } = meeting;\n    const errors = new MeetingErrors();\n    if (topic.length <= 0) {\n      errors.push(meetingStatus.emptyTopic);\n    }\n    if (_requireMeetingPassword && (!password || password.length <= 0)) {\n      errors.push(meetingStatus.noPassword);\n    }\n    if (schedule) {\n      if (schedule.durationInMinutes < 0) {\n        errors.push(meetingStatus.durationIncorrect);\n      }\n    }\n    if (errors.length > 0) {\n      throw errors;\n    }\n  }\n\n  saveAsDefaultSetting(meeting) {\n    const formattedMeeting = this._format(meeting);\n    this.store.dispatch({\n      type: this.actionTypes.saveAsDefaultSetting,\n      meeting: {\n        ...formattedMeeting,\n        _saved: meeting.notShowAgain,\n        _requireMeetingPassword: meeting._requireMeetingPassword,\n      },\n    });\n  }\n\n  validatePasswordSettings(password: string, isSecret: boolean): boolean {\n    if (!isSecret) {\n      return true;\n    }\n    if (password && RCM_PASSWORD_REGEX.test(password)) {\n      return true;\n    }\n    return false;\n  }\n\n  get extensionInfo() {\n    return this._extensionInfo.info;\n  }\n\n  get meeting() {\n    return this.state.meeting;\n  }\n\n  get isScheduling() {\n    return this.state.schedulingStatus === scheduleStatus.scheduling;\n  }\n\n  get isUpdating() {\n    return this.meeting && this.meeting.id && this._isUpdating(this.meeting.id);\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get preferences() {\n    return this.state.preferences;\n  }\n\n  @computed(({ _enableServiceWebSettings, scheduleUserSettings }: Meeting) => [\n    _enableServiceWebSettings,\n    scheduleUserSettings,\n  ])\n  get commonUserSettings() {\n    if (!this._enableServiceWebSettings) {\n      return {};\n    }\n    return pick(COMMON_SETTINGS, this.scheduleUserSettings);\n  }\n\n  @computed(({ _enablePersonalMeeting, personalMeeting }: Meeting) => [\n    _enablePersonalMeeting,\n    personalMeeting,\n  ])\n  get commonPersonalMeetingSettings() {\n    if (!this._enablePersonalMeeting) {\n      return {};\n    }\n    return pick([...COMMON_SETTINGS, 'password'], this.personalMeeting);\n  }\n\n  @computed(\n    ({ _enableServiceWebSettings, scheduleLockedSettings }: Meeting) => [\n      _enableServiceWebSettings,\n      scheduleLockedSettings,\n    ],\n  )\n  get defaultLockedSettings() {\n    if (!this._enableServiceWebSettings) {\n      return {};\n    }\n    return {\n      settingLock: pick(COMMON_SETTINGS, this.scheduleLockedSettings),\n    };\n  }\n\n  @computed<Meeting>(\n    ({\n      initialMeetingSetting,\n      defaultLockedSettings,\n      commonUserSettings,\n      commonPersonalMeetingSettings,\n    }) => [\n      initialMeetingSetting,\n      defaultLockedSettings,\n      commonUserSettings,\n      commonPersonalMeetingSettings,\n    ],\n  )\n  get pmiDefaultSettings() {\n    if (!this._enableServiceWebSettings) {\n      return this.personalMeeting;\n    }\n    return this._initDefaultData(\n      {\n        ...this.initialMeetingSetting,\n        ...this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      true,\n    );\n  }\n\n  @computed<Meeting>(\n    ({\n      initialMeetingSetting,\n      defaultLockedSettings,\n      commonUserSettings,\n      commonPersonalMeetingSettings,\n      savedDefaultMeetingSetting,\n      lastMeetingSetting,\n    }) => [\n      initialMeetingSetting,\n      defaultLockedSettings,\n      commonUserSettings,\n      commonPersonalMeetingSettings,\n      savedDefaultMeetingSetting,\n      lastMeetingSetting,\n    ],\n  )\n  get generalDefaultSettings() {\n    if (!this._enableServiceWebSettings) {\n      const savedSetting = this._showSaveAsDefault\n        ? this.savedDefaultMeetingSetting\n        : this.lastMeetingSetting;\n      return {\n        ...this.initialMeetingSetting,\n        ...savedSetting,\n        meetingType: MeetingType.SCHEDULED,\n      };\n    }\n    return this._initDefaultData(\n      {\n        ...this.initialMeetingSetting,\n        ...this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      false,\n    );\n  }\n\n  @selector\n  defaultMeetingSetting: any = [\n    () => this.initialMeetingSetting,\n    () => this.usePmiDefaultFromSW,\n    () => this.userSettings,\n    () => this.pmiDefaultSettings,\n    () => this.generalDefaultSettings,\n    () => {\n      const savedSetting = this._showSaveAsDefault\n        ? this.savedDefaultMeetingSetting\n        : this.lastMeetingSetting;\n      return savedSetting;\n    },\n    (\n      initialSetting: RcMMeetingModel,\n      usePmi: boolean,\n      userSettings: Partial<RcMMeetingModel>,\n      pmiDefaultSettings: Partial<RcMMeetingModel>,\n      generalDefaultSettings: Partial<RcMMeetingModel>,\n      savedSetting: Partial<RcMMeetingModel>,\n    ) => {\n      if (this._enableServiceWebSettings) {\n        if (!isEmpty(userSettings)) {\n          return usePmi ? pmiDefaultSettings : generalDefaultSettings;\n        }\n        return initialSetting;\n      }\n      const meeting = {\n        ...initialSetting,\n        ...savedSetting,\n        meetingType: MeetingType.SCHEDULED,\n      };\n      return meeting;\n    },\n  ];\n\n  @selector\n  initialMeetingSetting: any = [\n    () => {\n      const extensionName = this.extensionInfo.name || '';\n      if (\n        !this._enableScheduleOnBehalf ||\n        !this.meeting ||\n        !this.delegators ||\n        this.delegators.length === 0\n      ) {\n        return extensionName;\n      }\n      const currentHost = `${\n        (this.meeting.host && this.meeting.host.id) || ''\n      }`;\n      const user = find((item) => item.id === currentHost, this.delegators);\n      return user && user.id !== `${this.extensionInfo.id}`\n        ? user.name\n        : extensionName;\n    },\n    () => getInitializedStartTime(),\n    () => {\n      if (\n        this._enableScheduleOnBehalf &&\n        this.meeting &&\n        this.meeting.host &&\n        this.meeting.host.id\n      ) {\n        return `${this.meeting.host.id}`;\n      }\n      return `${this.extensionInfo.id}` || '';\n    },\n    (\n      meetingName: string,\n      startTime: number,\n      hostId: string,\n    ): RcMMeetingModel => {\n      const setting = getDefaultMeetingSettings(meetingName, startTime, hostId);\n      if (!this._enableServiceWebSettings) {\n        return setting;\n      }\n      return {\n        ...setting,\n        ...DEFAULT_LOCK_SETTINGS,\n        _pmiPassword: '',\n      };\n    },\n  ];\n\n  @computed(\n    ({\n      _enablePersonalMeeting,\n      _enableServiceWebSettings,\n      scheduleUserSettings,\n    }: Meeting) => [\n      _enablePersonalMeeting,\n      _enableServiceWebSettings,\n      scheduleUserSettings,\n    ],\n  )\n  get usePmiDefaultFromSW() {\n    return (\n      this._enablePersonalMeeting &&\n      this._enableServiceWebSettings &&\n      this.scheduleUserSettings.usePmiForScheduledMeetings\n    );\n  }\n\n  @computed(({ userSettings }: Meeting) => [userSettings])\n  get recordingUserSettings() {\n    const { recording = {} } = this.userSettings;\n    return recording;\n  }\n\n  @computed(({ userSettings }: Meeting) => [userSettings])\n  get scheduleUserSettings() {\n    const { scheduleMeeting = {} } = this.userSettings;\n    return scheduleMeeting;\n  }\n\n  @computed(({ lockedSettings }: Meeting) => [lockedSettings])\n  get recordingLockedSettings() {\n    const { recording = {} } = this.lockedSettings;\n    return recording;\n  }\n\n  @computed(({ lockedSettings }: Meeting) => [lockedSettings])\n  get scheduleLockedSettings() {\n    const { scheduleMeeting = {} } = this.lockedSettings;\n    return scheduleMeeting;\n  }\n\n  get savedDefaultMeetingSetting() {\n    return this._storage.getItem(this._defaultMeetingSettingKey);\n  }\n\n  get lastMeetingSetting() {\n    return this._storage.getItem(this._lastMeetingSettingKey);\n  }\n\n  get showSaveAsDefault() {\n    return this._showSaveAsDefault;\n  }\n\n  get isPreferencesChanged() {\n    return this.state.isPreferencesChanged;\n  }\n\n  @computed(({ state }: Meeting) => [state.userSettings])\n  get userSettings() {\n    return this.state.userSettings || {};\n  }\n\n  @computed(({ state }: Meeting) => [state.lockedSettings])\n  get lockedSettings() {\n    return this.state.lockedSettings || {};\n  }\n\n  get showAdminLock(): boolean {\n    return false;\n  }\n\n  get enablePersonalMeeting(): boolean {\n    return this._enablePersonalMeeting;\n  }\n\n  get personalMeeting() {\n    return this._storage.getItem(this._personalMeetingKey);\n  }\n\n  @computed(({ state, loginUser }: Meeting) => [state, loginUser])\n  get delegators(): MeetingDelegators[] {\n    if (this.state.delegators.length === 0) {\n      return [];\n    }\n    return [this.loginUser, ...this.state.delegators];\n  }\n\n  @computed(({ extensionInfo }: Meeting) => [extensionInfo])\n  get loginUser() {\n    const myself: MeetingDelegators = {\n      id: `${this.extensionInfo.id}`,\n      name: ASSISTED_USERS_MYSELF,\n      isLoginUser: true,\n    };\n    return myself;\n  }\n}\n"],"file":"Meeting.js"}