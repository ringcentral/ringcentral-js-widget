{"version":3,"sources":["modules/Meeting/Meeting.ts"],"names":["Meeting","deps","dep","optional","_locale","currentLocale","_enableServiceWebSettings","scheduleUserSettings","_enablePersonalMeeting","personalMeeting","scheduleLockedSettings","initialMeetingSetting","defaultLockedSettings","commonUserSettings","commonPersonalMeetingSettings","userSettings","lockedSettings","state","loginUser","extensionInfo","brand","alert","client","storage","availabilityMonitor","reducers","meetingProvider","locale","showSaveAsDefault","enableInvitationApi","enablePersonalMeeting","enableReloadAfterSchedule","enableServiceWebSettings","enableScheduleOnBehalf","enableCustomTimezone","options","actionTypes","_brand","_alert","_client","_extensionInfo","_storage","_availabilityMonitor","_lastMeetingSettingKey","_defaultMeetingSettingKey","_showSaveAsDefault","_enableInvitationApi","_personalMeetingKey","_enableReloadAfterSchedule","_enableScheduleOnBehalf","_fetchPersonMeetingTimeout","_meetingProvider","_fetchDelegatorsTimeout","_enableCustomTimezone","_createMeetingPromise","_reducer","registerReducer","key","reducer","store","subscribe","_onStateChange","_shouldInit","_init","_shouldReset","_reset","pending","ready","isRCM","extensionId","Promise","all","_initPersonalMeeting","_updateServiceWebSettings","_initMeeting","dispatch","type","init","_initMeetingSettings","_initScheduleFor","initSuccess","resetSuccess","update","defaultMeetingSetting","host","id","_updatePreferences","clearTimeout","fetchPersonalMeeting","meetingInfoResponse","meeting","formatPersonalMeeting","updatePersonalMeeting","console","error","resetPersonalMeeting","warn","setTimeout","setDelegators","_meeting","_combineWithSWSettings","combineWithSettings","updateMeeting","isMeetingPasswordValid","validatePasswordSettings","password","_requireMeetingPassword","_comparePreferences","usePersonalMeetingId","pmiDefaultSettings","getGeneralDefaultSettings","userExtensionId","delegators","length","hostId","user","item","updateMeetingPreferences","preferences","saveMeetingPreferencesState","isPreferencesChanged","getUserSettings","getLockedSettings","updateUserSettings","updateLockedSettings","usePmi","personalMeetingSettings","requirePasswordForSchedulingNewMeetings","requirePasswordForPmiMeetings","lockedRequirePasswordForSchedulingNewMeetings","lockedRequirePasswordForPmiMeetings","processedMeeting","allowJoinBeforeHost","_pmiPassword","pmiRequiresPwd","PMIRequirePassword","NONE","ALL","JBH_ONLY","pmiRequiresPwdLocked","_lockRequireMeetingPassword","getMeetingServiceInfo","serviceInfo","personalMeetingId","externalUserInfo","getMeeting","meetingInfo","shortId","settings","getDelegators","records","updateDelegatorList","isAlertSuccess","initScheduling","_validate","formattedMeeting","_format","saveAsDefault","saveAsDefaultSetting","postMeeting","resp","getMeetingInvitation","invitationInfo","scheduled","_saved","_createDialingNumberTpl","result","success","message","meetingStatus","scheduledSuccess","resetScheduling","_errorHandle","isScheduling","scheduleDirectly","account","extension","get","meetingId","isAlertError","response","clone","json","errorCode","log","isMeetingDeleted","indexOf","danger","meetingIsDeleted","post","put","service","platform","res","DEFAULT_LOCALE","code","language","apiResponse","invitation","send","method","url","recording","scheduleMeeting","startParticipantsVideo","startParticipantVideo","restScheduleOptions","processedScheduleMeeting","_isUpdating","_promise","initUpdating","putMeeting","updated","updatedSuccess","resetUpdating","mobileDialingNumberTpl","dialInNumbers","phoneDialingNumberTpl","errors","MeetingErrors","warning","permissionName","insufficientPermissions","payload","checkIfHAError","internalError","updatingStatus","obj","topic","meetingType","startHostVideo","audioOptions","schedule","recurrence","formatted","MeetingType","RECURRING","_schedule","durationInMinutes","timeZone","UTC_TIMEZONE_ID","startTime","moment","utc","format","until","PMI","SCHEDULED","invalidMeetingInfo","push","emptyTopic","noPassword","durationIncorrect","notShowAgain","isSecret","RCM_PASSWORD_REGEX","test","savedSetting","savedDefaultMeetingSetting","lastMeetingSetting","_initDefaultData","meetingName","setting","DEFAULT_LOCK_SETTINGS","info","schedulingStatus","scheduleStatus","scheduling","status","COMMON_SETTINGS","settingLock","getInitialMeetingSetting","usePmiForScheduledMeetings","getItem","myself","name","ASSISTED_USERS_MYSELF","isLoginUser","RcModule","background","proxify","selector","usePmiDefaultFromSW","initialSetting","generalDefaultSettings"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAGA;;AAWA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAOA;;AAcA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;IAcaA,O,WAbZ,gBAAO;AACNC,EAAAA,IAAI,EAAE,CACJ,OADI,EAEJ,OAFI,EAGJ,QAHI,EAIJ,eAJI,EAKJ,SALI,EAMJ,iBANI,EAOJ,QAPI,EAQJ;AAAEC,IAAAA,GAAG,EAAE,qBAAP;AAA8BC,IAAAA,QAAQ,EAAE;AAAxC,GARI,EASJ;AAAED,IAAAA,GAAG,EAAE,gBAAP;AAAyBC,IAAAA,QAAQ,EAAE;AAAnC,GATI;AADA,CAAP,C,UAk8BE,oBAAS;AAAA,MAAGC,OAAH,QAAGA,OAAH;AAAA,SAA0B,CAACA,OAAO,CAACC,aAAT,CAA1B;AAAA,CAAT,C,UAyBA,oBAAS;AAAA,MAAGC,yBAAH,SAAGA,yBAAH;AAAA,MAA8BC,oBAA9B,SAA8BA,oBAA9B;AAAA,SAAkE,CAC1ED,yBAD0E,EAE1EC,oBAF0E,CAAlE;AAAA,CAAT,C,UAWA,oBAAS;AAAA,MAAGC,sBAAH,SAAGA,sBAAH;AAAA,MAA2BC,eAA3B,SAA2BA,eAA3B;AAAA,SAA0D,CAClED,sBADkE,EAElEC,eAFkE,CAA1D;AAAA,CAAT,C,UAWA,oBACC;AAAA,MAAGH,yBAAH,SAAGA,yBAAH;AAAA,MAA8BI,sBAA9B,SAA8BA,sBAA9B;AAAA,SAAoE,CAClEJ,yBADkE,EAElEI,sBAFkE,CAApE;AAAA,CADD,C,UAeA,oBACC;AAAA,MACEC,qBADF,SACEA,qBADF;AAAA,MAEEC,qBAFF,SAEEA,qBAFF;AAAA,MAGEC,kBAHF,SAGEA,kBAHF;AAAA,MAIEC,6BAJF,SAIEA,6BAJF;AAAA,SAKM,CACJH,qBADI,EAEJC,qBAFI,EAGJC,kBAHI,EAIJC,6BAJI,CALN;AAAA,CADD,C,UA2HA,oBACC;AAAA,MACEN,sBADF,SACEA,sBADF;AAAA,MAEEF,yBAFF,SAEEA,yBAFF;AAAA,MAGEC,oBAHF,SAGEA,oBAHF;AAAA,SAIe,CACbC,sBADa,EAEbF,yBAFa,EAGbC,oBAHa,CAJf;AAAA,CADD,C,UAmBA,oBAAS;AAAA,MAAGQ,YAAH,SAAGA,YAAH;AAAA,SAA+B,CAACA,YAAD,CAA/B;AAAA,CAAT,C,UAMA,oBAAS;AAAA,MAAGA,YAAH,SAAGA,YAAH;AAAA,SAA+B,CAACA,YAAD,CAA/B;AAAA,CAAT,C,WAMA,oBAAS;AAAA,MAAGC,cAAH,SAAGA,cAAH;AAAA,SAAiC,CAACA,cAAD,CAAjC;AAAA,CAAT,C,WAMA,oBAAS;AAAA,MAAGA,cAAH,UAAGA,cAAH;AAAA,SAAiC,CAACA,cAAD,CAAjC;AAAA,CAAT,C,WAsBA,oBAAS;AAAA,MAAGC,KAAH,UAAGA,KAAH;AAAA,SAAwB,CAACA,KAAK,CAACF,YAAP,CAAxB;AAAA,CAAT,C,WAKA,oBAAS;AAAA,MAAGE,KAAH,UAAGA,KAAH;AAAA,SAAwB,CAACA,KAAK,CAACD,cAAP,CAAxB;AAAA,CAAT,C,WAiBA,oBAAS;AAAA,MAAGC,KAAH,UAAGA,KAAH;AAAA,MAAUC,SAAV,UAAUA,SAAV;AAAA,SAAmC,CAACD,KAAD,EAAQC,SAAR,CAAnC;AAAA,CAAT,C,WAQA,oBAAS;AAAA,MAAGC,aAAH,UAAGA,aAAH;AAAA,SAAgC,CAACA,aAAD,CAAhC;AAAA,CAAT,C;;;;;AAtsCD;AAuBA,2BAkBG;AAAA;;AAAA,QAjBDC,KAiBC,UAjBDA,KAiBC;AAAA,QAhBDC,KAgBC,UAhBDA,KAgBC;AAAA,QAfDC,MAeC,UAfDA,MAeC;AAAA,QAdDH,aAcC,UAdDA,aAcC;AAAA,QAbDI,OAaC,UAbDA,OAaC;AAAA,QAZDC,mBAYC,UAZDA,mBAYC;AAAA,QAXDC,QAWC,UAXDA,QAWC;AAAA,QAVDC,eAUC,UAVDA,eAUC;AAAA,QATDC,MASC,UATDA,MASC;AAAA,uCARDC,iBAQC;AAAA,QARDA,iBAQC,sCARmB,KAQnB;AAAA,uCAPDC,mBAOC;AAAA,QAPDA,mBAOC,sCAPqB,KAOrB;AAAA,uCANDC,qBAMC;AAAA,QANDA,qBAMC,sCANuB,KAMvB;AAAA,uCALDC,yBAKC;AAAA,QALDA,yBAKC,sCAL2B,IAK3B;AAAA,uCAJDC,wBAIC;AAAA,QAJDA,wBAIC,sCAJ0B,KAI1B;AAAA,uCAHDC,sBAGC;AAAA,QAHDA,sBAGC,sCAHwB,KAGxB;AAAA,uCAFDC,oBAEC;AAAA,QAFDA,oBAEC,sCAFsB,KAEtB;AAAA,QADEC,OACF;;AAAA;;AACD,8DACKA,OADL;AAEEC,MAAAA,WAAW,EAAED,OAAO,CAACC,WAAR,IAAuBA;AAFtC;AADC,UAxCKC,MAwCL;AAAA,UAvCIC,MAuCJ;AAAA,UAtCIC,OAsCJ;AAAA,UArCKC,cAqCL;AAAA,UApCKC,QAoCL;AAAA,UAnCKC,oBAmCL;AAAA,UAlCKC,sBAkCL;AAAA,UAjCKC,yBAiCL;AAAA,UAhCKC,kBAgCL;AAAA,UA/BKC,oBA+BL;AAAA,UA9BKC,mBA8BL;AAAA,UA7BKvC,sBA6BL;AAAA,UA5BKwC,0BA4BL;AAAA,UA3BK1C,yBA2BL;AAAA,UA1BK2C,uBA0BL;AAAA,UAzBKC,0BAyBL;AAAA,UAxBKC,gBAwBL;AAAA,UAvBKC,uBAuBL;AAAA,UAtBKC,qBAsBL;AAAA,UArBKjD,OAqBL;AAAA,UApBKkD,qBAoBL;;AAAA;;AAKD,UAAKjB,MAAL,GAAcjB,KAAd;AACA,UAAKhB,OAAL,GAAeuB,MAAf;AACA,UAAKW,MAAL,GAAcjB,KAAd;AACA,UAAKkB,OAAL,GAAejB,MAAf;AACA,UAAKmB,QAAL,GAAgBlB,OAAhB;AACA,UAAKiB,cAAL,GAAsBrB,aAAtB;AACA,UAAKgC,gBAAL,GAAwBzB,eAAxB;AACA,UAAKmB,kBAAL,GAA0BjB,iBAA1B;AACA,UAAKkB,oBAAL,GAA4BjB,mBAA5B;AACA,UAAKwB,qBAAL,GAA6BnB,oBAA7B;AACA,UAAKc,0BAAL,GAAkCjB,yBAAlC;AACA,UAAKvB,sBAAL,GAA8BsB,qBAA9B;AACA,UAAKxB,yBAAL,GAAiC0B,wBAAjC;AACA,UAAKiB,uBAAL,GAA+BhB,sBAA/B;AACA,UAAKS,oBAAL,GAA4BlB,mBAA5B;AACA,UAAKmB,sBAAL,GAA8B,oBAA9B;AACA,UAAKC,yBAAL,GAAiC,uBAAjC;AACA,UAAKG,mBAAL,GAA2B,iBAA3B;AACA,UAAKQ,QAAL,GAAgB,mCAAkB,MAAKnB,WAAvB,EAAoCX,QAApC,CAAhB;;AACA,UAAKgB,QAAL,CAAce,eAAd,CAA8B;AAC5BC,MAAAA,GAAG,EAAE,MAAKd,sBADkB;AAE5Be,MAAAA,OAAO,EAAE,iDAAyB,MAAKtB,WAA9B;AAFmB,KAA9B;;AAIA,QAAI,MAAKS,kBAAT,EAA6B;AAC3B,YAAKJ,QAAL,CAAce,eAAd,CAA8B;AAC5BC,QAAAA,GAAG,EAAE,MAAKb,yBADkB;AAE5Bc,QAAAA,OAAO,EAAE,wDAAgC,MAAKtB,WAArC;AAFmB,OAA9B;AAID;;AACD,QAAI,MAAK5B,sBAAT,EAAiC;AAC/B,YAAKiC,QAAL,CAAce,eAAd,CAA8B;AAC5BC,QAAAA,GAAG,EAAE,MAAKV,mBADkB;AAE5BW,QAAAA,OAAO,EAAE,kDAA0B,MAAKtB,WAA/B;AAFmB,OAA9B;AAID;;AAvCA;AAwCF;;;;iCAEY;AAAA;;AACX,WAAKuB,KAAL,CAAWC,SAAX,CAAqB;AAAA,eAAM,MAAI,CAACC,cAAL,EAAN;AAAA,OAArB;AACD;;;;;;;;;qBAGK,KAAKC,WAAL,E;;;;;;uBACI,KAAKC,KAAL,E;;;;;;;AACD,oBAAI,KAAKC,YAAL,EAAJ,EAAyB;AAC9B,uBAAKC,MAAL;AACD;;;;;;;;;;;;;;;;;;kCAGmB;AACpB,aACE,KAAKC,OAAL,IACA,KAAK5B,MAAL,CAAY6B,KADZ,IAEA,KAAK1B,QAAL,CAAc0B,KAFd,IAGA,KAAK3B,cAAL,CAAoB2B,KAHpB,IAIA,KAAKhB,gBAAL,CAAsBgB,KAJtB,IAKA,KAAKhB,gBAAL,CAAsBiB,KALtB,KAMC,CAAC,KAAK1B,oBAAN,IAA8B,KAAKA,oBAAL,CAA0ByB,KANzD,CADF;AASD;;;;4GAEkCE,W;;;;;;uBAC3BC,OAAO,CAACC,GAAR,CAAY,CAChB,KAAKC,oBAAL,CAA0BH,WAA1B,CADgB,EAEhB,KAAKI,yBAAL,CAA+BJ,WAA/B,CAFgB,CAAZ,C;;;;uBAIA,KAAKK,YAAL,CAAkBL,WAAlB,C;;;;;;;;;;;;;;;;;;;;;;;;AAIN,qBAAKV,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiByC;AADL,iBAApB;;uBAIMP,OAAO,CAACC,GAAR,CAAY,CAAC,KAAKO,oBAAL,EAAD,EAA8B,KAAKC,gBAAL,EAA9B,CAAZ,C;;;AAEN,qBAAKpB,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiB4C;AADL,iBAApB;;;;;;;;;;;;;;;;;;mCAKqB;AACrB,aACE,KAAKb,KAAL,KACC,CAAC,KAAK7B,MAAL,CAAY6B,KAAb,IACC,CAAC,KAAK1B,QAAL,CAAc0B,KADhB,IAEC,CAAC,KAAK3B,cAAL,CAAoB2B,KAFtB,IAGC,CAAC,KAAKhB,gBAAL,CAAsBgB,KAHxB,IAIC,CAAC,KAAKhB,gBAAL,CAAsBiB,KAJxB,IAKE,KAAK1B,oBAAL,IAA6B,CAAC,KAAKA,oBAAL,CAA0ByB,KAN3D,CADF;AASD;;;6BAEgB;AACf,WAAKR,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,QAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiB6C;AADL,OAApB;AAGD;AAED;AACF;AACA;AACA;;;;2BAES;AACL,WAAKP,YAAL;AACD;;;6BAGQ;AACP,WAAKA,YAAL;AACD;;;iCAEoBL,W,EAAsB;AACzC,WAAKa,MAAL,iCACK,KAAKC,qBADV;AAEEC,QAAAA,IAAI,EAAE;AACJC,UAAAA,EAAE,EAAEhB,WAAW,IAAI,KAAKnD,SAAL,CAAemE;AAD9B;AAFR;;AAMA,WAAKC,kBAAL;AACD;;;;4GAE0BjB,W;;;;;;;;oBACpB,KAAK7D,sB;;;;;;;;AAGV,oBAAI,KAAK0C,0BAAT,EAAqC;AACnCqC,kBAAAA,YAAY,CAAC,KAAKrC,0BAAN,CAAZ;AACD;;;;uBAEmC,KAAKsC,oBAAL,CAA0BnB,WAA1B,C;;;AAA5BoB,gBAAAA,mB;AACAC,gBAAAA,O,GAAU,KAAKC,qBAAL,CAA2BF,mBAA3B,C;AAChB,qBAAK9B,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBwD,qBADL;AAElBF,kBAAAA,OAAO,EAAPA;AAFkB,iBAApB;;;;;;;AAKAG,gBAAAA,OAAO,CAACC,KAAR,CAAc,+BAAd;AACA,qBAAKnC,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiB2D;AADL,iBAApB;AAGAF,gBAAAA,OAAO,CAACG,IAAR,CAAa,iBAAb;AACA,qBAAK9C,0BAAL,GAAkC+C,UAAU,CAAC,YAAM;AACjD,kBAAA,MAAI,CAACzB,oBAAL,CAA0BH,WAA1B;AACD,iBAF2C,EAEzC,KAFyC,CAA5C;;;;;;;;;;;;;;;;;;;;;;;;;;oBAOG,KAAKpB,uB;;;;;;;;AAIV,oBAAI,KAAKG,uBAAT,EAAkC;AAChCmC,kBAAAA,YAAY,CAAC,KAAKnC,uBAAN,CAAZ;AACD;;;;uBAGO,KAAK8C,aAAL,E;;;;;;;;;AAENL,gBAAAA,OAAO,CAACC,KAAR,CAAc,yBAAd;AACAD,gBAAAA,OAAO,CAACG,IAAR,CAAa,iBAAb;AACA,qBAAK5C,uBAAL,GAA+B6C,UAAU,CAAC,YAAM;AAC9C,kBAAA,MAAI,CAACC,aAAL;AACD,iBAFwC,EAEtC,KAFsC,CAAzC;;;;;;;;;;;;;;;;;;wCAMgBC,Q,EAA2B;AAC7C,aAAO,KAAKC,sBAAL,CAA4BD,QAA5B,CAAP;AACD;;;2BAGMA,Q,EAA2B;AAChC,UAAIT,OAAO,GAAGS,QAAd;;AACA,UAAI,KAAK7F,yBAAT,EAAoC;AAClCoF,QAAAA,OAAO,GAAG,KAAKW,mBAAL,CAAyBF,QAAzB,CAAV;AACD;;AACD,WAAKxC,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,QAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBkE,aADL;AAElBZ,QAAAA,OAAO,kCACFA,OADE;AAELa,UAAAA,sBAAsB,EAAE,KAAKC,wBAAL,CACtBL,QAAQ,CAACM,QADa,EAEtBN,QAAQ,CAACO,uBAFa;AAFnB;AAFW,OAApB;;AAUA,WAAKC,mBAAL;AACD;;;;kHAGgCC,oB;;;;;AAC/B,qBAAK1B,MAAL,CACE0B,oBAAoB,GAChB,KAAKC,kBADW,GAEhB,KAAKC,yBAAL,EAHN;;;;;;;;;;;;;;;;;;;yGAQsBC,e;;;;;;sBAClB,CAACA,eAAD,IAAoB,CAAC,KAAKC,UAA1B,IAAwC,KAAKA,UAAL,CAAgBC,MAAhB,KAA2B,C;;;;;;;;AAGjEC,gBAAAA,M,aAAYH,e;AACZI,gBAAAA,I,GAAO,iBAAK,UAACC,IAAD;AAAA,yBAAUA,IAAI,CAAC/B,EAAL,KAAY6B,MAAtB;AAAA,iBAAL,EAAmC,KAAKF,UAAxC,C;;qBAETG,I;;;;;;uBACI,KAAKrC,oBAAL,CAA0BoC,MAA1B,C;;;;;;;;;;;;;;;;;;yCAImB;AAC3B,WAAKvD,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,QAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBiF,wBADL;AAElBC,QAAAA,WAAW,EAAE,2CAAuB,KAAK5B,OAA5B;AAFK,OAApB;AAID;;;0CAE6B;AAAA,UACpB4B,WADoB,GACK,IADL,CACpBA,WADoB;AAAA,UACP5B,OADO,GACK,IADL,CACPA,OADO;AAE5B,WAAK/B,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,QAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBmF,2BADL;AAElBC,QAAAA,oBAAoB,EAAE,uCAAmBF,WAAnB,EAAgC5B,OAAhC;AAFJ,OAApB;AAID;;;;iHAGuCrB,W;;;;;;;oBACjC,KAAK/D,yB;;;;;;;;;uBAImCgE,OAAO,CAACC,GAAR,CAAY,CACvD,KAAKkD,eAAL,CAAqBpD,WAArB,CADuD,EAEvD,KAAKqD,iBAAL,EAFuD,CAAZ,C;;;;;AAAtC3G,gBAAAA,Y;AAAcC,gBAAAA,c;AAIrB,qBAAK2C,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBuF,kBADL;AAElB5G,kBAAAA,YAAY,EAAZA;AAFkB,iBAApB;AAIA,qBAAK4C,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBwF,oBADL;AAElB5G,kBAAAA,cAAc,EAAdA;AAFkB,iBAApB;;;;;;;;;;;;;;;;;;qCAOA0E,O,UAEAmC,M,EACiB;AAAA,UAFf9G,YAEe,UAFfA,YAEe;AAAA,UAFD+G,uBAEC,UAFDA,uBAEC;;AACjB,UAAI,CAAC,KAAKxH,yBAAV,EAAqC;AACnC,eAAOoF,OAAP;AACD;;AAHgB,kCAOb,KAAKnF,oBAPQ;AAAA,yDAKfwH,uCALe;AAAA,UAKfA,uCALe,uCAK2B,KAL3B;AAAA,UAMfC,6BANe,yBAMfA,6BANe;AAAA,kCAWb,KAAKtH,sBAXQ;AAAA,UAS0BuH,6CAT1B,yBASfF,uCATe;AAAA,UAUgBG,mCAVhB,yBAUfF,6BAVe;;AAYjB,UAAMG,gBAAgB,iDACjBzC,OADiB,GAEhBmC,MAAM,GAAGC,uBAAH,GAA6B/G,YAFnB;AAGpB6F,QAAAA,oBAAoB,EAAEiB;AAHF,QAAtB,CAZiB,CAkBjB;;;AACA,UAAIA,MAAJ,EAAY;AAAA,YACFO,mBADE,GACqCD,gBADrC,CACFC,mBADE;AAAA,oCACqCD,gBADrC,CACmB1B,QADnB;AAAA,YACmBA,QADnB,sCAC8B,EAD9B;;AAGV,YAAIA,QAAQ,KAAK,EAAjB,EAAqB;AACnB0B,UAAAA,gBAAgB,CAACE,YAAjB,GAAgC5B,QAAhC;AACD;;AAED,YAAI6B,cAAJ;;AACA,gBAAQN,6BAAR;AACE,eAAKO,8BAAmBC,IAAxB;AACEF,YAAAA,cAAc,GAAG7B,QAAQ,KAAK,EAA9B;AACA;;AACF,eAAK8B,8BAAmBE,GAAxB;AACEH,YAAAA,cAAc,GAAG,IAAjB;AACA;;AACF,eAAKC,8BAAmBG,QAAxB;AACEJ,YAAAA,cAAc,GAAGF,mBAAmB,IAAI3B,QAAQ,KAAK,EAArD;AACA;;AACF;AACE6B,YAAAA,cAAc,GAAGH,gBAAgB,CAACzB,uBAAlC;AAXJ;;AAcA,YAAIiC,oBAAoB,GAAGR,gBAAgB,CAACS,2BAA5C;;AACA,YAAIZ,6BAA6B,KAAKO,8BAAmBG,QAAzD,EAAmE;AACjEC,UAAAA,oBAAoB,GAClBT,mCAAmC,IAAIE,mBADzC;AAED,SAHD,MAGO,IACLJ,6BAA6B,KAAKO,8BAAmBG,QADhD,EAEL;AACAC,UAAAA,oBAAoB,GAAGT,mCAAvB;AACD;;AAEDC,QAAAA,gBAAgB,CAACzB,uBAAjB,GAA2C4B,cAA3C;AACAH,QAAAA,gBAAgB,CAACS,2BAAjB,GAA+CD,oBAA/C;AACD,OAlCD,MAkCO;AACL;AACA,YAAIZ,uCAAJ,EAA6C;AAC3CI,UAAAA,gBAAgB,CAACzB,uBAAjB,GAA2C,IAA3C;AACD;;AACD,YAAIuB,6CAAJ,EAAmD;AACjDE,UAAAA,gBAAgB,CAACS,2BAAjB,GAA+C,IAA/C;AACD;AACF;;AACD,6CACKT,gBADL;AAEE1B,QAAAA,QAAQ,EACN0B,gBAAgB,CAACzB,uBAAjB,IAA4C,CAACyB,gBAAgB,CAAC1B,QAA9D,GACI,4CADJ,GAEI0B,gBAAgB,CAAC1B;AALzB;AAOD;;;2CAEsBf,O,EAA2C;AAChE,UAAI,CAACA,OAAO,CAACkB,oBAAb,EAAmC;AACjC,eAAOlB,OAAP;AACD;;AAED,UAAMyC,gBAAgB,qBAAQzC,OAAR,CAAtB;;AALgE,UAMxD0C,mBANwD,GAMhCD,gBANgC,CAMxDC,mBANwD;AAAA,UAOxDJ,6BAPwD,GAOtB,KAAKzH,oBAPiB,CAOxDyH,6BAPwD;AAAA,UAS/BE,mCAT+B,GAU5D,KAAKxH,sBAVuD,CAS9DsH,6BAT8D;;AAYhE,UACEE,mCAAmC,IACnCF,6BAA6B,KAAKO,8BAAmBG,QAFvD,EAGE;AACA,YAAIN,mBAAmB,IAAI,CAACD,gBAAgB,CAACzB,uBAA7C,EAAsE;AACpEyB,UAAAA,gBAAgB,CAACzB,uBAAjB,GAA2C,IAA3C;AACAyB,UAAAA,gBAAgB,CAAC1B,QAAjB,GACE0B,gBAAgB,CAACE,YAAjB,IAAiC,4CADnC;AAED;;AACDF,QAAAA,gBAAgB,CAACS,2BAAjB,GAA+CR,mBAA/C;AACD;;AACD,aAAOD,gBAAP;AACD;;;;4GAIC9D,W;;;;;;;uBAE0B,KAAKwE,qBAAL,CAA2BxE,WAA3B,C;;;AAApByE,gBAAAA,W;AACAC,gBAAAA,iB,GAAoBD,WAAW,CAACE,gBAAZ,CAA6BD,iB;;uBACrB,KAAKE,UAAL,CAAgBF,iBAAhB,C;;;AAA5BtD,gBAAAA,mB;kDACCA,mB;;;;;;;;;;;;;;;;;;0CAIPyD,W,EACAC,O,EACiB;AACjB,UAAMC,QAAQ,iDACT,KAAKzI,qBADI,GAETuI,WAFS;AAGZC,QAAAA,OAAO,EAAEA,OAAO,IAAID,WAAW,CAAC7D,EAHpB;AAIZuB,QAAAA,oBAAoB,EAAE;AAJV,QAAd;;AAMA,6CACKwC,QADL;AAEE1C,QAAAA,uBAAuB,EAAE,CAAC,CAAC0C,QAAQ,CAAC3C;AAFtC;AAID;;;;;;;;;;;;uBAI2B,KAAK4C,aAAL,E;;;;AAAlBC,gBAAAA,O,yBAAAA,O;AACR,qBAAK3F,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBmH,mBADL;AAElBvC,kBAAAA,UAAU,EAAEsC;AAFM,iBAApB;;;;;;;;;;;;;;;;;;;yGAQA5D,O;;;;;;;;;;;;;;;;;;;;uFAC0D,E,iCAAxD8D,c,EAAAA,c,sCAAiB,I;;AAGjB9D,gBAAAA,OAAO,GAAGA,OAAO,IAAI,KAAKA,OAA1B;AACA,qBAAK/B,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBqH;AADL,iBAApB,E,CAGA;;AACA,qBAAKC,SAAL,CAAehE,OAAf;;AACMiE,gBAAAA,gB,GAAmB,KAAKC,OAAL,CAAalE,OAAb,C;;AAEzB,oBAAI,KAAK7C,kBAAL,IAA2B6C,OAAO,CAACmE,aAAvC,EAAsD;AACpD,uBAAKC,oBAAL,CAA0BpE,OAA1B;AACD;;;uBAEiCpB,OAAO,CAACC,GAAR,CAAY,CAC5C,KAAKwF,WAAL,CAAiBJ,gBAAjB,CAD4C,EAE5C,KAAKd,qBAAL,kBAA2BnD,OAAO,CAACN,IAAnC,kDAA2B,cAAcC,EAAzC,CAF4C,CAAZ,C;;;;;AAA3B2E,gBAAAA,I;AAAMlB,gBAAAA,W;;uBAKgB,KAAKmB,oBAAL,CAC3BD,IAAI,CAAC3E,EADsB,EAE3B,KAAKhF,aAFsB,C;;;AAAvB6J,gBAAAA,c;AAKN,qBAAKvG,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiB+H,SADL;AAElBzE,kBAAAA,OAAO,kCACFiE,gBADE;AAELtE,oBAAAA,EAAE,EAAE2E,IAAI,CAAC3E,EAFJ;AAGL+E,oBAAAA,MAAM,EAAE1E,OAAO,CAAC0E;AAHX;AAFW,iBAApB;;uBASqB,KAAKC,uBAAL,CACnBvB,WADmB,EAEnBkB,IAFmB,EAGnBE,cAHmB,C;;;AAAfI,gBAAAA,M;;AAMN;AACA,oBAAI,KAAKtH,0BAAT,EAAqC;AACnC,uBAAK0B,YAAL;AACD,iB,CAED;;;AACA,oBAAI,KAAKlE,sBAAL,IAA+BwJ,IAAI,CAACpD,oBAAxC,EAA8D;AAC5D,uBAAKjD,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,oBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBwD,qBADL;AAElBF,oBAAAA,OAAO,EAAE,KAAKC,qBAAL,CACPqE,IADO,EAEPlB,WAAW,CAACE,gBAAZ,CAA6BD,iBAFtB;AAFS,mBAApB;;AAOA,sBAAI,KAAKzI,yBAAT,EAAoC;AAClC,yBAAK4E,MAAL,iCACK,KAAKQ,OADV;AAEE2C,sBAAAA,YAAY,EAAE2B,IAAI,CAACvD;AAFrB;AAID;AACF,iB,CAED;;;AACA,oBAAI+C,cAAJ,EAAoB;AAClBvD,kBAAAA,UAAU,CAAC,YAAM;AACf,oBAAA,MAAI,CAAC3D,MAAL,CAAYiI,OAAZ,CAAoB;AAClBC,sBAAAA,OAAO,EAAEC,0BAAcC;AADL,qBAApB;AAGD,mBAJS,EAIP,EAJO,CAAV;AAKD;;mDACMJ,M;;;;;AAEP,qBAAK3G,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBuI;AADL,iBAApB;;uBAGM,KAAKC,YAAL,e;;;mDACC,I;;;;;;;;;;;;;;;;;;;kGAMTlF,O;;;;;;;;;;;uFAC0D,E,iCAAxD8D,c,EAAAA,c,sCAAiB,I;;qBAEf,KAAKqB,Y;;;;;mDAAqB,KAAKvH,qB;;;AAEnC,qBAAKA,qBAAL,GAA6B,KAAKwH,gBAAL,CAAsBpF,OAAtB,EAA+B;AAC1D8D,kBAAAA,cAAc,EAAdA;AAD0D,iBAA/B,CAA7B;;uBAIqB,KAAKlG,qB;;;AAApBgH,gBAAAA,M;AACN,qBAAKhH,qBAAL,GAA6B,IAA7B;mDACOgH,M;;;;;;;;;;;;;;;;;;;8GAImBjG,W;;;;;mDACnB,KAAK9B,OAAL,CACJwI,OADI,GAEJC,SAFI,CAEM3G,WAFN,EAGJqB,OAHI,GAIJoD,WAJI,GAKJmC,GALI,E;;;;;;;;;;;;;;;;;;;mGASQC,S;;;;;;;;;;;;;;;;;uFAA6C,E,+BAAxBC,Y,EAAAA,Y,oCAAe,I;;;uBAE1B,KAAK5I,OAAL,CACpBwI,OADoB,GAEpBC,SAFoB,GAGpBtF,OAHoB,CAGZwF,SAHY,EAIpBD,GAJoB,E;;;AAAjB7B,gBAAAA,Q;mFAMDA,Q;AACH1C,kBAAAA,uBAAuB,EAAE,CAAC,CAAC0C,QAAQ,CAAC3C;;;;;;;uBAGD,cAAE2E,QAAF,CAAWC,KAAX,GAAmBC,IAAnB,E;;;;AAA7BC,gBAAAA,S,yBAAAA,S;AAAWf,gBAAAA,O,yBAAAA,O;AACnB3E,gBAAAA,OAAO,CAAC2F,GAAR,uCACiCN,SADjC,eAC+CK,SAD/C,eAC6Df,OAD7D;AAGMiB,gBAAAA,gB,GACJF,SAAS,KAAK,SAAd,IACAf,OAAO,CAACkB,OAAR,CAAgB,0BAAhB,IAA8C,CAAC,C;;AACjD,oBAAIP,YAAY,IAAIM,gBAApB,EAAsC;AACpCxF,kBAAAA,UAAU,CAAC,YAAM;AACf,oBAAA,MAAI,CAAC3D,MAAL,CAAYqJ,MAAZ,CAAmB;AACjBnB,sBAAAA,OAAO,EAAEC,0BAAcmB;AADN,qBAAnB;AAGD,mBAJS,EAIP,EAJO,CAAV;AAKD;;;;;;;;;;;;;;;;;;;;;oGAKajC,gB;;;;;mDACT,KAAKpH,OAAL,CAAawI,OAAb,GAAuBC,SAAvB,GAAmCtF,OAAnC,GAA6CmG,IAA7C,CAAkDlC,gBAAlD,C;;;;;;;;;;;;;;;;;;;mGAIQuB,S,EAAmBvB,gB;;;;;mDAC3B,KAAKpH,OAAL,CACJwI,OADI,GAEJC,SAFI,GAGJtF,OAHI,CAGIwF,SAHJ,EAIJY,GAJI,CAIAnC,gBAJA,C;;;;;;;;;;;;;;;;;;;;;;;;;;uBASW,KAAKpH,OAAL,CAAawJ,OAAb,CACfC,QADe,GAEff,GAFe,CAGd,qEAHc,C;;;AAAZgB,gBAAAA,G;mDAKCA,GAAG,CAACX,IAAJ,E;;;;;;;;;;;;;;;;;;;6GAKPJ,S;;;;;;;;;;;AACAvJ,gBAAAA,M,iEAASuK,oB;;oBAEJ,KAAKpJ,oB;;;;;mDACD,I;;;sBAGL,KAAKT,MAAL,CAAY8J,IAAZ,KAAqB,I;;;;;mDAChB,I;;;;;uBAGmB,KAAK5J,OAAL,CAAawJ,OAAb,CACvBC,QADuB,GAEvBf,GAFuB,uDAGyBC,SAHzB,kBAItB;AACEkB,kBAAAA,QAAQ,EAAEzK;AADZ,iBAJsB,C;;;AAApB0K,gBAAAA,W;;uBAQuBA,WAAW,CAACf,IAAZ,E;;;;AAArBgB,gBAAAA,U,yBAAAA,U;mDACD;AACLA,kBAAAA,UAAU,EAAVA;AADK,iB;;;;;AAIPzG,gBAAAA,OAAO,CAACG,IAAR;mDACO,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKW3B,gBAAAA,W,iEAAc,G;;AAE1B2H,gBAAAA,Q,GAAW,KAAKzJ,OAAL,CAAawJ,OAAb,CAAqBC,QAArB,E;;uBACSA,QAAQ,CAACO,IAAT,CAAc;AACtCC,kBAAAA,MAAM,EAAE,KAD8B;AAEtCC,kBAAAA,GAAG,8CAAuCpI,WAAvC;AAFmC,iBAAd,C;;;AAApBgI,gBAAAA,W;;uBAIiDA,WAAW,CAACf,IAAZ,E;;;;gEAA/CoB,S;AAAAA,gBAAAA,S,uCAAY,E;gEAAIC,e;AAAAA,gBAAAA,e,uCAAkB,E;mDACnC;AACLD,kBAAAA,SAAS,EAATA,SADK;AAELC,kBAAAA,eAAe,EAAfA;AAFK,iB;;;;;AAKP9G,gBAAAA,OAAO,CAACG,IAAR;mDACO,I;;;;;;;;;;;;;;;;;;;;;;;;;;;AAODgG,gBAAAA,Q,GAAW,KAAKzJ,OAAL,CAAawJ,OAAb,CAAqBC,QAArB,E;;uBACSA,QAAQ,CAACO,IAAT,CAAc;AACtCC,kBAAAA,MAAM,EAAE,KAD8B;AAEtCC,kBAAAA,GAAG,EAAE;AAFiC,iBAAd,C;;;AAApBJ,gBAAAA,W;;uBAIiDA,WAAW,CAACf,IAAZ,E;;;;gEAA/CoB,S;AAAAA,gBAAAA,S,uCAAY,E;gEAAIC,e;AAAAA,gBAAAA,e,uCAAkB,E;AAExCC,gBAAAA,sB,GAGED,e,CAHFC,sB,EACAC,qB,GAEEF,e,CAFFE,qB,EACGC,mB,4BACDH,e;AACEI,gBAAAA,wB,mCACDD,mB;AACHF,kBAAAA,sBAAsB,EACpBA,sBAAsB,IAAIC,qBAA1B,IAAmD;;mDAEhD;AACLH,kBAAAA,SAAS,EAATA,SADK;AAELC,kBAAAA,eAAe,EAAEI;AAFZ,iB;;;;;AAKPlH,gBAAAA,OAAO,CAACG,IAAR;mDACO,I;;;;;;;;;;;;;;;;;;;sGAMTkF,S,EACAxF,O;;;;;;;;;;;;;;;;;;;;uFAC2D,E,iCAAzD8D,c,EAAAA,c,sCAAiB,K;;qBAEf,KAAKwD,WAAL,CAAiB9B,SAAjB,C;;;;;mDACM,KAAK5E,aAAN,CAA4B2G,Q;;;AAErCvH,gBAAAA,OAAO,GAAGA,OAAO,IAAI,KAAKA,OAA1B;;AAEE,qBAAK/B,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiB8K,YADL;AAElBhC,kBAAAA,SAAS,EAATA;AAFkB,iBAApB,E,CAIA;;AACA,qBAAKxB,SAAL,CAAehE,OAAf;;AACMiE,gBAAAA,gB,GAAmB,KAAKC,OAAL,CAAalE,OAAb,C;;AACzB,oBAAI,KAAK7C,kBAAL,IAA2B6C,OAAO,CAACmE,aAAvC,EAAsD;AACpD,uBAAKC,oBAAL,CAA0BpE,OAA1B;AACD;;AAEA,qBAAKY,aAAN,CAA4B2G,QAA5B,GAAuC3I,OAAO,CAACC,GAAR,CAAY,CACjD,KAAK4I,UAAL,CAAgBjC,SAAhB,EAA2BvB,gBAA3B,CADiD,EAEjD,KAAKd,qBAAL,mBAA2BnD,OAAO,CAACN,IAAnC,mDAA2B,eAAcC,EAAzC,CAFiD,CAAZ,CAAvC;;uBAKmC,KAAKiB,aAAN,CAA4B2G,Q;;;;;AAAvDjD,gBAAAA,I;AAAMlB,gBAAAA,W;;uBACgB,KAAKmB,oBAAL,CAC3BiB,SAD2B,EAE3B,KAAK7K,aAFsB,C;;;AAAvB6J,gBAAAA,c;AAKN,qBAAKvG,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBgL,OADL;AAElB1H,kBAAAA,OAAO,kCACFiE,gBADE;AAELS,oBAAAA,MAAM,EAAE1E,OAAO,CAAC0E;AAFX,oBAFW;AAMlBc,kBAAAA,SAAS,EAATA;AANkB,iBAApB;;uBASqB,KAAKb,uBAAL,CACnBvB,WADmB,EAEnBkB,IAFmB,EAGnBE,cAHmB,C;;;AAAfI,gBAAAA,M;;AAMN;AACA,oBAAI,KAAKtH,0BAAT,EAAqC;AACnC,uBAAK0B,YAAL;AACD,iB,CAED;;;AACA,oBAAI,KAAKlE,sBAAL,IAA+BwJ,IAAI,CAACpD,oBAAxC,EAA8D;AAC5D,uBAAKjD,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,oBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBwD,qBADL;AAElBF,oBAAAA,OAAO,EAAE,KAAKC,qBAAL,CACPqE,IADO,EAEPlB,WAAW,CAACE,gBAAZ,CAA6BD,iBAFtB;AAFS,mBAApB;;AAOA,sBAAI,KAAKzI,yBAAT,EAAoC;AAClC,yBAAK4E,MAAL,iCACK,KAAKQ,OADV;AAEE2C,sBAAAA,YAAY,EAAE2B,IAAI,CAACvD;AAFrB;AAID;AACF,iB,CAED;;;AACA,oBAAI+C,cAAJ,EAAoB;AAClBvD,kBAAAA,UAAU,CAAC,YAAM;AACf,oBAAA,MAAI,CAAC3D,MAAL,CAAYiI,OAAZ,CAAoB;AAClBC,sBAAAA,OAAO,EAAEC,0BAAc4C;AADL,qBAApB;AAGD,mBAJS,EAIP,EAJO,CAAV;AAKD;;mDACM/C,M;;;;;AAEP,qBAAK3G,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiBkL,aADL;AAElBpC,kBAAAA,SAAS,EAATA;AAFkB,iBAApB;;uBAIM,KAAKN,YAAL,e;;;mDACC,I;;;;AAEP,uBAAQ,KAAKtE,aAAN,CAA4B2G,QAAnC;;;;;;;;;;;;;;;;;;;;gHAKFnE,W,EACAkB,I,EACAE,c;;;;;;AAEApB,gBAAAA,WAAW,CAACyE,sBAAZ,GAAqC,8CACnCzE,WAAW,CAAC0E,aADuB,EAEnCxD,IAAI,CAAC3E,EAF8B,CAArC;AAIAyD,gBAAAA,WAAW,CAAC2E,qBAAZ,GAAoC,6CAClC3E,WAAW,CAAC0E,aADsB,CAApC;AAGMlD,gBAAAA,M,GAAS;AACb5E,kBAAAA,OAAO,EAAEsE,IADI;AAEblB,kBAAAA,WAAW,EAAXA,WAFa;AAGb3H,kBAAAA,aAAa,EAAE,KAAKA,aAHP;AAIb+I,kBAAAA,cAAc,EAAdA;AAJa,iB;mDAMRI,M;;;;;;;;;;;;;;;;;;;qGAGUoD,M;;;;;;;sBACbA,MAAM,YAAYC,4B;;;;;uDACAD,MAAM,CAACnJ,G;;;AAA3B,sEAAgC;AAArBuB,oBAAAA,KAAqB;;AAC9B,yBAAKxD,MAAL,CAAYsL,OAAZ,CAAoB9H,KAApB;AACD;;;;;;;;;;;sBACQ4H,MAAM,IAAIA,MAAM,CAACtC,Q;;;;;;uBAKhBsC,MAAM,CAACtC,QAAP,CAAgBC,KAAhB,GAAwBC,IAAxB,E;;;;AAHRd,gBAAAA,O,yBAAAA,O;AACAe,gBAAAA,S,yBAAAA,S;AACAsC,gBAAAA,c,yBAAAA,c;;sBAEEtC,SAAS,KAAK,yBAAd,IAA2CsC,c;;;;;AAC7C,qBAAKvL,MAAL,CAAYqJ,MAAZ,CAAmB;AACjBnB,kBAAAA,OAAO,EAAEC,0BAAcqD,uBADN;AAEjBC,kBAAAA,OAAO,EAAE;AACPF,oBAAAA,cAAc,EAAdA;AADO;AAFQ,iBAAnB;;;;;;sBAOAtC,SAAS,KAAK,SAAd,IACAf,OAAO,CAACkB,OAAR,CAAgB,0BAAhB,IAA8C,CAAC,C;;;;;AAE/C,qBAAKpJ,MAAL,CAAYqJ,MAAZ,CAAmB;AACjBnB,kBAAAA,OAAO,EAAEC,0BAAcmB;AADN,iBAAnB;;;;;;gCAIA,CAAC,KAAKlJ,oB;;;;;;;;uBACE,KAAKA,oBAAL,CAA0BsL,cAA1B,CAAyCN,MAAzC,C;;;;;;;;;;;AAER,qBAAKpL,MAAL,CAAYqJ,MAAZ,CAAmB;AAAEnB,kBAAAA,OAAO,EAAEC,0BAAcwD;AAAzB,iBAAnB;;;;;;;AAGFpI,gBAAAA,OAAO,CAAC2F,GAAR,CAAY,SAAZ,EAAuBkC,MAAvB;;AACA,qBAAKpL,MAAL,CAAYqJ,MAAZ,CAAmB;AAAEnB,kBAAAA,OAAO,EAAEC,0BAAcwD;AAAzB,iBAAnB;;;;;;;;;;;;;;;;AAIJ;AACF;AACA;;;;gCACc/C,S,EAAmB;AAC7B,aACE,KAAKjK,KAAL,CAAWiN,cAAX,IACA,iBAAK,UAACC,GAAD;AAAA,eAAcA,GAAG,CAACjD,SAAJ,KAAkBA,SAAhC;AAAA,OAAL,EAAgD,KAAKjK,KAAL,CAAWiN,cAA3D,CAFF;AAID;AAED;AACF;AACA;AACA;;;;4BACUxI,O,EAA2C;AAAA,UAE/C0I,KAF+C,GAc7C1I,OAd6C,CAE/C0I,KAF+C;AAAA,UAG/CC,WAH+C,GAc7C3I,OAd6C,CAG/C2I,WAH+C;AAAA,UAI/CjG,mBAJ+C,GAc7C1C,OAd6C,CAI/C0C,mBAJ+C;AAAA,UAK/CkG,cAL+C,GAc7C5I,OAd6C,CAK/C4I,cAL+C;AAAA,UAM/C1B,sBAN+C,GAc7ClH,OAd6C,CAM/CkH,sBAN+C;AAAA,UAO/C2B,YAP+C,GAc7C7I,OAd6C,CAO/C6I,YAP+C;AAAA,UAQ/C9H,QAR+C,GAc7Cf,OAd6C,CAQ/Ce,QAR+C;AAAA,UAS/C+H,QAT+C,GAc7C9I,OAd6C,CAS/C8I,QAT+C;AAAA,UAU/CC,UAV+C,GAc7C/I,OAd6C,CAU/C+I,UAV+C;AAAA,UAW/C7H,oBAX+C,GAc7ClB,OAd6C,CAW/CkB,oBAX+C;AAAA,UAY/CF,uBAZ+C,GAc7ChB,OAd6C,CAY/CgB,uBAZ+C;AAAA,UAa/CtB,IAb+C,GAc7CM,OAd6C,CAa/CN,IAb+C;AAejD,UAAMsJ,SAAS,GAAG;AAChBtJ,QAAAA,IAAI,EAAJA,IADgB;AAEhBgJ,QAAAA,KAAK,EAALA,KAFgB;AAGhBC,QAAAA,WAAW,EAAXA,WAHgB;AAIhBjG,QAAAA,mBAAmB,EAAnBA,mBAJgB;AAKhBkG,QAAAA,cAAc,EAAdA,cALgB;AAMhB1B,QAAAA,sBAAsB,EAAtBA,sBANgB;AAOhB2B,QAAAA,YAAY,EAAZA,YAPgB;AAQhB9H,QAAAA,QAAQ,EAAEC,uBAAuB,GAAGD,QAAH,GAAc,EAR/B;AAShBgI,QAAAA,UAAU,EAAVA,UATgB;AAUhB7H,QAAAA,oBAAoB,EAApBA;AAVgB,OAAlB,CAfiD,CA2BjD;;AACA,UAAIyH,WAAW,KAAKM,2BAAYC,SAAhC,EAA2C;AACzC,YAAMC,SAAkC,GAAG;AACzCC,UAAAA,iBAAiB,EAAEN,QAAQ,CAACM,iBADa;AAEzCC,UAAAA,QAAQ,EAAE;AACR1J,YAAAA,EAAE,EAAE,KAAKhC,qBAAL,GACAmL,QAAQ,CAACO,QAAT,CAAkB1J,EADlB,GAEA2J;AAHI;AAF+B,SAA3C;;AAQA,YAAIR,QAAQ,CAACS,SAAb,EAAwB;AACtB;AACA;AACAJ,UAAAA,SAAS,CAACI,SAAV,GAAsB,KAAK5L,qBAAL,GAClBmL,QAAQ,CAACS,SADS,GAElBC,mBAAOC,GAAP,CAAWX,QAAQ,CAACS,SAApB,EAA+BG,MAA/B,EAFJ;AAGD;;AACDV,QAAAA,SAAS,CAACF,QAAV,GAAqBK,SAArB;;AAEA,YAAIJ,UAAU,IAAIA,UAAU,CAACY,KAA7B,EAAoC;AAClCX,UAAAA,SAAS,CAACD,UAAV,CAAqBY,KAArB,GAA6BH,mBAAOC,GAAP,CAAWV,UAAU,CAACY,KAAtB,EAA6BD,MAA7B,EAA7B;AACD;AACF,OAjDgD,CAmDjD;;;AACAV,MAAAA,SAAS,CAACL,WAAV,GACEK,SAAS,CAACL,WAAV,KAA0BM,2BAAYW,GAAtC,GACIX,2BAAYY,SADhB,GAEIb,SAAS,CAACL,WAHhB;AAIA,aAAOK,SAAP;AACD;AAED;AACF;AACA;AACA;AACA;;;;8BACYhJ,O,EAAS;AACjB,UAAI,CAACA,OAAL,EAAc;AACZ,cAAM,IAAIiI,4BAAJ,CAAkBlD,0BAAc+E,kBAAhC,CAAN;AACD;;AAHgB,UAITpB,KAJS,GAI8C1I,OAJ9C,CAIT0I,KAJS;AAAA,UAIF3H,QAJE,GAI8Cf,OAJ9C,CAIFe,QAJE;AAAA,UAIQ+H,QAJR,GAI8C9I,OAJ9C,CAIQ8I,QAJR;AAAA,UAIkB9H,uBAJlB,GAI8ChB,OAJ9C,CAIkBgB,uBAJlB;AAKjB,UAAMgH,MAAM,GAAG,IAAIC,4BAAJ,EAAf;;AACA,UAAIS,KAAK,CAACnH,MAAN,IAAgB,CAApB,EAAuB;AACrByG,QAAAA,MAAM,CAAC+B,IAAP,CAAYhF,0BAAciF,UAA1B;AACD;;AACD,UAAIhJ,uBAAuB,KAAK,CAACD,QAAD,IAAaA,QAAQ,CAACQ,MAAT,IAAmB,CAArC,CAA3B,EAAoE;AAClEyG,QAAAA,MAAM,CAAC+B,IAAP,CAAYhF,0BAAckF,UAA1B;AACD;;AACD,UAAInB,QAAJ,EAAc;AACZ,YAAIA,QAAQ,CAACM,iBAAT,GAA6B,CAAjC,EAAoC;AAClCpB,UAAAA,MAAM,CAAC+B,IAAP,CAAYhF,0BAAcmF,iBAA1B;AACD;AACF;;AACD,UAAIlC,MAAM,CAACzG,MAAP,GAAgB,CAApB,EAAuB;AACrB,cAAMyG,MAAN;AACD;AACF;;;yCAEoBhI,O,EAAS;AAC5B,UAAMiE,gBAAgB,GAAG,KAAKC,OAAL,CAAalE,OAAb,CAAzB;;AACA,WAAK/B,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,QAAAA,IAAI,EAAE,KAAKxC,WAAL,CAAiB0H,oBADL;AAElBpE,QAAAA,OAAO,kCACFiE,gBADE;AAELS,UAAAA,MAAM,EAAE1E,OAAO,CAACmK,YAFX;AAGLnJ,UAAAA,uBAAuB,EAAEhB,OAAO,CAACgB;AAH5B;AAFW,OAApB;AAQD;;;6CAEwBD,Q,EAAkBqJ,Q,EAA4B;AACrE,UAAI,CAACA,QAAL,EAAe;AACb,eAAO,IAAP;AACD;;AACD,UAAIrJ,QAAQ,IAAIsJ,8BAAmBC,IAAnB,CAAwBvJ,QAAxB,CAAhB,EAAmD;AACjD,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD;;;gDAkG2B;AAC1B,UAAI,CAAC,KAAKnG,yBAAV,EAAqC;AACnC,YAAM2P,YAAY,GAAG,KAAKpN,kBAAL,GACjB,KAAKqN,0BADY,GAEjB,KAAKC,kBAFT;AAGA,6DACK,KAAKxP,qBADV,GAEKsP,YAFL;AAGE5B,UAAAA,WAAW,EAAEM,2BAAYY;AAH3B;AAKD;;AACD,aAAO,KAAKa,gBAAL,iCAEA,KAAKzP,qBAFL,GAGA,KAAKC,qBAHL,GAKL;AACEG,QAAAA,YAAY,EAAE,KAAKF,kBADrB;AAEEiH,QAAAA,uBAAuB,EAAE,KAAKhH;AAFhC,OALK,EASL,KATK,CAAP;AAWD;;;+CAsC0B;AACzB,UAAMuP,WAAW,GAAG,8BAAiB;AACnClP,QAAAA,aAAa,EAAE,KAAKqB,cADe;AAEnCP,QAAAA,sBAAsB,EAAE,KAAKgB,uBAFM;AAGnCyC,QAAAA,OAAO,EAAE,KAAKA,OAHqB;AAInCsB,QAAAA,UAAU,EAAE,KAAKA;AAJkB,OAAjB,CAApB;AAMA,UAAMiI,SAAS,GAAG,6CAAlB;AACA,UAAM/H,MAAM,GAAG,uBAAU;AACvBjF,QAAAA,sBAAsB,EAAE,KAAKgB,uBADN;AAEvByC,QAAAA,OAAO,EAAE,KAAKA,OAFS;AAGvBvE,QAAAA,aAAa,EAAE,KAAKqB;AAHG,OAAV,CAAf;AAKA,UAAM8N,OAAO,GAAG,8CACdD,WADc,EAEd,KAAKhQ,aAFS,EAGd4O,SAHc,EAId/H,MAJc,CAAhB;;AAMA,UAAI,CAAC,KAAK5G,yBAAV,EAAqC;AACnC,eAAOgQ,OAAP;AACD;;AACD,2DACKA,OADL,GAEKC,gCAFL;AAGElI,QAAAA,YAAY,EAAE;AAHhB;AAKD;;;wBAvLmB;AAClB,aAAO,KAAK7F,cAAL,CAAoBgO,IAA3B;AACD;;;wBAGmB;AAAA;;AAClB,aAAO,uBAAKpQ,OAAL,gEAAcC,aAAd,KAA+B6L,oBAAtC;AACD;;;wBAEa;AACZ,aAAO,KAAKjL,KAAL,CAAWyE,OAAlB;AACD;;;wBAEkB;AACjB,aAAO,KAAKzE,KAAL,CAAWwP,gBAAX,KAAgCC,2BAAeC,UAAtD;AACD;;;wBAEgB;AACf,aAAO,KAAKjL,OAAL,IAAgB,KAAKA,OAAL,CAAaL,EAA7B,IAAmC,KAAK2H,WAAL,CAAiB,KAAKtH,OAAL,CAAaL,EAA9B,CAA1C;AACD;;;wBAEY;AACX,aAAO,KAAKpE,KAAL,CAAW2P,MAAlB;AACD;;;wBAEiB;AAChB,aAAO,KAAK3P,KAAL,CAAWqG,WAAlB;AACD;;;wBAMwB;AACvB,UAAI,CAAC,KAAKhH,yBAAV,EAAqC;AACnC,eAAO,EAAP;AACD;;AACD,aAAO,iBAAKuQ,0BAAL,EAAsB,KAAKtQ,oBAA3B,CAAP;AACD;;;wBAMmC;AAClC,UAAI,CAAC,KAAKC,sBAAV,EAAkC;AAChC,eAAO,EAAP;AACD;;AACD,aAAO,8CAASqQ,0BAAT,IAA0B,UAA1B,IAAuC,KAAKpQ,eAA5C,CAAP;AACD;;;wBAQ2B;AAC1B,UAAI,CAAC,KAAKH,yBAAV,EAAqC;AACnC,eAAO,EAAP;AACD;;AACD,aAAO;AACLwQ,QAAAA,WAAW,EAAE,iBAAKD,0BAAL,EAAsB,KAAKnQ,sBAA3B;AADR,OAAP;AAGD;;;wBAewB;AACvB,UAAI,CAAC,KAAKJ,yBAAV,EAAqC;AACnC,eAAO,KAAKG,eAAZ;AACD;;AACD,aAAO,KAAK2P,gBAAL,iCAEA,KAAKzP,qBAFL,GAGA,KAAKC,qBAHL,GAKL;AACEG,QAAAA,YAAY,EAAE,KAAKF,kBADrB;AAEEiH,QAAAA,uBAAuB,EAAE,KAAKhH;AAFhC,OALK,EASL,IATK,CAAP;AAWD;;;wBA2F4C;AAC3C,aAAO,KAAKiQ,wBAAL,EAAP;AACD;;;wBAayB;AACxB,aACE,KAAKvQ,sBAAL,IACA,KAAKF,yBADL,IAEA,KAAKC,oBAAL,CAA0ByQ,0BAH5B;AAKD;;;wBAG2B;AAAA,kCACC,KAAKjQ,YADN,CAClB2L,SADkB;AAAA,UAClBA,SADkB,sCACN,EADM;AAE1B,aAAOA,SAAP;AACD;;;wBAG0B;AAAA,kCACQ,KAAK3L,YADb,CACjB4L,eADiB;AAAA,UACjBA,eADiB,sCACC,EADD;AAEzB,aAAOA,eAAP;AACD;;;wBAG6B;AAAA,kCACD,KAAK3L,cADJ,CACpB0L,SADoB;AAAA,UACpBA,SADoB,sCACR,EADQ;AAE5B,aAAOA,SAAP;AACD;;;wBAG4B;AAAA,mCACM,KAAK1L,cADX,CACnB2L,eADmB;AAAA,UACnBA,eADmB,uCACD,EADC;AAE3B,aAAOA,eAAP;AACD;;;wBAEgC;AAC/B,aAAO,KAAKlK,QAAL,CAAcwO,OAAd,CAAsB,KAAKrO,yBAA3B,CAAP;AACD;;;wBAEwB;AACvB,aAAO,KAAKH,QAAL,CAAcwO,OAAd,CAAsB,KAAKtO,sBAA3B,CAAP;AACD;;;wBAEuB;AACtB,aAAO,KAAKE,kBAAZ;AACD;;;wBAE0B;AACzB,aAAO,KAAK5B,KAAL,CAAWuG,oBAAlB;AACD;;;wBAGkB;AACjB,aAAO,KAAKvG,KAAL,CAAWF,YAAX,IAA2B,EAAlC;AACD;;;wBAGoB;AACnB,aAAO,KAAKE,KAAL,CAAWD,cAAX,IAA6B,EAApC;AACD;;;wBAEuC;AACtC,aAAO,KAAKV,yBAAZ;AACD;;;wBAEoC;AACnC,aAAO,KAAKE,sBAAZ;AACD;;;wBAEqB;AACpB,aAAO,KAAKiC,QAAL,CAAcwO,OAAd,CAAsB,KAAKlO,mBAA3B,CAAP;AACD;;;wBAGqC;AACpC,UAAI,KAAK9B,KAAL,CAAW+F,UAAX,CAAsBC,MAAtB,KAAiC,CAArC,EAAwC;AACtC,eAAO,EAAP;AACD;;AACD,cAAQ,KAAK/F,SAAb,4BAA2B,KAAKD,KAAL,CAAW+F,UAAtC;AACD;;;wBAGe;AACd,UAAMkK,MAAyB,GAAG;AAChC7L,QAAAA,EAAE,YAAK,KAAKlE,aAAL,CAAmBkE,EAAxB,CAD8B;AAEhC8L,QAAAA,IAAI,EAAEC,gCAF0B;AAGhCC,QAAAA,WAAW,EAAE;AAHmB,OAAlC;AAKA,aAAOH,MAAP;AACD;;;;EA/sC0BI,qB,kEAsJ1BC,sB,2IAKAC,mB,6IAiEAA,mB,iKAmBAA,mB,4KASAA,mB,2KA4BAA,mB,8KAyHAA,mB,kKA0BAA,mB,8JASAA,mB,yJAmFAA,mB,8JAgBAA,mB,gKAUAA,mB,qJAmCAA,mB,wJASAA,mB,kKAUAA,mB,oKA+BAA,mB,iKAmBAA,mB,+JA6BAA,mB,qhCAuYAC,kB;;;;;;;WAC4B,CAC3B;AAAA,aAAM,MAAI,CAAC9Q,qBAAX;AAAA,KAD2B,EAE3B;AAAA,aAAM,MAAI,CAAC+Q,mBAAX;AAAA,KAF2B,EAG3B;AAAA,aAAM,MAAI,CAAC3Q,YAAX;AAAA,KAH2B,EAI3B;AAAA,aAAM,MAAI,CAAC8F,kBAAX;AAAA,KAJ2B,EAK3B;AAAA,aAAM,MAAI,CAACC,yBAAL,EAAN;AAAA,KAL2B,EAM3B,YAAM;AACJ,UAAMmJ,YAAY,GAAG,MAAI,CAACpN,kBAAL,GACjB,MAAI,CAACqN,0BADY,GAEjB,MAAI,CAACC,kBAFT;AAGA,aAAOF,YAAP;AACD,KAX0B,EAY3B,UACE0B,cADF,EAEE9J,MAFF,EAGE9G,YAHF,EAIE8F,kBAJF,EAKE+K,sBALF,EAME3B,YANF,EAOK;AACH,UAAI,MAAI,CAAC3P,yBAAT,EAAoC;AAClC,YAAI,CAAC,oBAAQS,YAAR,CAAL,EAA4B;AAC1B,iBAAO8G,MAAM,GAAGhB,kBAAH,GAAwB+K,sBAArC;AACD;;AACD,eAAOD,cAAP;AACD;;AACD,UAAMjM,OAAO,iDACRiM,cADQ,GAER1B,YAFQ;AAGX5B,QAAAA,WAAW,EAAEM,2BAAYY;AAHd,QAAb;;AAKA,aAAO7J,OAAP;AACD,KAhC0B,C","sourcesContent":["import { computed } from '@ringcentral-integration/core';\nimport { DEFAULT_LOCALE } from '@ringcentral-integration/i18n';\nimport moment from 'moment';\nimport { find, isEmpty, pick } from 'ramda';\nimport Client from 'ringcentral-client';\n\nimport {\n  comparePreferences,\n  generateRandomPassword,\n  getDefaultMeetingSettings,\n  getInitializedStartTime,\n  getMobileDialingNumberTpl,\n  getPhoneDialingNumberTpl,\n  MeetingType,\n  prunePreferencesObject,\n  UTC_TIMEZONE_ID,\n} from '../../helpers/meetingHelper';\nimport background from '../../lib/background';\nimport { Module } from '../../lib/di';\nimport proxify from '../../lib/proxy/proxify';\nimport RcModule from '../../lib/RcModule';\nimport { selector } from '../../lib/selector';\nimport { RcMMeetingModel } from '../MeetingV2';\nimport { getExtensionName, getHostId } from '../MeetingV2/helper';\nimport actionTypes, { MeetingActionTypes } from './actionTypes';\nimport {\n  ASSISTED_USERS_MYSELF,\n  COMMON_SETTINGS,\n  DEFAULT_LOCK_SETTINGS,\n  PMIRequirePassword,\n  RCM_PASSWORD_REGEX,\n} from './constants';\nimport getMeetingReducer, {\n  getDefaultMeetingSettingReducer,\n  getMeetingStorageReducer,\n  getPersonalMeetingReducer,\n} from './getMeetingReducer';\nimport {\n  MeetingDelegators,\n  MeetingDelegatorsResponse,\n  MeetingInfoResponse,\n  MeetingInitialExtraData,\n  MeetingScheduleResource,\n  RcmInvitationInfo,\n  ScheduleMeetingResponse,\n} from './interface';\nimport { MeetingErrors } from './meetingErrors';\nimport meetingStatus from './meetingStatus';\nimport scheduleStatus from './scheduleStatus';\n\n// eslint-disable-next-line\n@Module({\n  deps: [\n    'Brand',\n    'Alert',\n    'Client',\n    'ExtensionInfo',\n    'Storage',\n    'MeetingProvider',\n    'Locale',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'MeetingOptions', optional: true },\n  ],\n})\nexport class Meeting extends RcModule<Record<string, any>, MeetingActionTypes> {\n  // TODO: add state interface\n  private _brand: any;\n  public _alert: any;\n  public _client: Client;\n  private _extensionInfo: any;\n  private _storage: any;\n  private _availabilityMonitor: any;\n  private _lastMeetingSettingKey: any;\n  private _defaultMeetingSettingKey: any;\n  private _showSaveAsDefault: boolean;\n  private _enableInvitationApi: boolean;\n  private _personalMeetingKey: string;\n  private _enablePersonalMeeting: boolean;\n  private _enableReloadAfterSchedule: boolean;\n  private _enableServiceWebSettings: boolean;\n  private _enableScheduleOnBehalf: boolean;\n  private _fetchPersonMeetingTimeout: NodeJS.Timeout;\n  private _meetingProvider: any;\n  private _fetchDelegatorsTimeout: NodeJS.Timeout;\n  private _enableCustomTimezone: boolean;\n  private _locale: any;\n  private _createMeetingPromise: Promise<ScheduleMeetingResponse>;\n\n  constructor({\n    brand,\n    alert,\n    client,\n    extensionInfo,\n    storage,\n    availabilityMonitor,\n    reducers,\n    meetingProvider,\n    locale,\n    showSaveAsDefault = false,\n    enableInvitationApi = false,\n    enablePersonalMeeting = false,\n    enableReloadAfterSchedule = true,\n    enableServiceWebSettings = false,\n    enableScheduleOnBehalf = false,\n    enableCustomTimezone = false,\n    ...options\n  }) {\n    super({\n      ...options,\n      actionTypes: options.actionTypes || actionTypes,\n    });\n    this._brand = brand;\n    this._locale = locale;\n    this._alert = alert;\n    this._client = client;\n    this._storage = storage;\n    this._extensionInfo = extensionInfo;\n    this._meetingProvider = meetingProvider;\n    this._showSaveAsDefault = showSaveAsDefault;\n    this._enableInvitationApi = enableInvitationApi;\n    this._enableCustomTimezone = enableCustomTimezone;\n    this._enableReloadAfterSchedule = enableReloadAfterSchedule;\n    this._enablePersonalMeeting = enablePersonalMeeting;\n    this._enableServiceWebSettings = enableServiceWebSettings;\n    this._enableScheduleOnBehalf = enableScheduleOnBehalf;\n    this._availabilityMonitor = availabilityMonitor;\n    this._lastMeetingSettingKey = 'lastMeetingSetting';\n    this._defaultMeetingSettingKey = 'defaultMeetingSetting';\n    this._personalMeetingKey = 'personalMeeting';\n    this._reducer = getMeetingReducer(this.actionTypes, reducers);\n    this._storage.registerReducer({\n      key: this._lastMeetingSettingKey,\n      reducer: getMeetingStorageReducer(this.actionTypes),\n    });\n    if (this._showSaveAsDefault) {\n      this._storage.registerReducer({\n        key: this._defaultMeetingSettingKey,\n        reducer: getDefaultMeetingSettingReducer(this.actionTypes),\n      });\n    }\n    if (this._enablePersonalMeeting) {\n      this._storage.registerReducer({\n        key: this._personalMeetingKey,\n        reducer: getPersonalMeetingReducer(this.actionTypes),\n      });\n    }\n  }\n\n  initialize() {\n    this.store.subscribe(() => this._onStateChange());\n  }\n\n  async _onStateChange() {\n    if (this._shouldInit()) {\n      await this._init();\n    } else if (this._shouldReset()) {\n      this._reset();\n    }\n  }\n\n  private _shouldInit() {\n    return (\n      this.pending &&\n      this._alert.ready &&\n      this._storage.ready &&\n      this._extensionInfo.ready &&\n      this._meetingProvider.ready &&\n      this._meetingProvider.isRCM &&\n      (!this._availabilityMonitor || this._availabilityMonitor.ready)\n    );\n  }\n\n  private async _initMeetingSettings(extensionId?: string) {\n    await Promise.all([\n      this._initPersonalMeeting(extensionId),\n      this._updateServiceWebSettings(extensionId),\n    ]);\n    await this._initMeeting(extensionId);\n  }\n\n  private async _init() {\n    this.store.dispatch({\n      type: this.actionTypes.init,\n    });\n\n    await Promise.all([this._initMeetingSettings(), this._initScheduleFor()]);\n\n    this.store.dispatch({\n      type: this.actionTypes.initSuccess,\n    });\n  }\n\n  private _shouldReset() {\n    return (\n      this.ready &&\n      (!this._alert.ready ||\n        !this._storage.ready ||\n        !this._extensionInfo.ready ||\n        !this._meetingProvider.ready ||\n        !this._meetingProvider.isRCM ||\n        (this._availabilityMonitor && !this._availabilityMonitor.ready))\n    );\n  }\n\n  private _reset() {\n    this.store.dispatch({\n      type: this.actionTypes.resetSuccess,\n    });\n  }\n\n  /**\n   * Init basic meeting information\n   * also load meeting setting from previous one.\n   */\n  @background\n  init() {\n    this._initMeeting();\n  }\n\n  @proxify\n  reload() {\n    this._initMeeting();\n  }\n\n  private _initMeeting(extensionId?: string) {\n    this.update({\n      ...this.defaultMeetingSetting,\n      host: {\n        id: extensionId || this.loginUser.id,\n      },\n    });\n    this._updatePreferences();\n  }\n\n  async _initPersonalMeeting(extensionId?: string) {\n    if (!this._enablePersonalMeeting) {\n      return;\n    }\n    if (this._fetchPersonMeetingTimeout) {\n      clearTimeout(this._fetchPersonMeetingTimeout);\n    }\n    try {\n      const meetingInfoResponse = await this.fetchPersonalMeeting(extensionId);\n      const meeting = this.formatPersonalMeeting(meetingInfoResponse);\n      this.store.dispatch({\n        type: this.actionTypes.updatePersonalMeeting,\n        meeting,\n      });\n    } catch (e) {\n      console.error('fetch personal meeting error:', e);\n      this.store.dispatch({\n        type: this.actionTypes.resetPersonalMeeting,\n      });\n      console.warn('retry after 10s');\n      this._fetchPersonMeetingTimeout = setTimeout(() => {\n        this._initPersonalMeeting(extensionId);\n      }, 10000);\n    }\n  }\n\n  async _initScheduleFor() {\n    if (!this._enableScheduleOnBehalf) {\n      return;\n    }\n\n    if (this._fetchDelegatorsTimeout) {\n      clearTimeout(this._fetchDelegatorsTimeout);\n    }\n\n    try {\n      await this.setDelegators();\n    } catch (e) {\n      console.error('fetch delegators error:', e);\n      console.warn('retry after 10s');\n      this._fetchDelegatorsTimeout = setTimeout(() => {\n        this.setDelegators();\n      }, 10000);\n    }\n  }\n\n  combineWithSettings(_meeting: RcMMeetingModel) {\n    return this._combineWithSWSettings(_meeting);\n  }\n\n  @proxify\n  update(_meeting: RcMMeetingModel) {\n    let meeting = _meeting;\n    if (this._enableServiceWebSettings) {\n      meeting = this.combineWithSettings(_meeting);\n    }\n    this.store.dispatch({\n      type: this.actionTypes.updateMeeting,\n      meeting: {\n        ...meeting,\n        isMeetingPasswordValid: this.validatePasswordSettings(\n          _meeting.password,\n          _meeting._requireMeetingPassword,\n        ),\n      },\n    });\n    this._comparePreferences();\n  }\n\n  @proxify\n  async switchUsePersonalMeetingId(usePersonalMeetingId: boolean) {\n    this.update(\n      usePersonalMeetingId\n        ? this.pmiDefaultSettings\n        : this.getGeneralDefaultSettings(),\n    );\n  }\n\n  @proxify\n  async updateScheduleFor(userExtensionId: string | number) {\n    if (!userExtensionId || !this.delegators || this.delegators.length === 0) {\n      return;\n    }\n    const hostId = `${userExtensionId}`;\n    const user = find((item) => item.id === hostId, this.delegators);\n\n    if (user) {\n      await this._initMeetingSettings(hostId);\n    }\n  }\n\n  private _updatePreferences() {\n    this.store.dispatch({\n      type: this.actionTypes.updateMeetingPreferences,\n      preferences: prunePreferencesObject(this.meeting),\n    });\n  }\n\n  private _comparePreferences() {\n    const { preferences, meeting } = this;\n    this.store.dispatch({\n      type: this.actionTypes.saveMeetingPreferencesState,\n      isPreferencesChanged: comparePreferences(preferences, meeting),\n    });\n  }\n\n  @proxify\n  private async _updateServiceWebSettings(extensionId?: string) {\n    if (!this._enableServiceWebSettings) {\n      return;\n    }\n\n    const [userSettings, lockedSettings] = await Promise.all([\n      this.getUserSettings(extensionId),\n      this.getLockedSettings(),\n    ]);\n    this.store.dispatch({\n      type: this.actionTypes.updateUserSettings,\n      userSettings,\n    });\n    this.store.dispatch({\n      type: this.actionTypes.updateLockedSettings,\n      lockedSettings,\n    });\n  }\n\n  _initDefaultData(\n    meeting: RcMMeetingModel,\n    { userSettings, personalMeetingSettings }: MeetingInitialExtraData,\n    usePmi: boolean,\n  ): RcMMeetingModel {\n    if (!this._enableServiceWebSettings) {\n      return meeting;\n    }\n    const {\n      requirePasswordForSchedulingNewMeetings = false,\n      requirePasswordForPmiMeetings,\n    } = this.scheduleUserSettings;\n    const {\n      requirePasswordForSchedulingNewMeetings: lockedRequirePasswordForSchedulingNewMeetings,\n      requirePasswordForPmiMeetings: lockedRequirePasswordForPmiMeetings,\n    } = this.scheduleLockedSettings;\n    const processedMeeting = {\n      ...meeting,\n      ...(usePmi ? personalMeetingSettings : userSettings),\n      usePersonalMeetingId: usePmi,\n    };\n\n    // For PMI meetings\n    if (usePmi) {\n      const { allowJoinBeforeHost, password = '' } = processedMeeting;\n\n      if (password !== '') {\n        processedMeeting._pmiPassword = password;\n      }\n\n      let pmiRequiresPwd;\n      switch (requirePasswordForPmiMeetings) {\n        case PMIRequirePassword.NONE:\n          pmiRequiresPwd = password !== '';\n          break;\n        case PMIRequirePassword.ALL:\n          pmiRequiresPwd = true;\n          break;\n        case PMIRequirePassword.JBH_ONLY:\n          pmiRequiresPwd = allowJoinBeforeHost || password !== '';\n          break;\n        default:\n          pmiRequiresPwd = processedMeeting._requireMeetingPassword;\n      }\n\n      let pmiRequiresPwdLocked = processedMeeting._lockRequireMeetingPassword;\n      if (requirePasswordForPmiMeetings === PMIRequirePassword.JBH_ONLY) {\n        pmiRequiresPwdLocked =\n          lockedRequirePasswordForPmiMeetings && allowJoinBeforeHost;\n      } else if (\n        requirePasswordForPmiMeetings !== PMIRequirePassword.JBH_ONLY\n      ) {\n        pmiRequiresPwdLocked = lockedRequirePasswordForPmiMeetings;\n      }\n\n      processedMeeting._requireMeetingPassword = pmiRequiresPwd;\n      processedMeeting._lockRequireMeetingPassword = pmiRequiresPwdLocked;\n    } else {\n      // For non-PMI meetings\n      if (requirePasswordForSchedulingNewMeetings) {\n        processedMeeting._requireMeetingPassword = true;\n      }\n      if (lockedRequirePasswordForSchedulingNewMeetings) {\n        processedMeeting._lockRequireMeetingPassword = true;\n      }\n    }\n    return {\n      ...processedMeeting,\n      password:\n        processedMeeting._requireMeetingPassword && !processedMeeting.password\n          ? generateRandomPassword()\n          : processedMeeting.password,\n    };\n  }\n\n  _combineWithSWSettings(meeting: RcMMeetingModel): RcMMeetingModel {\n    if (!meeting.usePersonalMeetingId) {\n      return meeting;\n    }\n\n    const processedMeeting = { ...meeting };\n    const { allowJoinBeforeHost } = processedMeeting;\n    const { requirePasswordForPmiMeetings } = this.scheduleUserSettings;\n    const {\n      requirePasswordForPmiMeetings: lockedRequirePasswordForPmiMeetings,\n    } = this.scheduleLockedSettings;\n\n    if (\n      lockedRequirePasswordForPmiMeetings &&\n      requirePasswordForPmiMeetings === PMIRequirePassword.JBH_ONLY\n    ) {\n      if (allowJoinBeforeHost && !processedMeeting._requireMeetingPassword) {\n        processedMeeting._requireMeetingPassword = true;\n        processedMeeting.password =\n          processedMeeting._pmiPassword || generateRandomPassword();\n      }\n      processedMeeting._lockRequireMeetingPassword = allowJoinBeforeHost;\n    }\n    return processedMeeting;\n  }\n\n  @proxify\n  private async fetchPersonalMeeting(\n    extensionId?: string,\n  ): Promise<MeetingInfoResponse> {\n    const serviceInfo = await this.getMeetingServiceInfo(extensionId);\n    const personalMeetingId = serviceInfo.externalUserInfo.personalMeetingId;\n    const meetingInfoResponse = await this.getMeeting(personalMeetingId);\n    return meetingInfoResponse;\n  }\n\n  private formatPersonalMeeting(\n    meetingInfo: MeetingInfoResponse,\n    shortId?: string,\n  ): RcMMeetingModel {\n    const settings = {\n      ...this.initialMeetingSetting,\n      ...meetingInfo,\n      shortId: shortId || meetingInfo.id,\n      usePersonalMeetingId: true,\n    };\n    return {\n      ...settings,\n      _requireMeetingPassword: !!settings.password,\n    };\n  }\n\n  @proxify\n  private async setDelegators() {\n    const { records } = await this.getDelegators();\n    this.store.dispatch({\n      type: this.actionTypes.updateDelegatorList,\n      delegators: records,\n    });\n  }\n\n  @proxify\n  async scheduleDirectly(\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    try {\n      meeting = meeting || this.meeting;\n      this.store.dispatch({\n        type: this.actionTypes.initScheduling,\n      });\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n\n      if (this._showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      const [resp, serviceInfo] = await Promise.all([\n        this.postMeeting(formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const invitationInfo = await this.getMeetingInvitation(\n        resp.id,\n        this.currentLocale,\n      );\n\n      this.store.dispatch({\n        type: this.actionTypes.scheduled,\n        meeting: {\n          ...formattedMeeting,\n          id: resp.id,\n          _saved: meeting._saved,\n        },\n      });\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this._enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this._enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.store.dispatch({\n          type: this.actionTypes.updatePersonalMeeting,\n          meeting: this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        });\n        if (this._enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been scheduled\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._alert.success({\n            message: meetingStatus.scheduledSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      this.store.dispatch({\n        type: this.actionTypes.resetScheduling,\n      });\n      await this._errorHandle(errors);\n      return null;\n    }\n  }\n\n  @proxify\n  async schedule(\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    if (this.isScheduling) return this._createMeetingPromise;\n\n    this._createMeetingPromise = this.scheduleDirectly(meeting, {\n      isAlertSuccess,\n    });\n\n    const result = await this._createMeetingPromise;\n    this._createMeetingPromise = null;\n    return result;\n  }\n\n  @proxify\n  async getMeetingServiceInfo(extensionId?: string) {\n    return this._client\n      .account()\n      .extension(extensionId)\n      .meeting()\n      .serviceInfo()\n      .get();\n  }\n\n  @proxify\n  async getMeeting(meetingId: string, { isAlertError = true } = {}) {\n    try {\n      const settings = await this._client\n        .account()\n        .extension()\n        .meeting(meetingId)\n        .get();\n      return {\n        ...settings,\n        _requireMeetingPassword: !!settings.password,\n      };\n    } catch (e) {\n      const { errorCode, message } = await e.response.clone().json();\n      console.log(\n        `failed to get meeting info: ${meetingId}, ${errorCode}, ${message}`,\n      );\n      const isMeetingDeleted =\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1;\n      if (isAlertError && isMeetingDeleted) {\n        setTimeout(() => {\n          this._alert.danger({\n            message: meetingStatus.meetingIsDeleted,\n          });\n        }, 50);\n      }\n      throw e;\n    }\n  }\n\n  async postMeeting(formattedMeeting: RcMMeetingModel) {\n    return this._client.account().extension().meeting().post(formattedMeeting);\n  }\n\n  @proxify\n  async putMeeting(meetingId: string, formattedMeeting: RcMMeetingModel) {\n    return this._client\n      .account()\n      .extension()\n      .meeting(meetingId)\n      .put(formattedMeeting);\n  }\n\n  @proxify\n  async getDelegators(): Promise<MeetingDelegatorsResponse> {\n    const res = await this._client.service\n      .platform()\n      .get(\n        '/restapi/v1.0/account/~/extension/~/meetings-configuration/assisted',\n      );\n    return res.json();\n  }\n\n  @proxify\n  async getMeetingInvitation(\n    meetingId: string,\n    locale = DEFAULT_LOCALE,\n  ): Promise<RcmInvitationInfo> {\n    if (!this._enableInvitationApi) {\n      return null;\n    }\n    // only rc brand is supported for now\n    if (this._brand.code !== 'rc') {\n      return null;\n    }\n    try {\n      const apiResponse = await this._client.service\n        .platform()\n        .get(\n          `/restapi/v1.0/account/~/extension/~/meeting/${meetingId}/invitation`,\n          {\n            language: locale,\n          },\n        );\n      const { invitation } = await apiResponse.json();\n      return {\n        invitation,\n      };\n    } catch (ex) {\n      console.warn(ex);\n      return null;\n    }\n  }\n\n  @proxify\n  async getUserSettings(extensionId = '~') {\n    try {\n      const platform = this._client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: `/restapi/v1.0/account/~/extension/${extensionId}/meeting/user-settings`,\n      });\n      const { recording = {}, scheduleMeeting = {} } = await apiResponse.json();\n      return {\n        recording,\n        scheduleMeeting,\n      };\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  }\n\n  @proxify\n  async getLockedSettings() {\n    try {\n      const platform = this._client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: '/restapi/v1.0/account/~/meeting/locked-settings',\n      });\n      const { recording = {}, scheduleMeeting = {} } = await apiResponse.json();\n      const {\n        startParticipantsVideo,\n        startParticipantVideo,\n        ...restScheduleOptions\n      } = scheduleMeeting;\n      const processedScheduleMeeting = {\n        ...restScheduleOptions,\n        startParticipantsVideo:\n          startParticipantsVideo || startParticipantVideo || false,\n      };\n      return {\n        recording,\n        scheduleMeeting: processedScheduleMeeting,\n      };\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  }\n\n  @proxify\n  async updateMeeting(\n    meetingId: string,\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = false }: { isAlertSuccess?: boolean } = {},\n  ) {\n    if (this._isUpdating(meetingId)) {\n      return (this.updateMeeting as any)._promise;\n    }\n    meeting = meeting || this.meeting;\n    try {\n      this.store.dispatch({\n        type: this.actionTypes.initUpdating,\n        meetingId,\n      });\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n      if (this._showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      (this.updateMeeting as any)._promise = Promise.all([\n        this.putMeeting(meetingId, formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const [resp, serviceInfo] = await (this.updateMeeting as any)._promise;\n      const invitationInfo = await this.getMeetingInvitation(\n        meetingId,\n        this.currentLocale,\n      );\n\n      this.store.dispatch({\n        type: this.actionTypes.updated,\n        meeting: {\n          ...formattedMeeting,\n          _saved: meeting._saved,\n        },\n        meetingId,\n      });\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this._enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this._enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.store.dispatch({\n          type: this.actionTypes.updatePersonalMeeting,\n          meeting: this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        });\n        if (this._enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been updated\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._alert.success({\n            message: meetingStatus.updatedSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      this.store.dispatch({\n        type: this.actionTypes.resetUpdating,\n        meetingId,\n      });\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      delete (this.updateMeeting as any)._promise;\n    }\n  }\n\n  async _createDialingNumberTpl(\n    serviceInfo: any,\n    resp: any,\n    invitationInfo: RcmInvitationInfo,\n  ) {\n    serviceInfo.mobileDialingNumberTpl = getMobileDialingNumberTpl(\n      serviceInfo.dialInNumbers,\n      resp.id,\n    );\n    serviceInfo.phoneDialingNumberTpl = getPhoneDialingNumberTpl(\n      serviceInfo.dialInNumbers,\n    );\n    const result = {\n      meeting: resp,\n      serviceInfo,\n      extensionInfo: this.extensionInfo,\n      invitationInfo,\n    };\n    return result;\n  }\n\n  async _errorHandle(errors: any) {\n    if (errors instanceof MeetingErrors) {\n      for (const error of errors.all) {\n        this._alert.warning(error);\n      }\n    } else if (errors && errors.response) {\n      const {\n        message,\n        errorCode,\n        permissionName,\n      } = await errors.response.clone().json();\n      if (errorCode === 'InsufficientPermissions' && permissionName) {\n        this._alert.danger({\n          message: meetingStatus.insufficientPermissions,\n          payload: {\n            permissionName,\n          },\n        });\n      } else if (\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1\n      ) {\n        this._alert.danger({\n          message: meetingStatus.meetingIsDeleted,\n        });\n      } else if (\n        !this._availabilityMonitor ||\n        !(await this._availabilityMonitor.checkIfHAError(errors))\n      ) {\n        this._alert.danger({ message: meetingStatus.internalError });\n      }\n    } else {\n      console.log('errors:', errors);\n      this._alert.danger({ message: meetingStatus.internalError });\n    }\n  }\n\n  /**\n   * @param {number} meetingId\n   */\n  _isUpdating(meetingId: string) {\n    return (\n      this.state.updatingStatus &&\n      find((obj: any) => obj.meetingId === meetingId, this.state.updatingStatus)\n    );\n  }\n\n  /**\n   * Format meeting information.\n   * @param {Object} meeting\n   */\n  _format(meeting: RcMMeetingModel): RcMMeetingModel {\n    const {\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password,\n      schedule,\n      recurrence,\n      usePersonalMeetingId,\n      _requireMeetingPassword,\n      host,\n    } = meeting;\n    const formatted = {\n      host,\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password: _requireMeetingPassword ? password : '',\n      recurrence,\n      usePersonalMeetingId,\n    } as RcMMeetingModel;\n    // Recurring meetings do not have schedule info\n    if (meetingType !== MeetingType.RECURRING) {\n      const _schedule: MeetingScheduleResource = {\n        durationInMinutes: schedule.durationInMinutes,\n        timeZone: {\n          id: this._enableCustomTimezone\n            ? schedule.timeZone.id\n            : UTC_TIMEZONE_ID,\n        },\n      };\n      if (schedule.startTime) {\n        // Format selected startTime to utc standard time\n        // Timezone information is not included here\n        _schedule.startTime = this._enableCustomTimezone\n          ? schedule.startTime\n          : moment.utc(schedule.startTime).format();\n      }\n      formatted.schedule = _schedule;\n\n      if (recurrence && recurrence.until) {\n        formatted.recurrence.until = moment.utc(recurrence.until).format();\n      }\n    }\n\n    // For PMI\n    formatted.meetingType =\n      formatted.meetingType === MeetingType.PMI\n        ? MeetingType.SCHEDULED\n        : formatted.meetingType;\n    return formatted;\n  }\n\n  /**\n   * Validate meeting information format.\n   * @param {Object} meeting\n   * @throws\n   */\n  _validate(meeting) {\n    if (!meeting) {\n      throw new MeetingErrors(meetingStatus.invalidMeetingInfo);\n    }\n    const { topic, password, schedule, _requireMeetingPassword } = meeting;\n    const errors = new MeetingErrors();\n    if (topic.length <= 0) {\n      errors.push(meetingStatus.emptyTopic);\n    }\n    if (_requireMeetingPassword && (!password || password.length <= 0)) {\n      errors.push(meetingStatus.noPassword);\n    }\n    if (schedule) {\n      if (schedule.durationInMinutes < 0) {\n        errors.push(meetingStatus.durationIncorrect);\n      }\n    }\n    if (errors.length > 0) {\n      throw errors;\n    }\n  }\n\n  saveAsDefaultSetting(meeting) {\n    const formattedMeeting = this._format(meeting);\n    this.store.dispatch({\n      type: this.actionTypes.saveAsDefaultSetting,\n      meeting: {\n        ...formattedMeeting,\n        _saved: meeting.notShowAgain,\n        _requireMeetingPassword: meeting._requireMeetingPassword,\n      },\n    });\n  }\n\n  validatePasswordSettings(password: string, isSecret: boolean): boolean {\n    if (!isSecret) {\n      return true;\n    }\n    if (password && RCM_PASSWORD_REGEX.test(password)) {\n      return true;\n    }\n    return false;\n  }\n\n  get extensionInfo() {\n    return this._extensionInfo.info;\n  }\n\n  @computed(({ _locale }: Meeting) => [_locale.currentLocale])\n  get currentLocale() {\n    return this._locale?.currentLocale || DEFAULT_LOCALE;\n  }\n\n  get meeting() {\n    return this.state.meeting;\n  }\n\n  get isScheduling() {\n    return this.state.schedulingStatus === scheduleStatus.scheduling;\n  }\n\n  get isUpdating() {\n    return this.meeting && this.meeting.id && this._isUpdating(this.meeting.id);\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get preferences() {\n    return this.state.preferences;\n  }\n\n  @computed(({ _enableServiceWebSettings, scheduleUserSettings }: Meeting) => [\n    _enableServiceWebSettings,\n    scheduleUserSettings,\n  ])\n  get commonUserSettings() {\n    if (!this._enableServiceWebSettings) {\n      return {};\n    }\n    return pick(COMMON_SETTINGS, this.scheduleUserSettings);\n  }\n\n  @computed(({ _enablePersonalMeeting, personalMeeting }: Meeting) => [\n    _enablePersonalMeeting,\n    personalMeeting,\n  ])\n  get commonPersonalMeetingSettings() {\n    if (!this._enablePersonalMeeting) {\n      return {};\n    }\n    return pick([...COMMON_SETTINGS, 'password'], this.personalMeeting);\n  }\n\n  @computed(\n    ({ _enableServiceWebSettings, scheduleLockedSettings }: Meeting) => [\n      _enableServiceWebSettings,\n      scheduleLockedSettings,\n    ],\n  )\n  get defaultLockedSettings() {\n    if (!this._enableServiceWebSettings) {\n      return {};\n    }\n    return {\n      settingLock: pick(COMMON_SETTINGS, this.scheduleLockedSettings),\n    };\n  }\n\n  @computed<Meeting>(\n    ({\n      initialMeetingSetting,\n      defaultLockedSettings,\n      commonUserSettings,\n      commonPersonalMeetingSettings,\n    }) => [\n      initialMeetingSetting,\n      defaultLockedSettings,\n      commonUserSettings,\n      commonPersonalMeetingSettings,\n    ],\n  )\n  get pmiDefaultSettings() {\n    if (!this._enableServiceWebSettings) {\n      return this.personalMeeting;\n    }\n    return this._initDefaultData(\n      {\n        ...this.initialMeetingSetting,\n        ...this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      true,\n    );\n  }\n\n  getGeneralDefaultSettings() {\n    if (!this._enableServiceWebSettings) {\n      const savedSetting = this._showSaveAsDefault\n        ? this.savedDefaultMeetingSetting\n        : this.lastMeetingSetting;\n      return {\n        ...this.initialMeetingSetting,\n        ...savedSetting,\n        meetingType: MeetingType.SCHEDULED,\n      };\n    }\n    return this._initDefaultData(\n      {\n        ...this.initialMeetingSetting,\n        ...this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      false,\n    );\n  }\n\n  @selector\n  defaultMeetingSetting: any = [\n    () => this.initialMeetingSetting,\n    () => this.usePmiDefaultFromSW,\n    () => this.userSettings,\n    () => this.pmiDefaultSettings,\n    () => this.getGeneralDefaultSettings(),\n    () => {\n      const savedSetting = this._showSaveAsDefault\n        ? this.savedDefaultMeetingSetting\n        : this.lastMeetingSetting;\n      return savedSetting;\n    },\n    (\n      initialSetting: RcMMeetingModel,\n      usePmi: boolean,\n      userSettings: Partial<RcMMeetingModel>,\n      pmiDefaultSettings: Partial<RcMMeetingModel>,\n      generalDefaultSettings: Partial<RcMMeetingModel>,\n      savedSetting: Partial<RcMMeetingModel>,\n    ) => {\n      if (this._enableServiceWebSettings) {\n        if (!isEmpty(userSettings)) {\n          return usePmi ? pmiDefaultSettings : generalDefaultSettings;\n        }\n        return initialSetting;\n      }\n      const meeting = {\n        ...initialSetting,\n        ...savedSetting,\n        meetingType: MeetingType.SCHEDULED,\n      };\n      return meeting;\n    },\n  ];\n\n  getInitialMeetingSetting() {\n    const meetingName = getExtensionName({\n      extensionInfo: this._extensionInfo,\n      enableScheduleOnBehalf: this._enableScheduleOnBehalf,\n      meeting: this.meeting,\n      delegators: this.delegators,\n    });\n    const startTime = getInitializedStartTime();\n    const hostId = getHostId({\n      enableScheduleOnBehalf: this._enableScheduleOnBehalf,\n      meeting: this.meeting,\n      extensionInfo: this._extensionInfo,\n    });\n    const setting = getDefaultMeetingSettings(\n      meetingName,\n      this.currentLocale,\n      startTime,\n      hostId,\n    );\n    if (!this._enableServiceWebSettings) {\n      return setting;\n    }\n    return {\n      ...setting,\n      ...DEFAULT_LOCK_SETTINGS,\n      _pmiPassword: '',\n    };\n  }\n\n  get initialMeetingSetting(): RcMMeetingModel {\n    return this.getInitialMeetingSetting();\n  }\n\n  @computed(\n    ({\n      _enablePersonalMeeting,\n      _enableServiceWebSettings,\n      scheduleUserSettings,\n    }: Meeting) => [\n      _enablePersonalMeeting,\n      _enableServiceWebSettings,\n      scheduleUserSettings,\n    ],\n  )\n  get usePmiDefaultFromSW() {\n    return (\n      this._enablePersonalMeeting &&\n      this._enableServiceWebSettings &&\n      this.scheduleUserSettings.usePmiForScheduledMeetings\n    );\n  }\n\n  @computed(({ userSettings }: Meeting) => [userSettings])\n  get recordingUserSettings() {\n    const { recording = {} } = this.userSettings;\n    return recording;\n  }\n\n  @computed(({ userSettings }: Meeting) => [userSettings])\n  get scheduleUserSettings() {\n    const { scheduleMeeting = {} } = this.userSettings;\n    return scheduleMeeting;\n  }\n\n  @computed(({ lockedSettings }: Meeting) => [lockedSettings])\n  get recordingLockedSettings() {\n    const { recording = {} } = this.lockedSettings;\n    return recording;\n  }\n\n  @computed(({ lockedSettings }: Meeting) => [lockedSettings])\n  get scheduleLockedSettings() {\n    const { scheduleMeeting = {} } = this.lockedSettings;\n    return scheduleMeeting;\n  }\n\n  get savedDefaultMeetingSetting() {\n    return this._storage.getItem(this._defaultMeetingSettingKey);\n  }\n\n  get lastMeetingSetting() {\n    return this._storage.getItem(this._lastMeetingSettingKey);\n  }\n\n  get showSaveAsDefault() {\n    return this._showSaveAsDefault;\n  }\n\n  get isPreferencesChanged() {\n    return this.state.isPreferencesChanged;\n  }\n\n  @computed(({ state }: Meeting) => [state.userSettings])\n  get userSettings() {\n    return this.state.userSettings || {};\n  }\n\n  @computed(({ state }: Meeting) => [state.lockedSettings])\n  get lockedSettings() {\n    return this.state.lockedSettings || {};\n  }\n\n  get enableServiceWebSettings(): boolean {\n    return this._enableServiceWebSettings;\n  }\n\n  get enablePersonalMeeting(): boolean {\n    return this._enablePersonalMeeting;\n  }\n\n  get personalMeeting() {\n    return this._storage.getItem(this._personalMeetingKey);\n  }\n\n  @computed(({ state, loginUser }: Meeting) => [state, loginUser])\n  get delegators(): MeetingDelegators[] {\n    if (this.state.delegators.length === 0) {\n      return [];\n    }\n    return [this.loginUser, ...this.state.delegators];\n  }\n\n  @computed(({ extensionInfo }: Meeting) => [extensionInfo])\n  get loginUser() {\n    const myself: MeetingDelegators = {\n      id: `${this.extensionInfo.id}`,\n      name: ASSISTED_USERS_MYSELF,\n      isLoginUser: true,\n    };\n    return myself;\n  }\n}\n"],"file":"Meeting.js"}