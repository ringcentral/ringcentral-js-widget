{"version":3,"sources":["modules/DataFetcherV2/DataFetcherV2Consumer.ts"],"names":["DataFetcherV2Consumer","_source","_deps","dataFetcherV2","getSourceStatus","sourceStatus","ready","fetchData","getData","RcModuleV2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGsBA,qB;;;;;;;;;;;;;;;UAIVC,O;;;;;;kCAKI;AACZ,aAAO,CAAC,EACN,0FACA,KAAKC,KAAL,CAAWC,aAAX,CAAyBC,eAAzB,CAAyC,KAAKH,OAA9C,MACEI,2BAAaC,KAHT,CAAR;AAKD;;;mCAEc;AACb,aAAO,CAAC,EACN,2FACC,KAAKA,KAAL,IACC,KAAKJ,KAAL,CAAWC,aAAX,CAAyBC,eAAzB,CAAyC,KAAKH,OAA9C,MACEI,2BAAaC,KAJX,CAAR;AAMD;;;;;;;;;qBAGK,KAAKA,K;;;;;iDACA,KAAKJ,KAAL,CAAWC,aAAX,CAAyBI,SAAzB,CAAmC,KAAKN,OAAxC,C;;;;;;;;;;;;;;;;;;wBAvBA;AACT,aAAO,KAAKC,KAAL,CAAWC,aAAX,CAAyBK,OAAzB,CAAiC,KAAKP,OAAtC,CAAP;AACD;;;;EAJOQ,gB","sourcesContent":["import { RcModuleV2 } from '@ringcentral-integration/core';\nimport { DataSource } from './DataSource';\nimport { sourceStatus } from './sourceStatus';\nimport { DataFetcherV2ConsumerBaseDeps } from './DataFetcherV2Consumer.interface';\n\nexport abstract class DataFetcherV2Consumer<\n  D extends DataFetcherV2ConsumerBaseDeps,\n  T\n> extends RcModuleV2<D> {\n  protected _source: DataSource<T>;\n  get data() {\n    return this._deps.dataFetcherV2.getData(this._source);\n  }\n\n  _shouldInit() {\n    return !!(\n      super._shouldInit() &&\n      this._deps.dataFetcherV2.getSourceStatus(this._source) ===\n        sourceStatus.ready\n    );\n  }\n\n  _shouldReset() {\n    return !!(\n      super._shouldReset() ||\n      (this.ready &&\n        this._deps.dataFetcherV2.getSourceStatus(this._source) !==\n          sourceStatus.ready)\n    );\n  }\n\n  async fetchData() {\n    if (this.ready) {\n      return this._deps.dataFetcherV2.fetchData(this._source);\n    }\n  }\n}\n"],"file":"DataFetcherV2Consumer.js"}