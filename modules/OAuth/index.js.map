{"version":3,"sources":["modules/OAuth/index.js"],"names":["OAuth","name","deps","dep","optional","redirectUri","options","oAuthReady","window","oAuthCallback","callbackUri","_handleCallbackUri","store","dispatch","type","actionTypes","setupOAuth","destroyOAuth","oAuthUri","OAuthBase","background","proxify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMqBA,K,WAJpB,gBAAO;AACNC,EAAAA,IAAI,EAAE,OADA;AAENC,EAAAA,IAAI,EAAE,CAAC;AAAEC,IAAAA,GAAG,EAAE,cAAP;AAAuBC,IAAAA,QAAQ,EAAE;AAAjC,GAAD;AAFA,CAAP,C;;;;;AAKC,uBAA6D;AAAA,gCAA/CC,WAA+C;AAAA,QAA/CA,WAA+C,iCAAjC,iBAAiC;AAAA,QAAXC,OAAW;;AAAA;;AAAA;AAEzDD,MAAAA,WAAW,EAAXA;AAFyD,OAGtDC,OAHsD;AAK5D;;;;;;;;;;;AAQC,kBAAI,CAAC,KAAKC,UAAV,EAAsB;AACpBC,gBAAAA,MAAM,CAACC,aAAP,GAAuB,UAACC,WAAD;AAAA,yBACrB,KAAI,CAACC,kBAAL,CAAwBD,WAAxB,CADqB;AAAA,iBAAvB;;AAEA,qBAAKE,KAAL,CAAWC,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKC,WAAL,CAAiBC;AADL,iBAApB;AAGD;;;;;;;;;;;;;;;;AAKD,kBAAI,KAAKT,UAAT,EAAqB;AACnBC,gBAAAA,MAAM,CAACC,aAAP,GAAuB,IAAvB;AACA,qBAAKG,KAAL,CAAWC,QAAX,CAAoB;AAClBC,kBAAAA,IAAI,EAAE,KAAKC,WAAL,CAAiBE;AADL,iBAApB;AAGD;;;;;;;;;;;oCAIa;AACd,UAAI,KAAKV,UAAT,EAAqB;AACnB,mCAAU,KAAKW,QAAf,EAAyB,UAAzB,EAAqC,GAArC,EAA0C,GAA1C;AACD;AACF;;;wBA9BU;AACT,aAAO,OAAP;AACD;;;;EAVgCC,sB,gEAYhCC,sB,uJAWAA,sB,0JAUAC,mB","sourcesContent":["import background from 'ringcentral-integration/lib/background';\nimport { Module } from 'ringcentral-integration/lib/di';\nimport popWindow from 'ringcentral-integration/lib/popWindow';\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\n\nimport OAuthBase from '../../lib/OAuthBase';\n\n@Module({\n  name: 'OAuth',\n  deps: [{ dep: 'OAuthOptions', optional: true }],\n})\nexport default class OAuth extends OAuthBase {\n  constructor({ redirectUri = './redirect.html', ...options }) {\n    super({\n      redirectUri,\n      ...options,\n    });\n  }\n\n  get name() {\n    return 'OAuth';\n  }\n\n  @background\n  async setupOAuth() {\n    if (!this.oAuthReady) {\n      window.oAuthCallback = (callbackUri) =>\n        this._handleCallbackUri(callbackUri);\n      this.store.dispatch({\n        type: this.actionTypes.setupOAuth,\n      });\n    }\n  }\n\n  @background\n  async destroyOAuth() {\n    if (this.oAuthReady) {\n      window.oAuthCallback = null;\n      this.store.dispatch({\n        type: this.actionTypes.destroyOAuth,\n      });\n    }\n  }\n\n  @proxify\n  openOAuthPage() {\n    if (this.oAuthReady) {\n      popWindow(this.oAuthUri, 'rc-oauth', 600, 600);\n    }\n  }\n}\n"],"file":"index.js"}