{"version":3,"sources":["modules/GenericMeetingUI/index.ts"],"names":["GenericMeetingUI","name","deps","genericMeeting","locale","rateLimiter","connectivityMonitor","options","_genericMeeting","_locale","_rateLimiter","_connectivityMonitor","useRcmV2","disabled","showTopic","showWhen","showDuration","openNewWindow","labelPlacement","showRecurringMeeting","scheduleButton","datePickerSize","timePickerSize","recurringMeetingPosition","showRcvAdminLock","invalidPassowrd","ready","meeting","isRCV","isRCM","validatePasswordSettings","meetingPassword","password","isMeetingSecret","_requireMeetingPassword","delegators","currentLocale","isScheduling","connectivity","throttling","configDisabled","showScheduleOnBehalf","length","usePersonalMeetingId","showSaveAsDefault","disableSaveAsDefault","enableServiceWebSettings","enablePersonalMeeting","enableWaitingRoom","personalMeetingId","showSpinner","showSpinnerInConfigPanel","isUpdating","hasSettingsChanged","defaultTopic","props","schedule","switchUsePersonalMeetingId","updateHasSettingsChanged","isChanged","updateScheduleFor","userExtensionId","updateMeetingSettings","value","isSecret","meetingInfo","opener","init","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport { RcVMeetingModel } from 'ringcentral-integration/interfaces/Rcv.model';\nimport { RcMMeetingModel } from 'ringcentral-integration/modules/MeetingV2';\nimport { GenericMeeting } from 'ringcentral-integration/modules/GenericMeetingV2';\n\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'GenericMeetingUI',\n  deps: ['GenericMeeting', 'Locale', 'RateLimiter', 'ConnectivityMonitor'],\n})\nexport default class GenericMeetingUI extends RcUIModule {\n  _genericMeeting: GenericMeeting;\n  _locale: any;\n  _rateLimiter: any;\n  _connectivityMonitor: any;\n\n  constructor({\n    genericMeeting,\n    locale,\n    rateLimiter,\n    connectivityMonitor,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._genericMeeting = genericMeeting;\n    this._locale = locale;\n    this._rateLimiter = rateLimiter;\n    this._connectivityMonitor = connectivityMonitor;\n  }\n\n  getUIProps({\n    useRcmV2,\n    disabled,\n    showTopic,\n    showWhen,\n    showDuration,\n    openNewWindow,\n    labelPlacement,\n    showRecurringMeeting,\n    scheduleButton,\n    datePickerSize,\n    timePickerSize,\n    recurringMeetingPosition,\n    showRcvAdminLock = false,\n  }) {\n    const invalidPassowrd =\n      this._genericMeeting.ready &&\n      this._genericMeeting.meeting &&\n      (this._genericMeeting.isRCV || this._genericMeeting.isRCM) &&\n      !this._genericMeeting.validatePasswordSettings(\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.meetingPassword\n          : this._genericMeeting.meeting.password,\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.isMeetingSecret\n          : this._genericMeeting.meeting._requireMeetingPassword,\n      );\n    const meeting =\n      (this._genericMeeting.ready && this._genericMeeting.meeting) || {};\n    const delegators =\n      (this._genericMeeting.ready && this._genericMeeting.delegators) || [];\n\n    return {\n      meeting,\n      useRcmV2,\n      delegators,\n      labelPlacement,\n      datePickerSize,\n      timePickerSize,\n      recurringMeetingPosition,\n      showRcvAdminLock,\n      currentLocale: this._locale.currentLocale,\n      disabled: !!(\n        disabled ||\n        invalidPassowrd ||\n        (this._genericMeeting.ready && this._genericMeeting.isScheduling) ||\n        (this._connectivityMonitor &&\n          !this._connectivityMonitor.connectivity) ||\n        (this._rateLimiter && this._rateLimiter.throttling)\n      ),\n      configDisabled: false,\n      showTopic,\n      showWhen,\n      showDuration,\n      showScheduleOnBehalf: !!(delegators && delegators.length > 0),\n      showRecurringMeeting:\n        !meeting.usePersonalMeetingId && showRecurringMeeting,\n      openNewWindow,\n      showSaveAsDefault:\n        this._genericMeeting.ready && this._genericMeeting.showSaveAsDefault,\n      // Need to add this back when we back to this ticket\n      // https://jira.ringcentral.com/browse/RCINT-15031\n      // disableSaveAsDefault:\n      //   this._genericMeeting.ready &&\n      //   !this._genericMeeting.isPreferencesChanged,\n      disableSaveAsDefault: false,\n      isRCM: this._genericMeeting.isRCM,\n      isRCV: this._genericMeeting.isRCV,\n      scheduleButton,\n      enableServiceWebSettings:\n        this._genericMeeting.ready &&\n        this._genericMeeting.enableServiceWebSettings,\n      enablePersonalMeeting:\n        this._genericMeeting.ready &&\n        this._genericMeeting.enablePersonalMeeting,\n      enableWaitingRoom:\n        this._genericMeeting.ready && this._genericMeeting.enableWaitingRoom,\n      personalMeetingId:\n        this._genericMeeting.ready && this._genericMeeting.personalMeetingId,\n      showSpinner: !!(\n        !this._locale.ready ||\n        !this._genericMeeting.ready ||\n        (!this._genericMeeting.isRCM && !this._genericMeeting.isRCV) ||\n        !this._genericMeeting.meeting ||\n        (this._connectivityMonitor && !this._connectivityMonitor.ready) ||\n        (this._rateLimiter && !this._rateLimiter.ready)\n      ),\n      showSpinnerInConfigPanel: this._genericMeeting.isUpdating,\n      hasSettingsChanged: this._genericMeeting.hasSettingsChanged,\n      defaultTopic: this._genericMeeting.ready\n        ? this._genericMeeting.defaultTopic\n        : '',\n    };\n  }\n\n  getUIFunctions(props?: any) {\n    const { schedule } = props;\n    return {\n      switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) =>\n        this._genericMeeting.switchUsePersonalMeetingId(usePersonalMeetingId),\n\n      updateHasSettingsChanged: (isChanged: boolean) => {\n        this._genericMeeting.updateHasSettingsChanged(isChanged);\n      },\n      updateScheduleFor: (userExtensionId: string) =>\n        this._genericMeeting.updateScheduleFor(userExtensionId),\n      // TODO: any is reserved for RcM\n      updateMeetingSettings: (value: RcMMeetingModel | RcVMeetingModel) =>\n        this._genericMeeting.updateMeetingSettings(value),\n      validatePasswordSettings: (\n        password: string,\n        isSecret: boolean,\n      ): boolean => {\n        return this._genericMeeting.validatePasswordSettings(\n          password,\n          isSecret,\n        );\n      },\n      schedule: async (\n        meetingInfo: RcMMeetingModel | RcVMeetingModel,\n        opener: Window,\n      ) => {\n        if (schedule) {\n          await schedule(meetingInfo, opener);\n          return;\n        }\n        await this._genericMeeting.schedule(meetingInfo, {}, opener);\n      },\n      init: () => this._genericMeeting.init(),\n    };\n  }\n}\n"],"file":"index.js"}