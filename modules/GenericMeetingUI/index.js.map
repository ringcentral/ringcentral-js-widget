{"version":3,"sources":["modules/GenericMeetingUI/index.ts"],"names":["GenericMeetingUI","name","deps","genericMeeting","locale","rateLimiter","connectivityMonitor","brand","options","_genericMeeting","_locale","_rateLimiter","_connectivityMonitor","_brand","useRcmV2","disabled","showTopic","showWhen","showDuration","openNewWindow","labelPlacement","showRecurringMeeting","scheduleButton","datePickerSize","timePickerSize","invalidPassowrd","ready","meeting","isRCV","isRCM","validatePasswordSettings","meetingPassword","password","isMeetingSecret","_requireMeetingPassword","delegators","currentLocale","isScheduling","connectivity","throttling","showScheduleOnBehalf","length","usePersonalMeetingId","showSaveAsDefault","disableSaveAsDefault","brandName","showAdminLock","enablePersonalMeeting","enableWaitingRoom","personalMeetingId","showSpinner","props","schedule","switchUsePersonalMeetingId","updateScheduleFor","userExtensionId","updateMeetingSettings","value","isSecret","meetingInfo","opener","init","RcUIModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAYqBA,gB,WAVpB,gBAAO;AACNC,EAAAA,IAAI,EAAE,kBADA;AAENC,EAAAA,IAAI,EAAE,CACJ,gBADI,EAEJ,QAFI,EAGJ,aAHI,EAIJ,qBAJI,EAKJ,OALI;AAFA,CAAP,C;;;;;AAiBC,kCAOG;AAAA;;AAAA,QANDC,cAMC,QANDA,cAMC;AAAA,QALDC,MAKC,QALDA,MAKC;AAAA,QAJDC,WAIC,QAJDA,WAIC;AAAA,QAHDC,mBAGC,QAHDA,mBAGC;AAAA,QAFDC,KAEC,QAFDA,KAEC;AAAA,QADEC,OACF;;AAAA;;AACD,gDACKA,OADL;AADC,UAbHC,eAaG;AAAA,UAZHC,OAYG;AAAA,UAXHC,YAWG;AAAA,UAVHC,oBAUG;AAAA,UATHC,MASG;AAID,UAAKJ,eAAL,GAAuBN,cAAvB;AACA,UAAKO,OAAL,GAAeN,MAAf;AACA,UAAKO,YAAL,GAAoBN,WAApB;AACA,UAAKO,oBAAL,GAA4BN,mBAA5B;AACA,UAAKO,MAAL,GAAcN,KAAd;AARC;AASF;;;;sCAcE;AAAA,UAXDO,QAWC,SAXDA,QAWC;AAAA,UAVDC,QAUC,SAVDA,QAUC;AAAA,UATDC,SASC,SATDA,SASC;AAAA,UARDC,QAQC,SARDA,QAQC;AAAA,UAPDC,YAOC,SAPDA,YAOC;AAAA,UANDC,aAMC,SANDA,aAMC;AAAA,UALDC,cAKC,SALDA,cAKC;AAAA,UAJDC,oBAIC,SAJDA,oBAIC;AAAA,UAHDC,cAGC,SAHDA,cAGC;AAAA,UAFDC,cAEC,SAFDA,cAEC;AAAA,UADDC,cACC,SADDA,cACC;AACD,UAAMC,eAAe,GACnB,KAAKhB,eAAL,CAAqBiB,KAArB,IACA,KAAKjB,eAAL,CAAqBkB,OADrB,KAEC,KAAKlB,eAAL,CAAqBmB,KAArB,IAA8B,KAAKnB,eAAL,CAAqBoB,KAFpD,KAGA,CAAC,KAAKpB,eAAL,CAAqBqB,wBAArB,CACC,KAAKrB,eAAL,CAAqBmB,KAArB,GACI,KAAKnB,eAAL,CAAqBkB,OAArB,CAA6BI,eADjC,GAEI,KAAKtB,eAAL,CAAqBkB,OAArB,CAA6BK,QAHlC,EAIC,KAAKvB,eAAL,CAAqBmB,KAArB,GACI,KAAKnB,eAAL,CAAqBkB,OAArB,CAA6BM,eADjC,GAEI,KAAKxB,eAAL,CAAqBkB,OAArB,CAA6BO,uBANlC,CAJH;AAYA,UAAMP,OAAO,GACV,KAAKlB,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqBkB,OAApD,IAAgE,EADlE;AAEA,UAAMQ,UAAU,GACb,KAAK1B,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqB0B,UAApD,IAAmE,EADrE;AAEA,aAAO;AACLR,QAAAA,OAAO,EAAPA,OADK;AAELb,QAAAA,QAAQ,EAARA,QAFK;AAGLqB,QAAAA,UAAU,EAAVA,UAHK;AAILf,QAAAA,cAAc,EAAdA,cAJK;AAKLG,QAAAA,cAAc,EAAdA,cALK;AAMLC,QAAAA,cAAc,EAAdA,cANK;AAOLY,QAAAA,aAAa,EAAE,KAAK1B,OAAL,CAAa0B,aAPvB;AAQLrB,QAAAA,QAAQ,EAAE,CAAC,EACTA,QAAQ,IACRU,eADA,IAEC,KAAKhB,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqB4B,YAFpD,IAGC,KAAKzB,oBAAL,IACC,CAAC,KAAKA,oBAAL,CAA0B0B,YAJ7B,IAKC,KAAK3B,YAAL,IAAqB,KAAKA,YAAL,CAAkB4B,UAN/B,CARN;AAgBLvB,QAAAA,SAAS,EAATA,SAhBK;AAiBLC,QAAAA,QAAQ,EAARA,QAjBK;AAkBLC,QAAAA,YAAY,EAAZA,YAlBK;AAmBLsB,QAAAA,oBAAoB,EAAE,CAAC,EAAEL,UAAU,IAAIA,UAAU,CAACM,MAAX,GAAoB,CAApC,CAnBlB;AAoBLpB,QAAAA,oBAAoB,EAClB,CAACM,OAAO,CAACe,oBAAT,IAAiCrB,oBArB9B;AAsBLF,QAAAA,aAAa,EAAbA,aAtBK;AAuBLwB,QAAAA,iBAAiB,EACf,KAAKlC,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqBkC,iBAxBhD;AAyBL;AACA;AACA;AACA;AACA;AACAC,QAAAA,oBAAoB,EAAE,KA9BjB;AA+BLf,QAAAA,KAAK,EAAE,KAAKpB,eAAL,CAAqBoB,KA/BvB;AAgCLD,QAAAA,KAAK,EAAE,KAAKnB,eAAL,CAAqBmB,KAhCvB;AAiCLN,QAAAA,cAAc,EAAdA,cAjCK;AAkCLuB,QAAAA,SAAS,EAAE,KAAKhC,MAAL,CAAYZ,IAlClB;AAmCL6C,QAAAA,aAAa,EACX,KAAKrC,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqBqC,aApChD;AAqCLC,QAAAA,qBAAqB,EACnB,KAAKtC,eAAL,CAAqBiB,KAArB,IACA,KAAKjB,eAAL,CAAqBsC,qBAvClB;AAwCLC,QAAAA,iBAAiB,EACf,KAAKvC,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqBuC,iBAzChD;AA0CLC,QAAAA,iBAAiB,EACf,KAAKxC,eAAL,CAAqBiB,KAArB,IAA8B,KAAKjB,eAAL,CAAqBwC,iBA3ChD;AA4CLC,QAAAA,WAAW,EAAE,CAAC,EACZ,CAAC,KAAKxC,OAAL,CAAagB,KAAd,IACA,CAAC,KAAKjB,eAAL,CAAqBiB,KADtB,IAEC,CAAC,KAAKjB,eAAL,CAAqBoB,KAAtB,IAA+B,CAAC,KAAKpB,eAAL,CAAqBmB,KAFtD,IAGA,CAAC,KAAKnB,eAAL,CAAqBkB,OAHtB,IAIC,KAAKf,oBAAL,IAA6B,CAAC,KAAKA,oBAAL,CAA0Bc,KAJzD,IAKC,KAAKf,YAAL,IAAqB,CAAC,KAAKA,YAAL,CAAkBe,KAN7B;AA5CT,OAAP;AAqDD;;;mCAEcyB,K,EAAa;AAAA;;AAAA,UAClBC,SADkB,GACLD,KADK,CAClBC,QADkB;AAE1B,aAAO;AACLC,QAAAA,0BAA0B,EAAE,oCAACX,oBAAD;AAAA,iBAC1B,MAAI,CAACjC,eAAL,CAAqB4C,0BAArB,CAAgDX,oBAAhD,CAD0B;AAAA,SADvB;AAGLY,QAAAA,iBAAiB,EAAE,2BAACC,eAAD;AAAA,iBACjB,MAAI,CAAC9C,eAAL,CAAqB6C,iBAArB,CAAuCC,eAAvC,CADiB;AAAA,SAHd;AAKL;AACAC,QAAAA,qBAAqB,EAAE,+BAACC,KAAD;AAAA,iBACrB,MAAI,CAAChD,eAAL,CAAqB+C,qBAArB,CAA2CC,KAA3C,CADqB;AAAA,SANlB;AAQL3B,QAAAA,wBAAwB,EAAE,kCACxBE,QADwB,EAExB0B,QAFwB,EAGZ;AACZ,iBAAO,MAAI,CAACjD,eAAL,CAAqBqB,wBAArB,CACLE,QADK,EAEL0B,QAFK,CAAP;AAID,SAhBI;AAiBLN,QAAAA,QAAQ;AAAA,mFAAE,iBACRO,WADQ,EAERC,MAFQ;AAAA;AAAA;AAAA;AAAA;AAAA,yBAIJR,SAJI;AAAA;AAAA;AAAA;;AAAA;AAAA,2BAKAA,SAAQ,CAACO,WAAD,EAAcC,MAAd,CALR;;AAAA;AAAA;;AAAA;AAAA;AAAA,2BAQF,MAAI,CAACnD,eAAL,CAAqB2C,QAArB,CAA8BO,WAA9B,EAA2C,EAA3C,EAA+CC,MAA/C,CARE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,WAjBH;AA2BLC,QAAAA,IAAI,EAAE;AAAA,iBAAM,MAAI,CAACpD,eAAL,CAAqBoD,IAArB,EAAN;AAAA;AA3BD,OAAP;AA6BD;;;;EA5I2CC,uB","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport { RcVMeetingModel } from 'ringcentral-integration/interfaces/Rcv.model';\nimport { RcMMeetingModel } from 'ringcentral-integration/modules/Meeting';\nimport GenericMeeting from 'ringcentral-integration/modules/GenericMeeting';\nimport Brand from 'ringcentral-integration/modules/Brand';\n\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'GenericMeetingUI',\n  deps: [\n    'GenericMeeting',\n    'Locale',\n    'RateLimiter',\n    'ConnectivityMonitor',\n    'Brand',\n  ],\n})\nexport default class GenericMeetingUI extends RcUIModule {\n  _genericMeeting: GenericMeeting;\n  _locale: any;\n  _rateLimiter: any;\n  _connectivityMonitor: any;\n  _brand: Brand;\n\n  constructor({\n    genericMeeting,\n    locale,\n    rateLimiter,\n    connectivityMonitor,\n    brand,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._genericMeeting = genericMeeting;\n    this._locale = locale;\n    this._rateLimiter = rateLimiter;\n    this._connectivityMonitor = connectivityMonitor;\n    this._brand = brand;\n  }\n\n  getUIProps({\n    useRcmV2,\n    disabled,\n    showTopic,\n    showWhen,\n    showDuration,\n    openNewWindow,\n    labelPlacement,\n    showRecurringMeeting,\n    scheduleButton,\n    datePickerSize,\n    timePickerSize,\n  }) {\n    const invalidPassowrd =\n      this._genericMeeting.ready &&\n      this._genericMeeting.meeting &&\n      (this._genericMeeting.isRCV || this._genericMeeting.isRCM) &&\n      !this._genericMeeting.validatePasswordSettings(\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.meetingPassword\n          : this._genericMeeting.meeting.password,\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.isMeetingSecret\n          : this._genericMeeting.meeting._requireMeetingPassword,\n      );\n    const meeting =\n      (this._genericMeeting.ready && this._genericMeeting.meeting) || {};\n    const delegators =\n      (this._genericMeeting.ready && this._genericMeeting.delegators) || [];\n    return {\n      meeting,\n      useRcmV2,\n      delegators,\n      labelPlacement,\n      datePickerSize,\n      timePickerSize,\n      currentLocale: this._locale.currentLocale,\n      disabled: !!(\n        disabled ||\n        invalidPassowrd ||\n        (this._genericMeeting.ready && this._genericMeeting.isScheduling) ||\n        (this._connectivityMonitor &&\n          !this._connectivityMonitor.connectivity) ||\n        (this._rateLimiter && this._rateLimiter.throttling)\n      ),\n      showTopic,\n      showWhen,\n      showDuration,\n      showScheduleOnBehalf: !!(delegators && delegators.length > 0),\n      showRecurringMeeting:\n        !meeting.usePersonalMeetingId && showRecurringMeeting,\n      openNewWindow,\n      showSaveAsDefault:\n        this._genericMeeting.ready && this._genericMeeting.showSaveAsDefault,\n      // Need to add this back when we back to this ticket\n      // https://jira.ringcentral.com/browse/RCINT-15031\n      // disableSaveAsDefault:\n      //   this._genericMeeting.ready &&\n      //   !this._genericMeeting.isPreferencesChanged,\n      disableSaveAsDefault: false,\n      isRCM: this._genericMeeting.isRCM,\n      isRCV: this._genericMeeting.isRCV,\n      scheduleButton,\n      brandName: this._brand.name,\n      showAdminLock:\n        this._genericMeeting.ready && this._genericMeeting.showAdminLock,\n      enablePersonalMeeting:\n        this._genericMeeting.ready &&\n        this._genericMeeting.enablePersonalMeeting,\n      enableWaitingRoom:\n        this._genericMeeting.ready && this._genericMeeting.enableWaitingRoom,\n      personalMeetingId:\n        this._genericMeeting.ready && this._genericMeeting.personalMeetingId,\n      showSpinner: !!(\n        !this._locale.ready ||\n        !this._genericMeeting.ready ||\n        (!this._genericMeeting.isRCM && !this._genericMeeting.isRCV) ||\n        !this._genericMeeting.meeting ||\n        (this._connectivityMonitor && !this._connectivityMonitor.ready) ||\n        (this._rateLimiter && !this._rateLimiter.ready)\n      ),\n    };\n  }\n\n  getUIFunctions(props?: any) {\n    const { schedule } = props;\n    return {\n      switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) =>\n        this._genericMeeting.switchUsePersonalMeetingId(usePersonalMeetingId),\n      updateScheduleFor: (userExtensionId: string) =>\n        this._genericMeeting.updateScheduleFor(userExtensionId),\n      // TODO: any is reserved for RcM\n      updateMeetingSettings: (value: RcMMeetingModel | RcVMeetingModel) =>\n        this._genericMeeting.updateMeetingSettings(value),\n      validatePasswordSettings: (\n        password: string,\n        isSecret: boolean,\n      ): boolean => {\n        return this._genericMeeting.validatePasswordSettings(\n          password,\n          isSecret,\n        );\n      },\n      schedule: async (\n        meetingInfo: RcMMeetingModel | RcVMeetingModel,\n        opener: Window,\n      ) => {\n        if (schedule) {\n          await schedule(meetingInfo, opener);\n          return;\n        }\n        await this._genericMeeting.schedule(meetingInfo, {}, opener);\n      },\n      init: () => this._genericMeeting.init(),\n    };\n  }\n}\n"],"file":"index.js"}