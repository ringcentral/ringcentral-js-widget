{"version":3,"sources":["modules/GenericMeetingUI/index.ts"],"names":["GenericMeetingUI","name","deps","genericMeeting","locale","rateLimiter","connectivityMonitor","options","_genericMeeting","_locale","_rateLimiter","_connectivityMonitor","useRcmV2","disabled","showTopic","showWhen","showDuration","openNewWindow","labelPlacement","showRecurringMeeting","scheduleButton","datePickerSize","timePickerSize","invalidPassowrd","ready","meeting","isRCV","isRCM","validatePasswordSettings","meetingPassword","password","isMeetingSecret","_requireMeetingPassword","delegators","currentLocale","isScheduling","connectivity","throttling","configDisabled","showScheduleOnBehalf","length","usePersonalMeetingId","showSaveAsDefault","disableSaveAsDefault","showAdminLock","enableServiceWebSettings","enablePersonalMeeting","enableWaitingRoom","personalMeetingId","putRecurringMeetingInMiddle","showSpinner","showSpinnerInConfigPanel","isUpdating","hasSettingsChanged","defaultTopic","props","schedule","switchUsePersonalMeetingId","updateHasSettingsChanged","isChanged","updateScheduleFor","userExtensionId","updateMeetingSettings","value","isSecret","meetingInfo","opener","init","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport { RcVMeetingModel } from 'ringcentral-integration/interfaces/Rcv.model';\nimport { RcMMeetingModel } from 'ringcentral-integration/modules/MeetingV2';\nimport { GenericMeeting } from 'ringcentral-integration/modules/GenericMeetingV2';\n\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'GenericMeetingUI',\n  deps: ['GenericMeeting', 'Locale', 'RateLimiter', 'ConnectivityMonitor'],\n})\nexport default class GenericMeetingUI extends RcUIModule {\n  _genericMeeting: GenericMeeting;\n  _locale: any;\n  _rateLimiter: any;\n  _connectivityMonitor: any;\n\n  constructor({\n    genericMeeting,\n    locale,\n    rateLimiter,\n    connectivityMonitor,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._genericMeeting = genericMeeting;\n    this._locale = locale;\n    this._rateLimiter = rateLimiter;\n    this._connectivityMonitor = connectivityMonitor;\n  }\n\n  getUIProps({\n    useRcmV2,\n    disabled,\n    showTopic,\n    showWhen,\n    showDuration,\n    openNewWindow,\n    labelPlacement,\n    showRecurringMeeting,\n    scheduleButton,\n    datePickerSize,\n    timePickerSize,\n  }) {\n    const invalidPassowrd =\n      this._genericMeeting.ready &&\n      this._genericMeeting.meeting &&\n      (this._genericMeeting.isRCV || this._genericMeeting.isRCM) &&\n      !this._genericMeeting.validatePasswordSettings(\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.meetingPassword\n          : this._genericMeeting.meeting.password,\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.isMeetingSecret\n          : this._genericMeeting.meeting._requireMeetingPassword,\n      );\n    const meeting =\n      (this._genericMeeting.ready && this._genericMeeting.meeting) || {};\n    const delegators =\n      (this._genericMeeting.ready && this._genericMeeting.delegators) || [];\n    return {\n      meeting,\n      useRcmV2,\n      delegators,\n      labelPlacement,\n      datePickerSize,\n      timePickerSize,\n      currentLocale: this._locale.currentLocale,\n      disabled: !!(\n        disabled ||\n        invalidPassowrd ||\n        (this._genericMeeting.ready && this._genericMeeting.isScheduling) ||\n        (this._connectivityMonitor &&\n          !this._connectivityMonitor.connectivity) ||\n        (this._rateLimiter && this._rateLimiter.throttling)\n      ),\n      configDisabled: false,\n      showTopic,\n      showWhen,\n      showDuration,\n      showScheduleOnBehalf: !!(delegators && delegators.length > 0),\n      showRecurringMeeting:\n        !meeting.usePersonalMeetingId && showRecurringMeeting,\n      openNewWindow,\n      showSaveAsDefault:\n        this._genericMeeting.ready && this._genericMeeting.showSaveAsDefault,\n      // Need to add this back when we back to this ticket\n      // https://jira.ringcentral.com/browse/RCINT-15031\n      // disableSaveAsDefault:\n      //   this._genericMeeting.ready &&\n      //   !this._genericMeeting.isPreferencesChanged,\n      disableSaveAsDefault: false,\n      isRCM: this._genericMeeting.isRCM,\n      isRCV: this._genericMeeting.isRCV,\n      scheduleButton,\n      showAdminLock:\n        this._genericMeeting.ready && this._genericMeeting.showAdminLock,\n      enableServiceWebSettings:\n        this._genericMeeting.ready &&\n        this._genericMeeting.enableServiceWebSettings,\n      enablePersonalMeeting:\n        this._genericMeeting.ready &&\n        this._genericMeeting.enablePersonalMeeting,\n      enableWaitingRoom:\n        this._genericMeeting.ready && this._genericMeeting.enableWaitingRoom,\n      personalMeetingId:\n        this._genericMeeting.ready && this._genericMeeting.personalMeetingId,\n      putRecurringMeetingInMiddle:\n        this._genericMeeting.ready &&\n        this._genericMeeting.putRecurringMeetingInMiddle,\n      showSpinner: !!(\n        !this._locale.ready ||\n        !this._genericMeeting.ready ||\n        (!this._genericMeeting.isRCM && !this._genericMeeting.isRCV) ||\n        !this._genericMeeting.meeting ||\n        (this._connectivityMonitor && !this._connectivityMonitor.ready) ||\n        (this._rateLimiter && !this._rateLimiter.ready)\n      ),\n      showSpinnerInConfigPanel: this._genericMeeting.isUpdating,\n      hasSettingsChanged: this._genericMeeting.hasSettingsChanged,\n      defaultTopic: this._genericMeeting.defaultTopic,\n    };\n  }\n\n  getUIFunctions(props?: any) {\n    const { schedule } = props;\n    return {\n      switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) =>\n        this._genericMeeting.switchUsePersonalMeetingId(usePersonalMeetingId),\n\n      updateHasSettingsChanged: (isChanged: boolean) => {\n        this._genericMeeting.updateHasSettingsChanged(isChanged);\n      },\n      updateScheduleFor: (userExtensionId: string) =>\n        this._genericMeeting.updateScheduleFor(userExtensionId),\n      // TODO: any is reserved for RcM\n      updateMeetingSettings: (value: RcMMeetingModel | RcVMeetingModel) =>\n        this._genericMeeting.updateMeetingSettings(value),\n      validatePasswordSettings: (\n        password: string,\n        isSecret: boolean,\n      ): boolean => {\n        return this._genericMeeting.validatePasswordSettings(\n          password,\n          isSecret,\n        );\n      },\n      schedule: async (\n        meetingInfo: RcMMeetingModel | RcVMeetingModel,\n        opener: Window,\n      ) => {\n        if (schedule) {\n          await schedule(meetingInfo, opener);\n          return;\n        }\n        await this._genericMeeting.schedule(meetingInfo, {}, opener);\n      },\n      init: () => this._genericMeeting.init(),\n    };\n  }\n}\n"],"file":"index.js"}