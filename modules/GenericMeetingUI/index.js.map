{"version":3,"sources":["modules/GenericMeetingUI/index.ts"],"names":["GenericMeetingUI","name","deps","genericMeeting","locale","rateLimiter","connectivityMonitor","brand","options","_genericMeeting","_locale","_rateLimiter","_connectivityMonitor","_brand","disabled","showTopic","showWhen","showDuration","openNewWindow","showRecurringMeeting","scheduleButton","datePickerSize","timePickerSize","invalidPassowrd","ready","meeting","isRCV","isRCM","validatePasswordSettings","password","isMeetingSecret","_requireMeetingPassword","currentLocale","assistedUsers","scheduleForUser","isScheduling","connectivity","throttling","usePersonalMeetingId","showSaveAsDefault","disableSaveAsDefault","brandName","personalMeetingId","personalMeeting","shortId","showSpinner","props","schedule","switchUsePersonalMeetingId","updateScheduleFor","userExtensionId","updateMeetingSettings","value","isSecret","meetingInfo","opener","init","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport { RcVMeetingModel } from 'ringcentral-integration/models/rcv.model';\nimport Brand from 'ringcentral-integration/modules/Brand';\n\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'GenericMeetingUI',\n  deps: [\n    'GenericMeeting',\n    'Locale',\n    'RateLimiter',\n    'ConnectivityMonitor',\n    'Brand',\n  ],\n})\nexport default class GenericMeetingUI extends RcUIModule {\n  _genericMeeting: any;\n  _locale: any;\n  _rateLimiter: any;\n  _connectivityMonitor: any;\n  _brand: Brand;\n\n  constructor({\n    genericMeeting,\n    locale,\n    rateLimiter,\n    connectivityMonitor,\n    brand,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._genericMeeting = genericMeeting;\n    this._locale = locale;\n    this._rateLimiter = rateLimiter;\n    this._connectivityMonitor = connectivityMonitor;\n    this._brand = brand;\n  }\n\n  getUIProps({\n    disabled,\n    showTopic,\n    showWhen,\n    showDuration,\n    openNewWindow,\n    showRecurringMeeting,\n    scheduleButton,\n    datePickerSize,\n    timePickerSize,\n  }) {\n    const invalidPassowrd =\n      this._genericMeeting.ready &&\n      this._genericMeeting.meeting &&\n      (this._genericMeeting.isRCV || this._genericMeeting.isRCM) &&\n      !this._genericMeeting.validatePasswordSettings(\n        this._genericMeeting.meeting.password,\n        this._genericMeeting.isRCV\n          ? this._genericMeeting.meeting.isMeetingSecret\n          : this._genericMeeting.meeting._requireMeetingPassword,\n      );\n    const meeting =\n      (this._genericMeeting.ready && this._genericMeeting.meeting) || {};\n    return {\n      meeting,\n      datePickerSize,\n      timePickerSize,\n      currentLocale: this._locale.currentLocale,\n      assistedUsers:\n        (this._genericMeeting.ready && this._genericMeeting.assistedUsers) ||\n        [],\n      scheduleForUser: this._genericMeeting.ready\n        ? this._genericMeeting.scheduleForUser\n        : null,\n      disabled: !!(\n        disabled ||\n        invalidPassowrd ||\n        (this._genericMeeting.ready && this._genericMeeting.isScheduling) ||\n        (this._connectivityMonitor &&\n          !this._connectivityMonitor.connectivity) ||\n        (this._rateLimiter && this._rateLimiter.throttling)\n      ),\n      showTopic,\n      showWhen,\n      showDuration,\n      showRecurringMeeting:\n        !meeting.usePersonalMeetingId && showRecurringMeeting,\n      openNewWindow,\n      showSaveAsDefault:\n        this._genericMeeting.ready && this._genericMeeting.showSaveAsDefault,\n      // Need to add this back when we back to this ticket\n      // https://jira.ringcentral.com/browse/RCINT-15031\n      // disableSaveAsDefault:\n      //   this._genericMeeting.ready &&\n      //   !this._genericMeeting.isPreferencesChanged,\n      disableSaveAsDefault: false,\n      isRCM: this._genericMeeting.isRCM,\n      isRCV: this._genericMeeting.isRCV,\n      scheduleButton,\n      brandName: this._brand.name,\n      personalMeetingId:\n        this._genericMeeting.ready &&\n        this._genericMeeting.personalMeeting &&\n        this._genericMeeting.personalMeeting.shortId,\n      showSpinner: !!(\n        !this._locale.ready ||\n        !this._genericMeeting.ready ||\n        (!this._genericMeeting.isRCM && !this._genericMeeting.isRCV) ||\n        !this._genericMeeting.meeting ||\n        (this._connectivityMonitor && !this._connectivityMonitor.ready) ||\n        (this._rateLimiter && !this._rateLimiter.ready)\n      ),\n    };\n  }\n\n  getUIFunctions(props?: any) {\n    const { schedule } = props;\n    return {\n      switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) =>\n        this._genericMeeting.switchUsePersonalMeetingId(usePersonalMeetingId),\n      updateScheduleFor: (userExtensionId: string) =>\n        this._genericMeeting.updateScheduleFor(userExtensionId),\n      // TODO: any is reserved for RcM\n      updateMeetingSettings: (value: RcVMeetingModel | any) =>\n        this._genericMeeting.updateMeetingSettings(value),\n      validatePasswordSettings: (\n        password: string,\n        isSecret: boolean,\n      ): boolean => {\n        return this._genericMeeting.validatePasswordSettings(\n          password,\n          isSecret,\n        );\n      },\n      schedule: async (meetingInfo, opener) => {\n        if (schedule) {\n          await schedule(meetingInfo, opener);\n          return;\n        }\n        await this._genericMeeting.schedule(meetingInfo, {}, opener);\n      },\n      init: () => this._genericMeeting.init(),\n    };\n  }\n}\n"],"file":"index.js"}