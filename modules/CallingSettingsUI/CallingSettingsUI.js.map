{"version":3,"sources":["modules/CallingSettingsUI/CallingSettingsUI.tsx"],"names":["CallingSettingsUI","name","deps","dep","optional","callingSettings","brand","locale","webphone","routerInteraction","locationSearchable","ringtoneSettings","options","_callingSettings","_brand","_locale","_webphone","_routerInteraction","_locationSearchable","_ringtoneSettings","brandCode","code","brandName","currentLocale","callWithOptions","callWith","myLocation","ringoutPrompt","defaultRingoutPrompt","availableNumbersWithLabel","disabled","sessions","length","showSpinner","showRingToneSettings","isChangeRingToneAllowed","incomingAudioFile","incomingAudio","outgoingAudioFile","outgoingAudio","defaultIncomingAudioFile","defaultIncomingAudio","defaultOutgoingAudioFile","defaultOutgoingAudio","onBackButtonClick","goBack","onSave","isCustomLocation","setData","callingOptions","browser","setRingtone","ready","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport callingOptions from 'ringcentral-integration/modules/CallingSettings/callingOptions';\nimport {\n  CallingSettingsPanelUIProps,\n  CallingSettingsPanelUIFunctions,\n} from '../../components/CallingSettingsPanel/CallingSettingsPenal.interface';\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'CallingSettingsUI',\n  deps: [\n    'CallingSettings',\n    'Brand',\n    'Locale',\n    { dep: 'Webphone', optional: true },\n    'RouterInteraction',\n    { dep: 'CallingSettingsUIOptions', optional: true },\n  ],\n})\nexport class CallingSettingsUI extends RcUIModule {\n  _callingSettings: any;\n  _brand: any;\n  _locale: any;\n  _webphone: any;\n  _routerInteraction: any;\n  _locationSearchable: boolean;\n  _ringtoneSettings: boolean;\n\n  constructor({\n    callingSettings,\n    brand,\n    locale,\n    webphone,\n    routerInteraction,\n    locationSearchable = true,\n    ringtoneSettings = false,\n    ...options\n  }) {\n    super({ ...options });\n    this._callingSettings = callingSettings;\n    this._brand = brand;\n    this._locale = locale;\n    this._webphone = webphone;\n    this._routerInteraction = routerInteraction;\n    this._locationSearchable = locationSearchable;\n    this._ringtoneSettings = ringtoneSettings;\n  }\n\n  get showSpinner() {\n    return !(\n      this._callingSettings.ready &&\n      this._brand.ready &&\n      this._locale.ready &&\n      (!this._webphone || this._webphone.ready) &&\n      this._routerInteraction.ready\n    );\n  }\n\n  get locationSearchable() {\n    return !!this._locationSearchable;\n  }\n\n  getUIProps(): CallingSettingsPanelUIProps {\n    return {\n      brandCode: this._brand.code,\n      brandName: this._brand.name,\n      currentLocale: this._locale.currentLocale,\n      callWithOptions: this._callingSettings.callWithOptions,\n      callWith: this._callingSettings.callWith,\n      myLocation: this._callingSettings.myLocation,\n      ringoutPrompt: this._callingSettings.ringoutPrompt,\n      defaultRingoutPrompt: this._callingSettings.defaultRingoutPrompt,\n      availableNumbersWithLabel: this._callingSettings\n        .availableNumbersWithLabel,\n      disabled: !!(this._webphone && this._webphone.sessions.length > 0),\n      showSpinner: this.showSpinner,\n      locationSearchable: this.locationSearchable,\n      showRingToneSettings:\n        this._ringtoneSettings && this._callingSettings.isChangeRingToneAllowed,\n      incomingAudioFile: this._webphone?.incomingAudioFile,\n      incomingAudio: this._webphone?.incomingAudio,\n      outgoingAudioFile: this._webphone?.outgoingAudioFile,\n      outgoingAudio: this._webphone?.outgoingAudio,\n      defaultIncomingAudioFile: this._webphone?.defaultIncomingAudioFile,\n      defaultIncomingAudio: this._webphone?.defaultIncomingAudio,\n      defaultOutgoingAudioFile: this._webphone?.outgoingAudioFile,\n      defaultOutgoingAudio: this._webphone?.outgoingAudio,\n    };\n  }\n\n  getUIFunctions(): CallingSettingsPanelUIFunctions {\n    return {\n      onBackButtonClick: () => this._routerInteraction.goBack(),\n      onSave: ({\n        callWith,\n        myLocation,\n        ringoutPrompt,\n        isCustomLocation,\n        incomingAudio,\n        incomingAudioFile,\n        outgoingAudio,\n        outgoingAudioFile,\n      }) => {\n        this._callingSettings.setData(\n          {\n            callWith,\n            myLocation,\n            ringoutPrompt,\n            isCustomLocation,\n          },\n          true,\n        );\n        if (this._webphone && callWith === callingOptions.browser) {\n          this._webphone.setRingtone({\n            incomingAudio,\n            incomingAudioFile,\n            outgoingAudio,\n            outgoingAudioFile,\n          });\n        }\n      },\n    };\n  }\n}\n"],"file":"CallingSettingsUI.js"}