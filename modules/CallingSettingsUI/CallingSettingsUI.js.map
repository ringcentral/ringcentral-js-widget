{"version":3,"sources":["modules/CallingSettingsUI/CallingSettingsUI.tsx"],"names":["CallingSettingsUI","name","deps","dep","optional","callingSettings","brand","locale","webphone","routerInteraction","locationSearchable","ringtoneSettings","options","_callingSettings","_brand","_locale","_webphone","_routerInteraction","_locationSearchable","_ringtoneSettings","fullName","currentLocale","callWithOptions","callWith","myLocation","ringoutPrompt","defaultRingoutPrompt","availableNumbers","disabled","sessions","length","showSpinner","showRingToneSettings","isChangeRingToneAllowed","incomingAudioFile","incomingAudio","outgoingAudioFile","outgoingAudio","defaultIncomingAudioFile","defaultIncomingAudio","defaultOutgoingAudioFile","defaultOutgoingAudio","onBackButtonClick","goBack","onSave","setData","callingOptions","browser","setRingtone","ready","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport callingOptions from 'ringcentral-integration/modules/CallingSettings/callingOptions';\nimport {\n  CallingSettingsPanelUIProps,\n  CallingSettingsPanelUIFunctions,\n} from '../../components/CallingSettingsPanel/CallingSettingsPenal.interface';\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'CallingSettingsUI',\n  deps: [\n    'CallingSettings',\n    'Brand',\n    'Locale',\n    { dep: 'Webphone', optional: true },\n    'RouterInteraction',\n    { dep: 'CallingSettingsUIOptions', optional: true },\n  ],\n})\nexport class CallingSettingsUI extends RcUIModule {\n  _callingSettings: any;\n  _brand: any;\n  _locale: any;\n  _webphone: any;\n  _routerInteraction: any;\n  _locationSearchable: boolean;\n  _ringtoneSettings: boolean;\n\n  constructor({\n    callingSettings,\n    brand,\n    locale,\n    webphone,\n    routerInteraction,\n    locationSearchable,\n    ringtoneSettings = false,\n    ...options\n  }) {\n    super({ ...options });\n    this._callingSettings = callingSettings;\n    this._brand = brand;\n    this._locale = locale;\n    this._webphone = webphone;\n    this._routerInteraction = routerInteraction;\n    this._locationSearchable = locationSearchable;\n    this._ringtoneSettings = ringtoneSettings;\n  }\n\n  get showSpinner() {\n    return !(\n      this._callingSettings.ready &&\n      this._brand.ready &&\n      this._locale.ready &&\n      (!this._webphone || this._webphone.ready) &&\n      this._routerInteraction.ready\n    );\n  }\n\n  get locationSearchable() {\n    return !!this._locationSearchable;\n  }\n\n  getUIProps(): CallingSettingsPanelUIProps {\n    return {\n      brand: this._brand.fullName,\n      currentLocale: this._locale.currentLocale,\n      callWithOptions: this._callingSettings.callWithOptions,\n      callWith: this._callingSettings.callWith,\n      myLocation: this._callingSettings.myLocation,\n      ringoutPrompt: this._callingSettings.ringoutPrompt,\n      defaultRingoutPrompt: this._callingSettings.defaultRingoutPrompt,\n      availableNumbers: this._callingSettings.availableNumbers,\n      disabled: !!(this._webphone && this._webphone.sessions.length > 0),\n      showSpinner: this.showSpinner,\n      locationSearchable: this.locationSearchable,\n      showRingToneSettings:\n        this._ringtoneSettings && this._callingSettings.isChangeRingToneAllowed,\n      incomingAudioFile: this._webphone?.incomingAudioFile,\n      incomingAudio: this._webphone?.incomingAudio,\n      outgoingAudioFile: this._webphone?.outgoingAudioFile,\n      outgoingAudio: this._webphone?.outgoingAudio,\n      defaultIncomingAudioFile: this._webphone?.defaultIncomingAudioFile,\n      defaultIncomingAudio: this._webphone?.defaultIncomingAudio,\n      defaultOutgoingAudioFile: this._webphone?.outgoingAudioFile,\n      defaultOutgoingAudio: this._webphone?.outgoingAudio,\n    };\n  }\n\n  getUIFunctions(): CallingSettingsPanelUIFunctions {\n    return {\n      onBackButtonClick: () => this._routerInteraction.goBack(),\n      onSave: ({\n        callWith,\n        myLocation,\n        ringoutPrompt,\n        incomingAudio,\n        incomingAudioFile,\n        outgoingAudio,\n        outgoingAudioFile,\n      }) => {\n        this._callingSettings.setData(\n          {\n            callWith,\n            myLocation,\n            ringoutPrompt,\n          },\n          true,\n        );\n        if (this._webphone && callWith === callingOptions.browser) {\n          this._webphone.setRingtone({\n            incomingAudio,\n            incomingAudioFile,\n            outgoingAudio,\n            outgoingAudioFile,\n          });\n        }\n      },\n    };\n  }\n}\n"],"file":"CallingSettingsUI.js"}