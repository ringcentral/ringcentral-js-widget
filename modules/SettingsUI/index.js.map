{"version":3,"sources":["modules/SettingsUI/index.js"],"names":["DEFAULT_REGION_SETTINGS_URL","DEFAULT_CALLING_SETTINGS_URL","DEFAULT_AUDIO_SETTINGS_URL","DEFAULT_FEEDBACK_SETTINGS_URL","DEFAULT_MSTEAMS_SETTINGS_URL","SettingsUI","name","deps","dep","optional","phone","accountInfo","auth","brand","extensionInfo","locale","localeSettings","regionSettings","callingSettings","version","rolesAndPermissions","presence","showRegion","showCalling","showAudio","showFeedback","showUserGuide","showPresenceSettings","showMsteamsSettings","showQuickAccess","params","loginNumber","loggedIn","loginStatus","ready","extensionNumber","phoneNumber","mainCompanyNumber","join","countryCode","areaCode","showSpinner","callingEnabled","id","showReginSetting","currentLocale","brandId","ringoutEnabled","outboundSMS","permissions","OutboundSMS","InternalSMS","isCallQueueMember","dndStatus","userStatus","openPresenceSettings","hasEditPresencePermission","supportedLocales","savedLocale","hasUserGuidePermission","regionSettingsUrl","callingSettingsUrl","audioSettingsUrl","feedbackSettingsUrl","msteamsSettingsUrl","routerInteraction","userGuide","quickAccess","onLogoutButtonClick","logout","onRegionSettingsLinkClick","push","onCallingSettingsLinkClick","onAudioSettingsLinkClick","onFeedbackSettingsLinkClick","onMsteamsSettingsLinkClick","onUserGuideClick","start","onQuickAccessLinkClick","enter","setAvailable","setBusy","setDoNotDisturb","setInvisible","toggleAcceptCallQueueCalls","saveLocale","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport loginStatus from 'ringcentral-integration/modules/Auth/loginStatus';\nimport RcUIModule from '../../lib/RcUIModule';\n\nconst DEFAULT_REGION_SETTINGS_URL = '/settings/region';\nconst DEFAULT_CALLING_SETTINGS_URL = '/settings/calling';\nconst DEFAULT_AUDIO_SETTINGS_URL = '/settings/audio';\nconst DEFAULT_FEEDBACK_SETTINGS_URL = '/settings/feedback';\nconst DEFAULT_MSTEAMS_SETTINGS_URL = '/settings/msteams';\n\n@Module({\n  name: 'SettingsUI',\n  deps: [\n    'Auth',\n    'Brand',\n    'Locale',\n    {\n      dep: 'Version',\n      optional: true,\n    },\n    {\n      dep: 'Presence',\n      optional: true,\n    },\n    'AccountInfo',\n    'ExtensionInfo',\n    'RegionSettings',\n    'RolesAndPermissions',\n    'RouterInteraction',\n    {\n      dep: 'CallingSettings',\n      optional: true,\n    },\n    {\n      dep: 'LocaleSettings',\n      optional: true,\n    },\n    {\n      dep: 'QuickAccess',\n      optional: true,\n    },\n    {\n      dep: 'UserGuide',\n      optional: true,\n    },\n    {\n      dep: 'SettingsUIOptions',\n      optional: true,\n    },\n  ],\n})\nexport default class SettingsUI extends RcUIModule {\n  getUIProps({\n    phone: {\n      accountInfo,\n      auth,\n      brand,\n      extensionInfo,\n      locale,\n      localeSettings,\n      regionSettings,\n      callingSettings,\n      version,\n      rolesAndPermissions,\n      presence,\n    },\n    showRegion = true,\n    showCalling = true,\n    showAudio = true,\n    showFeedback = true,\n    showUserGuide = true,\n    showPresenceSettings = true,\n    showMsteamsSettings = false,\n    showQuickAccess = false,\n    params,\n  }) {\n    let loginNumber = '';\n    const loggedIn = auth.loginStatus === loginStatus.loggedIn;\n    if (loggedIn && accountInfo.ready && extensionInfo.ready) {\n      // If no extensionNumber, extensionNumber field needs to be omitted\n      const extensionNumber =\n        extensionInfo.extensionNumber && extensionInfo.extensionNumber !== '0'\n          ? extensionInfo.extensionNumber\n          : null;\n      const phoneNumber = [accountInfo.mainCompanyNumber, extensionNumber].join(\n        '*',\n      );\n      loginNumber = formatNumber({\n        phoneNumber,\n        countryCode: regionSettings.countryCode,\n        areaCode: regionSettings.areaCode,\n      });\n    }\n    return {\n      version,\n      loginNumber,\n      showFeedback,\n      showQuickAccess,\n      showMsteamsSettings,\n      showSpinner: !(\n        accountInfo.ready &&\n        auth.ready &&\n        loggedIn &&\n        extensionInfo.ready &&\n        locale.ready &&\n        regionSettings.ready &&\n        (!callingSettings || callingSettings.ready) &&\n        rolesAndPermissions.ready &&\n        (!presence || presence.ready) &&\n        (!localeSettings || localeSettings.ready)\n      ),\n      showCalling:\n        showCalling && callingSettings && rolesAndPermissions.callingEnabled,\n      showAudio: showAudio && rolesAndPermissions.callingEnabled,\n      showRegion:\n        loggedIn &&\n        brand.id === '1210' &&\n        regionSettings.showReginSetting &&\n        rolesAndPermissions.callingEnabled &&\n        showRegion,\n      currentLocale: locale.currentLocale,\n      brandId: brand.id,\n      ringoutEnabled: rolesAndPermissions.ringoutEnabled,\n      outboundSMS:\n        !!rolesAndPermissions.permissions.OutboundSMS ||\n        !!rolesAndPermissions.permissions.InternalSMS,\n      isCallQueueMember: extensionInfo.isCallQueueMember,\n      dndStatus: presence && presence.dndStatus,\n      userStatus: presence && presence.userStatus,\n      openPresenceSettings: !!(\n        presence &&\n        params &&\n        params.showPresenceSettings\n      ),\n      showPresenceSettings:\n        showPresenceSettings && rolesAndPermissions.hasEditPresencePermission,\n      supportedLocales: localeSettings && localeSettings.supportedLocales,\n      savedLocale: localeSettings && localeSettings.savedLocale,\n      showUserGuide:\n        showUserGuide && rolesAndPermissions.hasUserGuidePermission,\n    };\n  }\n\n  getUIFunctions({\n    regionSettingsUrl = DEFAULT_REGION_SETTINGS_URL,\n    callingSettingsUrl = DEFAULT_CALLING_SETTINGS_URL,\n    audioSettingsUrl = DEFAULT_AUDIO_SETTINGS_URL,\n    feedbackSettingsUrl = DEFAULT_FEEDBACK_SETTINGS_URL,\n    msteamsSettingsUrl = DEFAULT_MSTEAMS_SETTINGS_URL,\n    phone: {\n      auth,\n      presence,\n      routerInteraction,\n      localeSettings,\n      userGuide,\n      quickAccess,\n    },\n  }) {\n    return {\n      async onLogoutButtonClick() {\n        await auth.logout();\n      },\n      onRegionSettingsLinkClick() {\n        routerInteraction.push(regionSettingsUrl);\n      },\n      onCallingSettingsLinkClick() {\n        routerInteraction.push(callingSettingsUrl);\n      },\n      onAudioSettingsLinkClick() {\n        routerInteraction.push(audioSettingsUrl);\n      },\n      onFeedbackSettingsLinkClick() {\n        routerInteraction.push(feedbackSettingsUrl);\n      },\n      onMsteamsSettingsLinkClick() {\n        routerInteraction.push(msteamsSettingsUrl);\n      },\n      onUserGuideClick() {\n        userGuide.start();\n      },\n      onQuickAccessLinkClick() {\n        quickAccess.enter();\n      },\n\n      setAvailable: (...args) => presence && presence.setAvailable(...args),\n      setBusy: (...args) => presence && presence.setBusy(...args),\n      setDoNotDisturb: (...args) =>\n        presence && presence.setDoNotDisturb(...args),\n      setInvisible: (...args) => presence && presence.setInvisible(...args),\n      toggleAcceptCallQueueCalls: (...args) =>\n        presence && presence.toggleAcceptCallQueueCalls(...args),\n      saveLocale:\n        localeSettings && ((locale) => localeSettings.saveLocale(locale)),\n    };\n  }\n}\n"],"file":"index.js"}