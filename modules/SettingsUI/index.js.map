{"version":3,"sources":["modules/SettingsUI/index.js"],"names":["DEFAULT_REGION_SETTINGS_URL","DEFAULT_CALLING_SETTINGS_URL","DEFAULT_AUDIO_SETTINGS_URL","DEFAULT_FEEDBACK_SETTINGS_URL","SettingsUI","name","deps","dep","optional","phone","accountInfo","auth","brand","extensionInfo","locale","localeSettings","regionSettings","callingSettings","version","rolesAndPermissions","presence","showRegion","showCalling","showAudio","showFeedback","showUserGuide","showPresenceSettings","showQuickAccess","params","loginNumber","loggedIn","loginStatus","ready","mainCompanyNumber","extensionNumber","phoneNumber","join","countryCode","areaCode","showSpinner","callingEnabled","code","showReginSetting","currentLocale","brandId","id","ringoutEnabled","outboundSMS","permissions","OutboundSMS","InternalSMS","isCallQueueMember","dndStatus","userStatus","openPresenceSettings","hasEditPresencePermission","supportedLocales","savedLocale","hasUserGuidePermission","regionSettingsUrl","callingSettingsUrl","audioSettingsUrl","feedbackSettingsUrl","routerInteraction","userGuide","quickAccess","onLogoutButtonClick","logout","onRegionSettingsLinkClick","push","onCallingSettingsLinkClick","onAudioSettingsLinkClick","onFeedbackSettingsLinkClick","onUserGuideClick","start","onQuickAccessLinkClick","enter","setAvailable","setBusy","setDoNotDisturb","setInvisible","toggleAcceptCallQueueCalls","saveLocale","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport loginStatus from 'ringcentral-integration/modules/Auth/loginStatus';\nimport RcUIModule from '../../lib/RcUIModule';\n\nconst DEFAULT_REGION_SETTINGS_URL = '/settings/region';\nconst DEFAULT_CALLING_SETTINGS_URL = '/settings/calling';\nconst DEFAULT_AUDIO_SETTINGS_URL = '/settings/audio';\nconst DEFAULT_FEEDBACK_SETTINGS_URL = '/settings/feedback';\n\n@Module({\n  name: 'SettingsUI',\n  deps: [\n    'Auth',\n    'Brand',\n    'Locale',\n    {\n      dep: 'Version',\n      optional: true,\n    },\n    {\n      dep: 'Presence',\n      optional: true,\n    },\n    'AccountInfo',\n    'ExtensionInfo',\n    'RegionSettings',\n    'RolesAndPermissions',\n    'RouterInteraction',\n    {\n      dep: 'CallingSettings',\n      optional: true,\n    },\n    {\n      dep: 'LocaleSettings',\n      optional: true,\n    },\n    {\n      dep: 'QuickAccess',\n      optional: true,\n    },\n    {\n      dep: 'UserGuide',\n      optional: true,\n    },\n    {\n      dep: 'SettingsUIOptions',\n      optional: true,\n    },\n  ],\n})\nexport default class SettingsUI extends RcUIModule {\n  getUIProps({\n    phone: {\n      accountInfo,\n      auth,\n      brand,\n      extensionInfo,\n      locale,\n      localeSettings,\n      regionSettings,\n      callingSettings,\n      version,\n      rolesAndPermissions,\n      presence,\n    },\n    showRegion = true,\n    showCalling = true,\n    showAudio = true,\n    showFeedback = true,\n    showUserGuide = true,\n    showPresenceSettings = true,\n    showQuickAccess = false,\n    params,\n  }) {\n    let loginNumber = brand.name;\n    const loggedIn = auth.loginStatus === loginStatus.loggedIn;\n    if (\n      loggedIn &&\n      accountInfo.ready &&\n      extensionInfo.ready &&\n      accountInfo.mainCompanyNumber\n    ) {\n      // If no extensionNumber, extensionNumber field needs to be omitted\n      const extensionNumber =\n        extensionInfo.extensionNumber && extensionInfo.extensionNumber !== '0'\n          ? extensionInfo.extensionNumber\n          : null;\n      const phoneNumber = [accountInfo.mainCompanyNumber, extensionNumber].join(\n        '*',\n      );\n      loginNumber = formatNumber({\n        phoneNumber,\n        countryCode: regionSettings.countryCode,\n        areaCode: regionSettings.areaCode,\n      });\n    }\n    return {\n      version,\n      loginNumber,\n      showFeedback,\n      showQuickAccess,\n      showSpinner: !(\n        accountInfo.ready &&\n        auth.ready &&\n        loggedIn &&\n        extensionInfo.ready &&\n        locale.ready &&\n        regionSettings.ready &&\n        (!callingSettings || callingSettings.ready) &&\n        rolesAndPermissions.ready &&\n        (!presence || presence.ready) &&\n        (!localeSettings || localeSettings.ready)\n      ),\n      showCalling:\n        showCalling && callingSettings && rolesAndPermissions.callingEnabled,\n      showAudio: showAudio && rolesAndPermissions.callingEnabled,\n      showRegion:\n        loggedIn &&\n        brand.code === 'rc' &&\n        regionSettings.showReginSetting &&\n        rolesAndPermissions.callingEnabled &&\n        showRegion,\n      currentLocale: locale.currentLocale,\n      brandId: brand.id,\n      ringoutEnabled: rolesAndPermissions.ringoutEnabled,\n      outboundSMS:\n        !!rolesAndPermissions.permissions.OutboundSMS ||\n        !!rolesAndPermissions.permissions.InternalSMS,\n      isCallQueueMember: extensionInfo.isCallQueueMember,\n      dndStatus: presence && presence.dndStatus,\n      userStatus: presence && presence.userStatus,\n      openPresenceSettings: !!(\n        presence &&\n        params &&\n        params.showPresenceSettings\n      ),\n      showPresenceSettings:\n        showPresenceSettings && rolesAndPermissions.hasEditPresencePermission,\n      supportedLocales: localeSettings && localeSettings.supportedLocales,\n      savedLocale: localeSettings && localeSettings.savedLocale,\n      showUserGuide:\n        showUserGuide && rolesAndPermissions.hasUserGuidePermission,\n    };\n  }\n\n  getUIFunctions({\n    regionSettingsUrl = DEFAULT_REGION_SETTINGS_URL,\n    callingSettingsUrl = DEFAULT_CALLING_SETTINGS_URL,\n    audioSettingsUrl = DEFAULT_AUDIO_SETTINGS_URL,\n    feedbackSettingsUrl = DEFAULT_FEEDBACK_SETTINGS_URL,\n    phone: {\n      auth,\n      presence,\n      routerInteraction,\n      localeSettings,\n      userGuide,\n      quickAccess,\n    },\n  }) {\n    return {\n      async onLogoutButtonClick() {\n        await auth.logout();\n      },\n      onRegionSettingsLinkClick() {\n        routerInteraction.push(regionSettingsUrl);\n      },\n      onCallingSettingsLinkClick() {\n        routerInteraction.push(callingSettingsUrl);\n      },\n      onAudioSettingsLinkClick() {\n        routerInteraction.push(audioSettingsUrl);\n      },\n      onFeedbackSettingsLinkClick() {\n        routerInteraction.push(feedbackSettingsUrl);\n      },\n      onUserGuideClick() {\n        userGuide.start();\n      },\n      onQuickAccessLinkClick() {\n        quickAccess.enter();\n      },\n\n      setAvailable: (...args) => presence && presence.setAvailable(...args),\n      setBusy: (...args) => presence && presence.setBusy(...args),\n      setDoNotDisturb: (...args) =>\n        presence && presence.setDoNotDisturb(...args),\n      setInvisible: (...args) => presence && presence.setInvisible(...args),\n      toggleAcceptCallQueueCalls: (...args) =>\n        presence && presence.toggleAcceptCallQueueCalls(...args),\n      saveLocale:\n        localeSettings && ((locale) => localeSettings.saveLocale(locale)),\n    };\n  }\n}\n"],"file":"index.js"}