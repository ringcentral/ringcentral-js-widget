{"version":3,"sources":["modules/VideoUI/index.ts"],"names":["VideoUI","name","deps","rcVideo","locale","rateLimiter","connectivityMonitor","brand","options","_locale","_rcVideo","_rateLimiter","_connectivityMonitor","_brand","disabled","currentLocale","meeting","showAdminLock","enablePersonalMeeting","personalMeetingId","ready","personalMeeting","shortId","showSaveAsDefault","disableSaveAsDefault","isPreferencesChanged","brandName","isScheduling","connectivity","throttling","hasSettingsChanged","schedule","updateMeetingSettings","value","validatePasswordSettings","password","isSecret","switchUsePersonalMeetingId","usePersonalMeetingId","meetingInfo","opener","updateMeeting","id","createMeeting","updateHasSettingsChanged","init","RcUIModule"],"mappings":"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","sourcesContent":["import { Module } from 'ringcentral-integration/lib/di';\nimport Brand from 'ringcentral-integration/modules/Brand';\nimport { RcVideo } from 'ringcentral-integration/modules/RcVideo';\nimport { RcVMeetingModel } from 'ringcentral-integration/interfaces/Rcv.model';\n\nimport RcUIModule from '../../lib/RcUIModule';\n\n@Module({\n  name: 'VideoUI',\n  deps: ['RcVideo', 'Locale', 'RateLimiter', 'ConnectivityMonitor', 'Brand'],\n})\nexport default class VideoUI extends RcUIModule {\n  private _locale: any;\n  private _rcVideo: RcVideo;\n  private _rateLimiter: any;\n  private _connectivityMonitor: any;\n  private _brand: Brand;\n  constructor({\n    rcVideo,\n    locale,\n    rateLimiter,\n    connectivityMonitor,\n    brand,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._rcVideo = rcVideo;\n    this._locale = locale;\n    this._rateLimiter = rateLimiter;\n    this._connectivityMonitor = connectivityMonitor;\n    this._brand = brand;\n  }\n\n  getUIProps({ disabled }) {\n    return {\n      currentLocale: this._locale.currentLocale,\n      meeting: this._rcVideo.meeting,\n      showAdminLock: this._rcVideo.showAdminLock,\n      enablePersonalMeeting: this._rcVideo.enablePersonalMeeting,\n      personalMeetingId:\n        this._rcVideo.ready && this._rcVideo.personalMeeting?.shortId,\n      showSaveAsDefault: this._rcVideo.showSaveAsDefault,\n      disableSaveAsDefault: !this._rcVideo.isPreferencesChanged,\n      brandName: this._brand.name,\n      disabled:\n        this._rcVideo.isScheduling ||\n        disabled ||\n        !this._connectivityMonitor.connectivity ||\n        (this._rateLimiter && this._rateLimiter.throttling),\n      hasSettingsChanged: this._rcVideo.hasSettingsChanged,\n    };\n  }\n\n  getUIFunctions({ schedule }) {\n    return {\n      updateMeetingSettings: (value: RcVMeetingModel) =>\n        this._rcVideo.updateMeetingSettings(value),\n      validatePasswordSettings: (\n        password: string,\n        isSecret: boolean,\n      ): boolean => {\n        return this._rcVideo.validatePasswordSettings(password, isSecret);\n      },\n      switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) =>\n        this._rcVideo.switchUsePersonalMeetingId(usePersonalMeetingId),\n      schedule: async (meetingInfo: RcVMeetingModel, opener: Window) => {\n        if (schedule) {\n          await schedule(meetingInfo, opener);\n          return;\n        }\n        if (meetingInfo.usePersonalMeetingId) {\n          await this._rcVideo.updateMeeting(\n            this._rcVideo.personalMeeting.id,\n            meetingInfo,\n          );\n        } else {\n          await this._rcVideo.createMeeting(meetingInfo);\n        }\n      },\n      updateHasSettingsChanged: this._rcVideo.updateHasSettingsChanged,\n      init: () => {\n        this._rcVideo.init();\n      },\n    };\n  }\n}\n"],"file":"index.js"}