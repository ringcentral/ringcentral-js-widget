{"version":3,"sources":["modules/ContactListUI/ContactListUI.ts"],"names":["ContactListUI","name","deps","dep","optional","bottomNotice","bottomNoticeHeight","currentLocale","_deps","locale","contactSourceNames","contactList","sourceNames","contactGroups","searchSource","sourceFilter","searchString","searchFilter","isSearching","isFiltering","showSpinner","ready","currentSiteCode","extensionInfo","site","code","isMultipleSiteEnabled","onItemSelect","onVisitPage","onRefresh","getAvatarUrl","getPresence","contact","type","id","contactDetailsUI","showContactDetails","onSearchContact","applyFilters","filterStamp","RcModuleV2"],"mappings":"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","sourcesContent":["import { RcModuleV2 } from '@ringcentral-integration/core';\nimport { Module } from 'ringcentral-integration/lib/di';\nimport { Deps } from './ContactListUI.interface';\n\n@Module({\n  name: 'ContactListUI',\n  deps: [\n    'Locale',\n    'ExtensionInfo',\n    'ContactList',\n    { dep: 'ContactDetailsUI', optional: true },\n  ],\n})\nexport class ContactListUI extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({ deps });\n  }\n\n  getUIProps({ bottomNotice, bottomNoticeHeight }) {\n    return {\n      currentLocale: this._deps.locale.currentLocale,\n      contactSourceNames: this._deps.contactList.sourceNames || [],\n      contactGroups: this._deps.contactList.contactGroups || [],\n      searchSource: this._deps.contactList.sourceFilter,\n      searchString: this._deps.contactList.searchFilter,\n      isSearching: this._deps.contactList.isFiltering,\n      showSpinner: !(this._deps.locale.ready && this._deps.contactList.ready),\n      currentSiteCode: this._deps.extensionInfo?.site?.code ?? '',\n      isMultipleSiteEnabled:\n        this._deps.extensionInfo?.isMultipleSiteEnabled ?? false,\n      bottomNotice,\n      bottomNoticeHeight,\n    };\n  }\n\n  getUIFunctions({ onItemSelect, onVisitPage, onRefresh }) {\n    return {\n      getAvatarUrl(): string {\n        return null;\n      },\n      getPresence: (contact: any) => {\n        return this._deps.contactList.getPresence(contact);\n      },\n      onItemSelect:\n        onItemSelect ||\n        (async ({ type, id }: { type: string; id: string }) => {\n          if (this._deps.contactDetailsUI) {\n            this._deps.contactDetailsUI.showContactDetails({ type, id });\n          }\n        }),\n      onSearchContact: ({\n        searchSource,\n        searchString,\n      }: {\n        searchSource: string;\n        searchString: string;\n      }) => {\n        this._deps.contactList.applyFilters({\n          sourceFilter: searchSource,\n          searchFilter: searchString,\n        });\n      },\n      onVisitPage: () => {\n        if (typeof onVisitPage === 'function') {\n          onVisitPage();\n        }\n        // fire filtering contacts if not yet\n        if (!this._deps.contactList.filterStamp) {\n          this._deps.contactList.applyFilters();\n        }\n      },\n      onRefresh,\n    };\n  }\n}\n"],"file":"ContactListUI.js"}