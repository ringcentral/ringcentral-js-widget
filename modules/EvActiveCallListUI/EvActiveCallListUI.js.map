{"version":3,"sources":["modules/EvActiveCallListUI/EvActiveCallListUI.ts"],"names":["EvActiveCallListUI","name","deps","dep","optional","_modules","evCall","activityCallId","locale","routerInteraction","activeCallControl","evCallMonitor","modules","getCallList","callId","callIds","otherCallIds","getCallsMapping","callsMapping","getActiveCallList","call","hangupSession","sessionId","session","holdSession","state","id","currentLocale","callList","goBack","onHangup","onHold","onUnHold","RcUIModuleV2"],"mappings":"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","sourcesContent":["import { RcUIModuleV2, createSelector } from '@ringcentral-integration/core';\nimport { Module } from 'ringcentral-integration/lib/di';\n\nimport {\n  EvActiveCallListUIFunctions,\n  EvActiveCallListUIProps,\n} from '../../interfaces/EvActiveCallListUI.interface';\nimport { EvCallData } from '../../interfaces/EvData.interface';\nimport { ActiveCallListUI, DepsModules } from './EvActiveCallListUI.interface';\n\n@Module({\n  name: 'EvActiveCallListUI',\n  deps: [\n    'Locale',\n    'RouterInteraction',\n    'EvCall',\n    'ActiveCallControl',\n    'EvCallMonitor',\n    { dep: 'EvActiveCallListUIOptions', optional: true },\n  ],\n})\nclass EvActiveCallListUI extends RcUIModuleV2<DepsModules>\n  implements ActiveCallListUI {\n  get callId() {\n    return this._modules.evCall.activityCallId;\n  }\n\n  constructor({\n    locale,\n    routerInteraction,\n    evCall,\n    activeCallControl,\n    evCallMonitor,\n  }) {\n    super({\n      modules: {\n        locale,\n        routerInteraction,\n        evCall,\n        activeCallControl,\n        evCallMonitor,\n      },\n    });\n  }\n\n  getCallList = createSelector(\n    () => this.callId,\n    () => this._modules.evCallMonitor.callIds,\n    () => this._modules.evCallMonitor.otherCallIds,\n    () => this._modules.evCallMonitor.getCallsMapping(),\n    (callId, callIds, otherCallIds, callsMapping) => {\n      return this._modules.evCallMonitor.getActiveCallList(\n        callIds,\n        otherCallIds,\n        callsMapping,\n        callId,\n      );\n    },\n  );\n\n  onHangup(call: EvCallData) {\n    this._modules.activeCallControl.hangupSession({\n      sessionId: call.session.sessionId,\n    });\n  }\n\n  onHold(call: EvCallData) {\n    this._modules.activeCallControl.holdSession({\n      sessionId: call.session.sessionId,\n      state: true,\n    });\n  }\n\n  onUnHold(call: EvCallData) {\n    this._modules.activeCallControl.holdSession({\n      sessionId: call.session.sessionId,\n      state: false,\n    });\n  }\n\n  getUIProps({ id }): EvActiveCallListUIProps {\n    this._modules.evCall.activityCallId = id;\n    return {\n      currentLocale: this._modules.locale.currentLocale,\n      callList: this.getCallList(),\n    };\n  }\n\n  getUIFunctions(): EvActiveCallListUIFunctions {\n    return {\n      goBack: () => {\n        this._modules.routerInteraction.goBack();\n      },\n      onHangup: (call) => this.onHangup(call),\n      onHold: (call) => this.onHold(call),\n      onUnHold: (call) => this.onUnHold(call),\n    };\n  }\n}\n\nexport { EvActiveCallListUI };\n"],"file":"EvActiveCallListUI.js"}