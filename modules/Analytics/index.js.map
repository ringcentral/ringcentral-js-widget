{"version":3,"sources":["modules/Analytics/index.js"],"names":["INIT_TRACK_LIST","Analytics","deps","dep","optional","analyticsKey","appName","appVersion","brandCode","accountInfo","adapter","auth","call","callHistory","callMonitor","conference","conferenceCall","contactDetails","contacts","messageSender","messageStore","routerInteraction","userGuide","webphone","locale","meeting","rcVideo","useLog","lingerThreshold","extensionInfo","options","actionTypes","_analyticsKey","_appName","_appVersion","_brandCode","_accountInfo","_adapter","_auth","_call","_callHistory","_callMonitor","_conference","_conferenceCall","_contactDetails","_contacts","_messageSender","_messageStore","_router","_userGuide","_webphone","_locale","_meeting","_rcVideo","_extensionInfo","_reducer","_segment","_trackList","_useLog","_lingerThreshold","_logs","_lingerTimeout","store","subscribe","_onStateChange","userId","props","analytics","identify","event","properties","trackProps","track","push","timeStamp","Date","toISOString","blob","Blob","JSON","stringify","type","router","eventPostfix","brand","pending","dispatch","init","load","initSuccess","ready","lastActions","length","_promise","_processActions","forEach","action","key","clear","methodNames","loginSuccess","ownerId","logout","accountId","id","servicePlanId","servicePlan","edition","CRMEnabled","_rolesAndPermissions","tierEnabled","connect","callSettingMode","callingModes","connectSuccess","registered","send","sendOver","createCallLog","createSMSLog","clickToDial","clickToSMS","viewEntity","createEntity","editCallLog","editSMSLog","locationChange","clearTimeout","path","payload","pathname","target","_getTrackTarget","trackNavigation","setTimeout","currentPath","trackLinger","callAnswer","isOnTransfer","updateSessions","clickToCall","fromType","removeMessage","markMessages","inviteWithText","updateAdditionalNumbers","joinAsHost","updateCarousel","curIdx","playing","allCallsClickHoldTrack","allCallsClickHangupTrack","callItemClickTrack","callControlClickAddTrack","callControlClickMergeTrack","Object","values","state","mergingPair","mergeControlClickHangupTrack","callsOnHoldClickAddTrack","callsOnHoldClickMergeTrack","confirmMergeClickCloseTrack","confirmMergeClickMergeTrack","removeParticipantClickRemoveTrack","removeParticipantClickCancelTrack","participantListClickHangupTrack","callControlClickParticipantAreaClickTrack","callsOnHoldClickHangupTrack","routes","split","formatRoute","needMatchSecondRoutes","indexOf","targets","find","undefined","initScheduling","initCreating","trackSchedule","global","lastAction","status","moduleStatuses","Brand","currentLocale","browserLocale","info","RcModule"],"mappings":"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","sourcesContent":["import RcModule from '../../lib/RcModule';\nimport { Module } from '../../lib/di';\nimport sleep from '../../lib/sleep';\nimport saveBlob from '../../lib/saveBlob';\nimport moduleStatuses from '../../enums/moduleStatuses';\nimport actionTypes from './actionTypes';\nimport getAnalyticsReducer from './getAnalyticsReducer';\n\nimport { Segment } from '../../lib/Analytics';\nimport callingModes from '../CallingSettings/callingModes';\n\nexport const INIT_TRACK_LIST = [\n  '_authentication',\n  '_logout',\n  '_callAttempt',\n  '_callConnected',\n  '_webRTCRegistration',\n  '_smsAttempt',\n  '_smsSent',\n  '_logCall',\n  '_logSMS',\n  '_clickToDial',\n  '_clickToSMS',\n  '_viewEntity',\n  '_createEntity',\n  '_editCallLog',\n  '_editSMSLog',\n  '_navigate',\n  '_inboundCall',\n  '_coldTransfer',\n  '_textClickToDial',\n  '_voicemailClickToDial',\n  '_voicemailClickToSMS',\n  '_voicemailDelete',\n  '_voicemailFlag',\n  '_contactDetailClickToDial',\n  '_contactDetailClickToSMS',\n  '_callHistoryClickToDial',\n  '_callHistoryClickToSMS',\n  '_conferenceInviteWithText',\n  '_conferenceAddDialInNumber',\n  '_conferenceJoinAsHost',\n  '_showWhatsNew',\n  '_allCallsClickHangup',\n  '_allCallsClickHold',\n  '_allCallsCallItemClick',\n  '_callControlClickAdd',\n  '_mergeCallControlClickMerge',\n  '_mergeCallControlClickHangup',\n  '_callsOnHoldClickHangup',\n  '_callsOnHoldClickAdd',\n  '_callsOnHoldClickMerge',\n  '_confirmMergeClickClose',\n  '_confirmMergeClickMerge',\n  '_removeParticipantClickRemove',\n  '_removeParticipantClickCancel',\n  '_participantListClickHangup',\n  '_callControlClickMerge',\n  '_callControlClickParticipantArea',\n  '_accountInfoReady',\n  '_schedule',\n];\n\n// TODO: refactoring the module against `https://docs.google.com/spreadsheets/d/1xufV6-C-RJR6OJgwFYHYzNQwhIdN4BXXCo8ABs7RT-8/edit#gid=1480480736`\n/**\n * @class\n * @description Analytics module.\n */\n@Module({\n  deps: [\n    { dep: 'Auth', optional: true },\n    { dep: 'Call', optional: true },\n    { dep: 'Webphone', optional: true },\n    { dep: 'Contacts', optional: true },\n    { dep: 'MessageSender', optional: true },\n    { dep: 'MessageStore', optional: true },\n    { dep: 'ContactDetails', optional: true },\n    { dep: 'CallHistory', optional: true },\n    { dep: 'Conference', optional: true },\n    { dep: 'RouterInteraction', optional: true },\n    { dep: 'AnalyticsAdapter', optional: true },\n    { dep: 'AnalyticsOptions', optional: true },\n    { dep: 'UserGuide', optional: true },\n    { dep: 'CallMonitor', optional: true },\n    { dep: 'ConferenceCall', optional: true },\n    { dep: 'AccountInfo', optional: true },\n    { dep: 'Locale', optional: true },\n    { dep: 'Meeting', optional: true },\n    { dep: 'RcVideo', optional: true },\n    { dep: 'extensionInfo', optional: true },\n  ],\n})\nexport default class Analytics extends RcModule {\n  constructor({\n    // config\n    analyticsKey,\n    appName,\n    appVersion,\n    brandCode,\n    // modules\n    accountInfo,\n    adapter,\n    auth,\n    call,\n    callHistory,\n    callMonitor,\n    conference,\n    conferenceCall,\n    contactDetails,\n    contacts,\n    messageSender,\n    messageStore,\n    routerInteraction,\n    userGuide,\n    webphone,\n    locale,\n    meeting,\n    rcVideo,\n    useLog = false,\n    lingerThreshold = 1000,\n    extensionInfo,\n    ...options\n  }) {\n    super({\n      ...options,\n      actionTypes,\n    });\n\n    // config\n    this._analyticsKey = analyticsKey;\n    this._appName = appName;\n    this._appVersion = appVersion;\n    this._brandCode = brandCode;\n\n    // modules\n    this._accountInfo = accountInfo;\n    this._adapter = adapter;\n    this._auth = auth;\n    this._call = call;\n    this._callHistory = callHistory;\n    this._callMonitor = callMonitor;\n    this._conference = conference;\n    this._conferenceCall = conferenceCall;\n    this._contactDetails = contactDetails;\n    this._contacts = contacts;\n    this._messageSender = messageSender;\n    this._messageStore = messageStore;\n    this._router = routerInteraction;\n    this._userGuide = userGuide;\n    this._webphone = webphone;\n    this._locale = locale;\n    this._meeting = meeting;\n    this._rcVideo = rcVideo;\n    this._extensionInfo = extensionInfo;\n\n    // init\n    this._reducer = getAnalyticsReducer(this.actionTypes);\n    this._segment = Segment();\n    this._trackList = INIT_TRACK_LIST;\n    this._useLog = useLog;\n    this._lingerThreshold = lingerThreshold;\n    this._logs = [];\n    this._lingerTimeout = null;\n  }\n\n  initialize() {\n    this.store.subscribe(() => this._onStateChange());\n  }\n\n  identify({ userId, ...props }) {\n    if (this.analytics) {\n      this.analytics.identify(userId, props);\n    }\n  }\n\n  track(event, { ...properties }) {\n    const trackProps = {\n      ...this.trackProps,\n      ...properties,\n    };\n    if (this.analytics) {\n      this.analytics.track(event, trackProps);\n    }\n    if (this._useLog) {\n      this._logs.push({\n        timeStamp: new Date().toISOString(),\n        event,\n        trackProps,\n      });\n    }\n  }\n\n  downloadLogs() {\n    if (!this._useLog) {\n      return;\n    }\n\n    const blob = new Blob([JSON.stringify(this._logs, null, 2)], {\n      type: 'application/json',\n    });\n\n    saveBlob('logs.json', blob);\n  }\n\n  trackNavigation({ router, eventPostfix }) {\n    const trackProps = {\n      router,\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n    };\n    this.track(`Navigation: Click/${eventPostfix}`, trackProps);\n  }\n\n  trackLinger({ router, eventPostfix }) {\n    const trackProps = {\n      router,\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n    };\n    this.track(`Navigation: View/${eventPostfix}`, trackProps);\n  }\n\n  trackSchedule({ router, eventPostfix }) {\n    const trackProps = {\n      router,\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n    };\n    this.track(\n      `Meeting: Click Schedule/${eventPostfix} schedule page`,\n      trackProps,\n    );\n  }\n\n  async _onStateChange() {\n    if (this.pending) {\n      this.store.dispatch({\n        type: this.actionTypes.init,\n      });\n      if (this._analyticsKey) {\n        this._segment.load(this._analyticsKey);\n      }\n      this.store.dispatch({\n        type: this.actionTypes.initSuccess,\n      });\n    }\n    if (this.ready && this.lastActions.length && !this._promise) {\n      this._promise = this._processActions();\n    }\n  }\n\n  async _processActions() {\n    if (this.lastActions.length) {\n      await sleep(300);\n      this.lastActions.forEach((action) => {\n        this._trackList.forEach((key) => {\n          this[key](action);\n        });\n      });\n      this._promise = null;\n      this.store.dispatch({\n        type: this.actionTypes.clear,\n      });\n    }\n  }\n\n  /**\n   * Append more action to track\n   * First, Inherit this class and declare channel specific method on it\n   * Then append more method name to track using this method\n   * @param {string[]} methodNames\n   */\n  appendTrackList(methodNames) {\n    this._trackList.push(...methodNames);\n  }\n\n  _authentication(action) {\n    if (this._auth && this._auth.actionTypes.loginSuccess === action.type) {\n      this.identify({\n        userId: this._auth.ownerId,\n      });\n      this.track('Authentication');\n    }\n  }\n\n  _logout(action) {\n    if (this._auth && this._auth.actionTypes.logout === action.type) {\n      this.track('Logout');\n    }\n  }\n\n  _accountInfoReady(action) {\n    if (\n      this._accountInfo &&\n      this._accountInfo.actionTypes.initSuccess === action.type\n    ) {\n      this.identify({\n        userId: this._accountInfo._auth.ownerId,\n        accountId: this._accountInfo.id,\n        servicePlanId: this._accountInfo.servicePlan.id,\n        edition: this._accountInfo.servicePlan.edition,\n        CRMEnabled: this._accountInfo._rolesAndPermissions.tierEnabled,\n      });\n    }\n  }\n\n  _callAttempt(action) {\n    if (this._call && this._call.actionTypes.connect === action.type) {\n      if (action.callSettingMode === callingModes.webphone) {\n        this.track('Call Attempt WebRTC');\n      } else {\n        this.track('Call Attempt', {\n          callSettingMode: action.callSettingMode,\n        });\n      }\n    }\n  }\n\n  _callConnected(action) {\n    if (this._call && this._call.actionTypes.connectSuccess === action.type) {\n      if (action.callSettingMode === callingModes.webphone) {\n        this.track('Outbound WebRTC Call Connected');\n      } else {\n        this.track('Outbound Call Connected', {\n          callSettingMode: action.callSettingMode,\n        });\n      }\n    }\n  }\n\n  _webRTCRegistration(action) {\n    if (\n      this._webphone &&\n      this._webphone.actionTypes.registered === action.type\n    ) {\n      this.track('WebRTC registration');\n    }\n  }\n\n  _smsAttempt(action) {\n    if (\n      this._messageSender &&\n      this._messageSender.actionTypes.send === action.type\n    ) {\n      this.track('SMS Attempt');\n    }\n  }\n\n  _smsSent(action) {\n    if (\n      this._messageSender &&\n      this._messageSender.actionTypes.sendOver === action.type\n    ) {\n      this.track('SMS Sent');\n    }\n  }\n\n  _logCall(action) {\n    if (\n      this._adapter &&\n      this._adapter.actionTypes.createCallLog === action.type\n    ) {\n      this.track('Log Call');\n    }\n  }\n\n  _logSMS(action) {\n    if (\n      this._adapter &&\n      this._adapter.actionTypes.createSMSLog === action.type\n    ) {\n      this.track('Log SMS');\n    }\n  }\n\n  _clickToDial(action) {\n    if (\n      this._adapter &&\n      this._adapter.actionTypes.clickToDial === action.type\n    ) {\n      this.track('Click To Dial');\n    }\n  }\n\n  _clickToSMS(action) {\n    if (this._adapter && this._adapter.actionTypes.clickToSMS === action.type) {\n      this.track('Click To SMS');\n    }\n  }\n\n  _viewEntity(action) {\n    if (this._adapter && this._adapter.actionTypes.viewEntity === action.type) {\n      this.track('View Entity Details');\n    }\n  }\n\n  _createEntity(action) {\n    if (\n      this._adapter &&\n      this._adapter.actionTypes.createEntity === action.type\n    ) {\n      this.track('Add Entity');\n    }\n  }\n\n  _editCallLog(action) {\n    if (\n      this._adapter &&\n      this._adapter.actionTypes.editCallLog === action.type\n    ) {\n      this.track('Edit Call Log');\n    }\n  }\n\n  _editSMSLog(action) {\n    if (this._adapter && this._adapter.actionTypes.editSMSLog === action.type) {\n      this.track('Edit SMS Log');\n    }\n  }\n\n  _navigate(action) {\n    if (\n      this._router &&\n      this._router.actionTypes.locationChange === action.type\n    ) {\n      if (this._lingerTimeout) {\n        clearTimeout(this._lingerTimeout);\n      }\n      const path = action.payload && action.payload.pathname;\n      const target = this._getTrackTarget(path);\n      if (target) {\n        this.trackNavigation({\n          ...target,\n        });\n      }\n\n      this._lingerTimeout = setTimeout(() => {\n        if (this._router.currentPath !== path) {\n          return;\n        }\n        this._lingerTimeout = null;\n        this.trackLinger({\n          ...target,\n        });\n      }, this._lingerThreshold);\n    }\n  }\n\n  _inboundCall(action) {\n    if (\n      this._webphone &&\n      this._webphone.actionTypes.callAnswer === action.type\n    ) {\n      this.track('Inbound WebRTC Call Connected');\n    }\n  }\n\n  _coldTransfer(action) {\n    if (\n      this._webphone &&\n      this._webphone.isOnTransfer === true &&\n      this._webphone.actionTypes.updateSessions === action.type\n    ) {\n      this.track('Cold Transfer Call');\n    }\n  }\n\n  _textClickToDial(action) {\n    if (\n      this._messageStore &&\n      this._messageStore.actionTypes.clickToCall === action.type &&\n      (action.fromType === 'Pager' || action.fromType === 'SMS')\n    ) {\n      this.track('Click To Dial (Text List)');\n    }\n  }\n\n  _voicemailClickToDial(action) {\n    if (\n      this._messageStore &&\n      this._messageStore.actionTypes.clickToCall === action.type &&\n      action.fromType === 'VoiceMail'\n    ) {\n      this.track('Click To Dial (Voicemail List)');\n    }\n  }\n\n  _voicemailClickToSMS(action) {\n    if (\n      this._messageStore &&\n      this._messageStore.actionTypes.clickToSMS === action.type\n    ) {\n      this.track('Click to SMS (Voicemail List)');\n    }\n  }\n\n  _voicemailDelete(action) {\n    if (\n      this._messageStore &&\n      this._messageStore.actionTypes.removeMessage === action.type\n    ) {\n      this.track('Delete Voicemail');\n    }\n  }\n\n  _voicemailFlag(action) {\n    if (\n      this._messageStore &&\n      this._messageStore.actionTypes.markMessages === action.type\n    ) {\n      this.track('Flag Voicemail');\n    }\n  }\n\n  _contactDetailClickToDial(action) {\n    if (\n      this._contactDetails &&\n      this._contactDetails.actionTypes.clickToCall === action.type\n    ) {\n      this.track('Click To Dial (Contact Details)');\n    }\n  }\n\n  _contactDetailClickToSMS(action) {\n    if (\n      this._contactDetails &&\n      this._contactDetails.actionTypes.clickToSMS === action.type\n    ) {\n      this.track('Click To SMS (Contact Details)');\n    }\n  }\n\n  _callHistoryClickToDial(action) {\n    if (\n      this._callHistory &&\n      this._callHistory.actionTypes.clickToCall === action.type\n    ) {\n      this.track('Click To dial (Call History)');\n    }\n  }\n\n  _callHistoryClickToSMS(action) {\n    if (\n      this._callHistory &&\n      this._callHistory.actionTypes.clickToSMS === action.type\n    ) {\n      this.track('Click To SMS (Call History)');\n    }\n  }\n\n  _conferenceInviteWithText(action) {\n    if (\n      this._conference &&\n      this._conference.actionTypes.inviteWithText === action.type\n    ) {\n      this.track('Invite With Text (Conference)');\n    }\n  }\n\n  _conferenceAddDialInNumber(action) {\n    if (\n      this._conference &&\n      this._conference.actionTypes.updateAdditionalNumbers === action.type\n    ) {\n      this.track('Select Additional Dial-in Number (Conference)');\n    }\n  }\n\n  _conferenceJoinAsHost(action) {\n    if (\n      this._conference &&\n      this._conference.actionTypes.joinAsHost === action.type\n    ) {\n      this.track('Join As Host (Conference)');\n    }\n  }\n\n  _showWhatsNew(action) {\n    if (\n      this._userGuide &&\n      this._userGuide.actionTypes.updateCarousel === action.type &&\n      action.curIdx === 0 &&\n      action.playing\n    ) {\n      this.track(\"What's New\");\n    }\n  }\n\n  _allCallsClickHold(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.allCallsClickHoldTrack === action.type\n    ) {\n      this.track('Click Hold (All Calls)');\n    }\n  }\n\n  _allCallsClickHangup(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.allCallsClickHangupTrack === action.type\n    ) {\n      this.track('Click Hangup (All Calls)');\n    }\n  }\n\n  _allCallsCallItemClick(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callItemClickTrack === action.type\n    ) {\n      this.track('Click Call Item (All Calls)');\n    }\n  }\n\n  _callControlClickAdd(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callControlClickAddTrack === action.type\n    ) {\n      this.track('Click Add (Call Control)');\n    }\n  }\n\n  _callControlClickMerge(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callControlClickMergeTrack ===\n        action.type &&\n      !Object.values(this._conferenceCall.state.mergingPair).length\n    ) {\n      this.track('Click Merge (Call Control)');\n    }\n  }\n\n  _mergeCallControlClickMerge(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callControlClickMergeTrack ===\n        action.type &&\n      Object.values(this._conferenceCall.state.mergingPair).length\n    ) {\n      this.track('Click Merge (Merge Call Control)');\n    }\n  }\n\n  _mergeCallControlClickHangup(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.mergeControlClickHangupTrack === action.type\n    ) {\n      this.track('Click Hangup (Merge Call Control)');\n    }\n  }\n\n  _callsOnHoldClickAdd(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callsOnHoldClickAddTrack === action.type\n    ) {\n      this.track('Click Add (Calls OnHold)');\n    }\n  }\n\n  _callsOnHoldClickMerge(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callsOnHoldClickMergeTrack === action.type\n    ) {\n      this.track('Click Merge (Calls OnHold)');\n    }\n  }\n\n  _confirmMergeClickClose(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.confirmMergeClickCloseTrack === action.type\n    ) {\n      this.track('Click Close (ConfirmMerge Modal)');\n    }\n  }\n\n  _confirmMergeClickMerge(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.confirmMergeClickMergeTrack === action.type\n    ) {\n      this.track('Click Merge (ConfirmMerge Modal)');\n    }\n  }\n\n  _removeParticipantClickRemove(action) {\n    if (\n      this._conferenceCall &&\n      this._conferenceCall.actionTypes.removeParticipantClickRemoveTrack ===\n        action.type\n    ) {\n      this.track('Click Remove (RemoveParticipants Modal)');\n    }\n  }\n\n  _removeParticipantClickCancel(action) {\n    if (\n      this._conferenceCall &&\n      this._conferenceCall.actionTypes.removeParticipantClickCancelTrack ===\n        action.type\n    ) {\n      this.track('Cancel Remove (RemoveParticipants Modal)');\n    }\n  }\n\n  _participantListClickHangup(action) {\n    if (\n      this._conferenceCall &&\n      this._conferenceCall.actionTypes.participantListClickHangupTrack ===\n        action.type\n    ) {\n      this.track('Click Hangup (Participant List)');\n    }\n  }\n\n  _callControlClickParticipantArea(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes\n        .callControlClickParticipantAreaClickTrack === action.type\n    ) {\n      this.track('Click Participant Area (Call Control)');\n    }\n  }\n\n  _callsOnHoldClickHangup(action) {\n    if (\n      this._callMonitor &&\n      this._callMonitor.actionTypes.callsOnHoldClickHangupTrack === action.type\n    ) {\n      this.track('Click Hangup (Calls OnHold)');\n    }\n  }\n\n  _getTrackTarget(path) {\n    if (path) {\n      const routes = path.split('/');\n      let formatRoute = null;\n      const needMatchSecondRoutes = ['calls'];\n      if (\n        routes.length >= 3 &&\n        needMatchSecondRoutes.indexOf(routes[1]) !== -1\n      ) {\n        formatRoute = `/${routes[1]}/${routes[2]}`;\n      } else if (routes.length > 1) {\n        formatRoute = `/${routes[1]}`;\n      }\n\n      const targets = [\n        {\n          eventPostfix: 'Dialer',\n          router: '/dialer',\n        },\n        {\n          eventPostfix: 'Compose SMS',\n          router: '/composeText',\n        },\n        {\n          eventPostfix: 'Messages',\n          router: '/messages',\n        },\n        {\n          eventPostfix: 'Conversation',\n          router: '/conversations',\n        },\n        {\n          eventPostfix: 'Call History',\n          router: '/history',\n        },\n        {\n          eventPostfix: 'Call List',\n          router: '/calls',\n        },\n        {\n          eventPostfix: 'Settings',\n          router: '/settings',\n        },\n        {\n          eventPostfix: 'Conference',\n          router: '/conference',\n        },\n        {\n          eventPostfix: 'Meeting',\n          router: '/meeting',\n        },\n        {\n          eventPostfix: 'Contacts',\n          router: '/contacts',\n        },\n        {\n          eventPostfix: 'Call Control',\n          router: '/calls/active',\n        },\n        {\n          eventPostfix: 'Transfer',\n          router: '/transfer',\n        },\n      ];\n      return targets.find((target) => formatRoute === target.router);\n    }\n    return undefined;\n  }\n\n  _schedule(action) {\n    if (\n      ((this._meeting &&\n        this._meeting.actionTypes.initScheduling === action.type) ||\n        (this._rcVideo &&\n          this._rcVideo.actionTypes.initCreating === action.type)) &&\n      this._router\n    ) {\n      this.trackSchedule(this._getTrackTarget(this._router.currentPath));\n    }\n  }\n\n  get analytics() {\n    return global.analytics;\n  }\n\n  get lastActions() {\n    return this.state.lastAction;\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get ready() {\n    return this.status === moduleStatuses.ready;\n  }\n\n  get pending() {\n    return this.status === moduleStatuses.pending;\n  }\n\n  get trackProps() {\n    return {\n      'App Name': this._appName,\n      'App Version': this._appVersion,\n      Brand: this._brandCode,\n      'App Language': this._locale ? this._locale.currentLocale : '',\n      'Browser Language': this._locale ? this._locale.browserLocale : '',\n      'Extension Type': this._extensionInfo\n        ? this._extensionInfo.info.type\n        : '',\n    };\n  }\n}\n"],"file":"index.js"}