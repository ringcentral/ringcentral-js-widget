{"version":3,"sources":["modules/Analytics/Analytics.ts"],"names":["warn","console","TRACK_LIST","track","tagName","_track","prototype","property","descriptor","value","options","push","funcName","funcImpl","configurable","replace","existActionIndex","findIndex","item","splice","DEFAULT_TAG_NAME","tracking","Analytics","name","deps","dep","optional","analyticsKey","appName","appVersion","brandCode","adapter","auth","call","callingSettings","accountInfo","extensionInfo","rolesAndPermissions","callHistory","callMonitor","conference","conferenceCall","contactDetailsUI","messageSender","messageStore","routerInteraction","userGuide","webphone","locale","meeting","rcVideo","dialerUI","useLog","lingerThreshold","callLogSection","activeCallControl","actionTypes","analyticsActionTypes","_analyticsKey","_appName","_appVersion","_brandCode","_adapter","_auth","_call","_callingSettings","_accountInfo","_extensionInfo","_rolesAndPermissions","_callHistory","_callMonitor","_conference","_conferenceCall","_contactDetailsUI","_messageSender","_messageStore","_routerInteraction","_userGuide","_webphone","_locale","_meeting","_rcVideo","_dialerUI","_segment","_trackList","_useLog","_logs","_lingerThreshold","_lingerTimeout","_promise","_callLogSection","_activeCallControl","_reducer","userId","props","analytics","identify","event","properties","trackProps","timeStamp","Date","toISOString","blob","Blob","JSON","stringify","type","router","eventPostfix","brand","pending","store","dispatch","init","load","initSuccess","ready","lastActions","length","_processActions","forEach","action","processAction","clear","trackList","loginSuccess","_identify","ownerId","logout","accountId","id","servicePlanId","servicePlan","edition","CRMEnabled","tierEnabled","connect","callSettingMode","callingModes","connectSuccess","registered","send","sendOver","sendError","createCallLog","createSMSLog","clickToDial","callWith","clickToSMS","viewEntity","createEntity","editCallLog","editSMSLog","locationChange","path","payload","pathname","target","_getTrackTarget","trackNavigation","clearTimeout","setTimeout","currentPath","trackLinger","callAnswer","isOnTransfer","updateSessions","clickToCall","fromType","removeMessage","markMessages","inviteWithText","updateAdditionalNumbers","joinAsHost","updateCarousel","curIdx","playing","allCallsClickHoldTrack","allCallsClickHangupTrack","callItemClickTrack","callControlClickAddTrack","callControlClickMergeTrack","Object","values","state","mergingPair","mergeControlClickHangupTrack","inboundCallConnectedTrack","outboundCallConnectedTrack","callsOnHoldClickAddTrack","callsOnHoldClickMergeTrack","confirmMergeClickCloseTrack","confirmMergeClickMergeTrack","removeParticipantClickRemoveTrack","removeParticipantClickCancelTrack","participantListClickHangupTrack","callControlClickParticipantAreaClickTrack","callsOnHoldClickHangupTrack","routes","split","formatRoute","needMatchSecondRoutes","indexOf","targets","find","initScheduling","initCreating","trackSchedule","showLogSection","expandNotification","mute","includes","unmute","hold","unhold","transfer","show","hangUp","callingMode","ringout","phoneNumber","global","status","moduleStatuses","currentLocale","browserLocale","info","RcModule"],"mappings":"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","sourcesContent":["import RcModule from '../../lib/RcModule';\nimport { Module } from '../../lib/di';\nimport sleep from '../../lib/sleep';\nimport saveBlob from '../../lib/saveBlob';\nimport moduleStatuses from '../../enums/moduleStatuses';\nimport { analyticsActionTypes, AnalyticsActionTypes } from './actionTypes';\nimport getAnalyticsReducer from './getAnalyticsReducer';\n\nimport { Segment } from '../../lib/Analytics';\nimport callingModes from '../CallingSettings/callingModes';\n\nexport interface TrackProps {\n  appName: string;\n  appVersion: string;\n  brand: string;\n  'App Language': string;\n  'Browser Language': string;\n  'Extension Type': string;\n}\n\nexport interface TrackTarget {\n  eventPostfix: string;\n  router: string;\n}\n\nexport interface TrackPayload {\n  pathname: string;\n}\n\nexport interface TrackAction {\n  type: string;\n  payload?: TrackPayload;\n  curIdx?: number;\n  playing?: boolean;\n  fromType?: string;\n  callSettingMode?: string;\n  phoneNumber?: string;\n}\n\nexport interface TrackLog {\n  timeStamp: string;\n  event: string;\n  trackProps: TrackProps;\n}\n\nexport interface TrackImpl {\n  (action: TrackAction): void;\n}\n\nexport interface TrackItem {\n  tagName: string;\n  funcName: string;\n  funcImpl: TrackImpl;\n}\n\nfunction warn() {\n  console.warn('Do NOT call this directly.');\n}\n\nconst TRACK_LIST: TrackItem[] = [];\n\nexport function track(tagName: string) {\n  return function _track(\n    prototype: any,\n    property: string,\n    descriptor: TypedPropertyDescriptor<TrackImpl>,\n  ) {\n    const { value, ...options } = descriptor;\n    if (typeof value === 'function') {\n      TRACK_LIST.push({\n        tagName,\n        funcName: property,\n        funcImpl: value,\n      });\n    }\n    return {\n      ...options,\n      value: warn,\n      configurable: false,\n    };\n  };\n}\n\nexport function replace(\n  prototype: any,\n  property: string,\n  descriptor: TypedPropertyDescriptor<TrackImpl>,\n) {\n  const existActionIndex = TRACK_LIST.findIndex(\n    (item) => property === item.funcName,\n  );\n  existActionIndex !== -1 && TRACK_LIST.splice(existActionIndex, 1);\n}\n\nexport const DEFAULT_TAG_NAME = 'default';\nexport const tracking = track(DEFAULT_TAG_NAME);\n\n// TODO: refactoring the module against `https://docs.google.com/spreadsheets/d/1xufV6-C-RJR6OJgwFYHYzNQwhIdN4BXXCo8ABs7RT-8/edit#gid=1480480736`\n/**\n * @class\n * @description Analytics module.\n */\n@Module({\n  name: 'Analytics',\n  deps: [\n    { dep: 'AnalyticsOptions', optional: true },\n    { dep: 'Adapter', optional: true },\n    { dep: 'Auth', optional: true },\n    { dep: 'Call', optional: true },\n    { dep: 'CallingSettings', optional: true },\n    { dep: 'AccountInfo', optional: true },\n    { dep: 'ExtensionInfo', optional: true },\n    { dep: 'RolesAndPermissions', optional: true },\n    { dep: 'CallHistory', optional: true },\n    { dep: 'CallMonitor', optional: true },\n    { dep: 'Conference', optional: true },\n    { dep: 'ConferenceCall', optional: true },\n    { dep: 'ContactDetailsUI', optional: true },\n    { dep: 'MessageSender', optional: true },\n    { dep: 'MessageStore', optional: true },\n    { dep: 'RouterInteraction', optional: true },\n    { dep: 'UserGuide', optional: true },\n    { dep: 'Webphone', optional: true },\n    { dep: 'Locale', optional: true },\n    { dep: 'Meeting', optional: true },\n    { dep: 'RcVideo', optional: true },\n    { dep: 'CallLogSection', optional: true },\n    { dep: 'ActiveCallControl', optional: true },\n    { dep: 'DialerUI', optional: true },\n  ],\n})\nexport class Analytics extends RcModule<\n  Record<string, any>,\n  AnalyticsActionTypes\n> {\n  // TODO: add state interface\n  private _analyticsKey: string;\n  private _appName: string;\n  private _appVersion: string;\n  private _brandCode: string;\n\n  protected _adapter: any;\n  protected _auth: any;\n  protected _call: any;\n  protected _callingSettings: any;\n  protected _accountInfo: any;\n  protected _extensionInfo: any;\n  protected _rolesAndPermissions: any;\n  protected _callHistory: any;\n  protected _callMonitor: any;\n  protected _conference: any;\n  protected _conferenceCall: any;\n  protected _contactDetailsUI: any;\n  protected _messageSender: any;\n  protected _messageStore: any;\n  protected _routerInteraction: any;\n  protected _userGuide: any;\n  protected _webphone: any;\n  protected _locale: any;\n  protected _meeting: any;\n  protected _rcVideo: any;\n  private _dialerUI: any;\n\n  private _segment: any;\n  private _trackList: TrackItem[];\n  private _useLog: boolean;\n  private _logs: TrackLog[] = [];\n  private _lingerThreshold: number;\n\n  private _lingerTimeout?: NodeJS.Timeout = null;\n  private _promise?: Promise<void>;\n  private _callLogSection: any;\n  private _activeCallControl: any;\n\n  constructor({\n    // config\n    analyticsKey,\n    appName,\n    appVersion,\n    brandCode,\n    // modules\n    adapter,\n    auth,\n    call,\n    callingSettings,\n    accountInfo,\n    extensionInfo,\n    rolesAndPermissions,\n    callHistory,\n    callMonitor,\n    conference,\n    conferenceCall,\n    contactDetailsUI,\n    messageSender,\n    messageStore,\n    routerInteraction,\n    userGuide,\n    webphone,\n    locale,\n    meeting,\n    rcVideo,\n    dialerUI,\n    // settinigs\n    useLog = false,\n    lingerThreshold = 1000,\n    callLogSection,\n    activeCallControl,\n    ...options\n  }: Record<string, any>) {\n    // TODO: fix type from new modules based on RcModulesV2\n    super({\n      ...options,\n      actionTypes: analyticsActionTypes,\n    });\n\n    // config\n    this._analyticsKey = analyticsKey;\n    this._appName = appName;\n    this._appVersion = appVersion;\n    this._brandCode = brandCode;\n\n    // modules\n    this._adapter = adapter;\n    this._auth = auth;\n    this._call = call;\n    this._callingSettings = callingSettings;\n    this._accountInfo = accountInfo;\n    this._extensionInfo = extensionInfo;\n    this._rolesAndPermissions = rolesAndPermissions;\n    this._callHistory = callHistory;\n    this._callMonitor = callMonitor;\n    this._conference = conference;\n    this._conferenceCall = conferenceCall;\n    this._contactDetailsUI = contactDetailsUI;\n    this._messageSender = messageSender;\n    this._messageStore = messageStore;\n    this._routerInteraction = routerInteraction;\n    this._userGuide = userGuide;\n    this._webphone = webphone;\n    this._locale = locale;\n    this._meeting = meeting;\n    this._rcVideo = rcVideo;\n    this._callLogSection = callLogSection;\n    this._activeCallControl = activeCallControl;\n    this._dialerUI = dialerUI;\n\n    // init\n    this._reducer = getAnalyticsReducer(this.actionTypes);\n    this._segment = Segment();\n    this._trackList = [...TRACK_LIST];\n    this._useLog = useLog;\n    this._lingerThreshold = lingerThreshold;\n  }\n\n  private _identify({\n    userId,\n    ...props\n  }: { userId: string } & Record<string, any>) {\n    if (this.analytics) {\n      this.analytics.identify(userId, props);\n    }\n  }\n\n  track(event: string, properties: any = {}) {\n    if (!this.analytics) {\n      return;\n    }\n    const trackProps: TrackProps = {\n      ...this.trackProps,\n      ...properties,\n    };\n    this.analytics.track(event, trackProps);\n    if (this._useLog) {\n      this._logs.push({\n        timeStamp: new Date().toISOString(),\n        event,\n        trackProps,\n      });\n    }\n  }\n\n  downloadLogs() {\n    if (!this._useLog) {\n      return;\n    }\n\n    const blob = new Blob([JSON.stringify(this._logs, null, 2)], {\n      type: 'application/json',\n    });\n\n    saveBlob('logs.json', blob);\n  }\n\n  trackNavigation({ router, eventPostfix }: TrackTarget) {\n    const trackProps = {\n      router,\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n    };\n    this.track(`Navigation: Click/${eventPostfix}`, trackProps);\n  }\n\n  trackLinger({ router, eventPostfix }: TrackTarget) {\n    const trackProps = {\n      router,\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n    };\n    this.track(`Navigation: View/${eventPostfix}`, trackProps);\n  }\n\n  trackSchedule({ router }: TrackTarget) {\n    const trackProps = {\n      router,\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n    };\n    this.track('Meeting: Click Schedule/Meeting schedule page', trackProps);\n  }\n\n  async _onStateChange() {\n    if (this.pending) {\n      this.store.dispatch({\n        type: this.actionTypes.init,\n      });\n      if (this._analyticsKey) {\n        this._segment.load(this._analyticsKey);\n      }\n      this.store.dispatch({\n        type: this.actionTypes.initSuccess,\n      });\n    }\n    if (this.ready && this.lastActions.length && !this._promise) {\n      this._promise = this._processActions();\n    }\n  }\n\n  private async _processActions() {\n    if (this.lastActions.length) {\n      await sleep(300);\n      this.lastActions.forEach((action: TrackAction) => {\n        this.processAction(action);\n      });\n      this.store.dispatch({\n        type: this.actionTypes.clear,\n      });\n      this._promise = null;\n    }\n  }\n\n  processAction(action: TrackAction) {\n    (this.trackList || []).forEach(({ funcImpl }: TrackItem) => {\n      if (typeof funcImpl === 'function') {\n        funcImpl.call(this, action);\n      }\n    });\n  }\n\n  @tracking\n  private _authentication(action: TrackAction) {\n    if (this._auth?.actionTypes.loginSuccess === action.type) {\n      this._identify({\n        userId: this._auth.ownerId,\n      });\n      this.track('Authentication');\n    }\n  }\n\n  @tracking\n  private _logout(action: TrackAction) {\n    if (this._auth?.actionTypes.logout === action.type) {\n      this.track('Logout');\n    }\n  }\n\n  @tracking\n  private _accountInfoReady(action: TrackAction) {\n    if (this._accountInfo?.actionTypes.initSuccess === action.type) {\n      this._identify({\n        userId: this._auth?.ownerId,\n        accountId: this._accountInfo.id,\n        servicePlanId: this._accountInfo.servicePlan.id,\n        edition: this._accountInfo.servicePlan.edition,\n        CRMEnabled: this._rolesAndPermissions?.tierEnabled,\n      });\n    }\n  }\n\n  @tracking\n  private _callAttempt(action: TrackAction) {\n    if (this._call?.actionTypes.connect === action.type) {\n      if (action.callSettingMode === callingModes.webphone) {\n        this.track('Call Attempt WebRTC');\n      } else {\n        this.track('Call Attempt', {\n          callSettingMode: action.callSettingMode,\n        });\n      }\n    }\n  }\n\n  @tracking\n  private _callConnected(action: TrackAction) {\n    if (this._call?.actionTypes.connectSuccess === action.type) {\n      if (action.callSettingMode === callingModes.webphone) {\n        this.track('Outbound WebRTC Call Connected');\n      } else {\n        this.track('Outbound Call Connected', {\n          callSettingMode: action.callSettingMode,\n        });\n      }\n    }\n  }\n\n  @tracking\n  private _webRTCRegistration(action: TrackAction) {\n    if (this._webphone?.actionTypes.registered === action.type) {\n      this.track('WebRTC registration');\n    }\n  }\n\n  @tracking\n  private _smsAttempt(action: TrackAction) {\n    if (this._messageSender?.actionTypes.send === action.type) {\n      this.track('SMS Attempt');\n    }\n  }\n\n  @tracking\n  private _smsSentOver(action: TrackAction) {\n    if (this._messageSender?.actionTypes.sendOver === action.type) {\n      this.track('SMS: SMS sent succesfully');\n    }\n  }\n\n  @tracking\n  private _smsSentError(action: TrackAction) {\n    if (this._messageSender?.actionTypes.sendError === action.type) {\n      this.track('SMS: SMS sent failed');\n    }\n  }\n\n  @tracking\n  private _logCall(action: TrackAction) {\n    if (this._adapter?.actionTypes.createCallLog === action.type) {\n      this.track('Log Call');\n    }\n  }\n\n  @tracking\n  private _logSMS(action: TrackAction) {\n    if (this._adapter?.actionTypes.createSMSLog === action.type) {\n      this.track('Log SMS');\n    }\n  }\n\n  @tracking\n  private _clickToDial(action: TrackAction) {\n    if (this._adapter?.actionTypes.clickToDial === action.type) {\n      this.track('Click To Dial');\n    }\n  }\n\n  @tracking\n  private _clickToDialPlaceRingOutCall(action: TrackAction) {\n    if (\n      this._adapter?.actionTypes.clickToDial === action.type &&\n      action.callSettingMode !== callingModes.webphone\n    ) {\n      this.track('Call: Place RingOut call/Click to Dial ', {\n        'RingOut type': this._callingSettings?.callWith,\n      });\n    }\n  }\n\n  @tracking\n  private _clickToSMS(action: TrackAction) {\n    if (this._adapter?.actionTypes.clickToSMS === action.type) {\n      this.track('Click To SMS');\n    }\n  }\n\n  @tracking\n  private _viewEntity(action: TrackAction) {\n    if (this._adapter?.actionTypes.viewEntity === action.type) {\n      this.track('View Entity Details');\n    }\n  }\n\n  @tracking\n  private _createEntity(action: TrackAction) {\n    if (this._adapter?.actionTypes.createEntity === action.type) {\n      this.track('Add Entity');\n    }\n  }\n\n  @tracking\n  private _editCallLog(action: TrackAction) {\n    if (this._adapter?.actionTypes.editCallLog === action.type) {\n      this.track('Edit Call Log');\n    }\n  }\n\n  @tracking\n  private _editSMSLog(action: TrackAction) {\n    if (this._adapter?.actionTypes.editSMSLog === action.type) {\n      this.track('Edit SMS Log');\n    }\n  }\n\n  @tracking\n  private _navigate(action: TrackAction) {\n    if (this._routerInteraction?.actionTypes.locationChange === action.type) {\n      const path = action.payload && action.payload.pathname;\n      const target = this._getTrackTarget(path);\n      if (target) {\n        this.trackNavigation(target);\n      }\n\n      if (this._lingerTimeout) {\n        clearTimeout(this._lingerTimeout);\n      }\n      this._lingerTimeout = setTimeout(() => {\n        this._lingerTimeout = null;\n        if (target && this._routerInteraction.currentPath === path) {\n          this.trackLinger(target);\n        }\n      }, this._lingerThreshold);\n    }\n  }\n\n  @tracking\n  private _inboundCall(action: TrackAction) {\n    if (this._webphone?.actionTypes.callAnswer === action.type) {\n      this.track('Inbound WebRTC Call Connected');\n    }\n  }\n\n  @tracking\n  private _coldTransfer(action: TrackAction) {\n    if (\n      this._webphone?.isOnTransfer === true &&\n      this._webphone?.actionTypes.updateSessions === action.type\n    ) {\n      this.track('Cold Transfer Call');\n    }\n  }\n\n  @tracking\n  private _textClickToDial(action: TrackAction) {\n    if (\n      this._messageStore?.actionTypes.clickToCall === action.type &&\n      (action.fromType === 'Pager' || action.fromType === 'SMS')\n    ) {\n      this.track('Click To Dial (Text List)');\n    }\n  }\n\n  @tracking\n  private _voicemailClickToDial(action: TrackAction) {\n    if (\n      this._messageStore?.actionTypes.clickToCall === action.type &&\n      action.fromType === 'VoiceMail'\n    ) {\n      this.track('Click To Dial (Voicemail List)');\n    }\n  }\n\n  @tracking\n  private _voicemailClickToSMS(action: TrackAction) {\n    if (this._messageStore?.actionTypes.clickToSMS === action.type) {\n      this.track('Click to SMS (Voicemail List)');\n    }\n  }\n\n  @tracking\n  private _voicemailDelete(action: TrackAction) {\n    if (this._messageStore?.actionTypes.removeMessage === action.type) {\n      this.track('Delete Voicemail');\n    }\n  }\n\n  @tracking\n  private _voicemailFlag(action: TrackAction) {\n    if (this._messageStore?.actionTypes.markMessages === action.type) {\n      this.track('Flag Voicemail');\n    }\n  }\n\n  @tracking\n  private _contactDetailClickToDial(action: TrackAction) {\n    if (this._contactDetailsUI?.actionTypes.clickToCall === action.type) {\n      this.track('Click To Dial (Contact Details)');\n    }\n  }\n\n  @tracking\n  private _contactDetailClickToSMS(action: TrackAction) {\n    if (this._contactDetailsUI?.actionTypes.clickToSMS === action.type) {\n      this.track('Click To SMS (Contact Details)');\n    }\n  }\n\n  @tracking\n  private _callHistoryClickToDial(action: TrackAction) {\n    if (this._callHistory?.actionTypes.clickToCall === action.type) {\n      this.track('Click To dial (Call History)');\n    }\n  }\n\n  @tracking\n  private _callHistoryClickToSMS(action: TrackAction) {\n    if (this._callHistory?.actionTypes.clickToSMS === action.type) {\n      this.track('Click To SMS (Call History)');\n    }\n  }\n\n  @tracking\n  private _conferenceInviteWithText(action: TrackAction) {\n    if (this._conference?.actionTypes.inviteWithText === action.type) {\n      this.track('Invite With Text (Conference)');\n    }\n  }\n\n  @tracking\n  private _conferenceAddDialInNumber(action: TrackAction) {\n    if (this._conference?.actionTypes.updateAdditionalNumbers === action.type) {\n      this.track('Select Additional Dial-in Number (Conference)');\n    }\n  }\n\n  @tracking\n  private _conferenceJoinAsHost(action: TrackAction) {\n    if (this._conference?.actionTypes.joinAsHost === action.type) {\n      this.track('Join As Host (Conference)');\n    }\n  }\n\n  @tracking\n  private _showWhatsNew(action: TrackAction) {\n    if (\n      this._userGuide?.actionTypes.updateCarousel === action.type &&\n      action.curIdx === 0 &&\n      action.playing\n    ) {\n      this.track(\"What's New\");\n    }\n  }\n\n  @tracking\n  private _allCallsClickHold(action: TrackAction) {\n    if (this._callMonitor?.actionTypes.allCallsClickHoldTrack === action.type) {\n      this.track('Click Hold (All Calls)');\n    }\n  }\n\n  @tracking\n  private _allCallsClickHangup(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.allCallsClickHangupTrack === action.type\n    ) {\n      this.track('Click Hangup (All Calls)');\n    }\n  }\n\n  @tracking\n  private _allCallsCallItemClick(action: TrackAction) {\n    if (this._callMonitor?.actionTypes.callItemClickTrack === action.type) {\n      this.track('Click Call Item (All Calls)');\n    }\n  }\n\n  @tracking\n  private _callControlClickAdd(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.callControlClickAddTrack === action.type\n    ) {\n      this.track('Click Add (Call Control)');\n    }\n  }\n\n  @tracking\n  private _callControlClickMerge(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.callControlClickMergeTrack ===\n        action.type &&\n      !Object.values(this._conferenceCall.state.mergingPair).length\n    ) {\n      this.track('Click Merge (Call Control)');\n    }\n  }\n\n  @tracking\n  private _mergeCallControlClickMerge(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.callControlClickMergeTrack ===\n        action.type &&\n      Object.values(this._conferenceCall.state.mergingPair).length\n    ) {\n      this.track('Click Merge (Merge Call Control)');\n    }\n  }\n\n  @tracking\n  private _mergeCallControlClickHangup(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.mergeControlClickHangupTrack ===\n      action.type\n    ) {\n      this.track('Click Hangup (Merge Call Control)');\n    }\n  }\n\n  @tracking\n  private _inboundCallConnectedTrack(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.inboundCallConnectedTrack === action.type\n    ) {\n      this.track('Call: Inbound call connected');\n    }\n  }\n\n  @tracking\n  private _outboundCallConnectedTrack(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.outboundCallConnectedTrack === action.type\n    ) {\n      this.track('Call: Outbound RingOut Call connected');\n    }\n  }\n\n  @tracking\n  private _callsOnHoldClickAdd(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.callsOnHoldClickAddTrack === action.type\n    ) {\n      this.track('Click Add (Calls OnHold)');\n    }\n  }\n\n  @tracking\n  private _callsOnHoldClickMerge(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.callsOnHoldClickMergeTrack === action.type\n    ) {\n      this.track('Click Merge (Calls OnHold)');\n    }\n  }\n\n  @tracking\n  private _confirmMergeClickClose(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.confirmMergeClickCloseTrack === action.type\n    ) {\n      this.track('Click Close (ConfirmMerge Modal)');\n    }\n  }\n\n  @tracking\n  private _confirmMergeClickMerge(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.confirmMergeClickMergeTrack === action.type\n    ) {\n      this.track('Click Merge (ConfirmMerge Modal)');\n    }\n  }\n\n  @tracking\n  private _removeParticipantClickRemove(action: TrackAction) {\n    if (\n      this._conferenceCall?.actionTypes.removeParticipantClickRemoveTrack ===\n      action.type\n    ) {\n      this.track('Click Remove (RemoveParticipants Modal)');\n    }\n  }\n\n  @tracking\n  private _removeParticipantClickCancel(action: TrackAction) {\n    if (\n      this._conferenceCall?.actionTypes.removeParticipantClickCancelTrack ===\n      action.type\n    ) {\n      this.track('Cancel Remove (RemoveParticipants Modal)');\n    }\n  }\n\n  @tracking\n  private _participantListClickHangup(action: TrackAction) {\n    if (\n      this._conferenceCall?.actionTypes.participantListClickHangupTrack ===\n      action.type\n    ) {\n      this.track('Click Hangup (Participant List)');\n    }\n  }\n\n  @tracking\n  private _callControlClickParticipantArea(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes\n        .callControlClickParticipantAreaClickTrack === action.type\n    ) {\n      this.track('Click Participant Area (Call Control)');\n    }\n  }\n\n  @tracking\n  private _callsOnHoldClickHangup(action: TrackAction) {\n    if (\n      this._callMonitor?.actionTypes.callsOnHoldClickHangupTrack === action.type\n    ) {\n      this.track('Click Hangup (Calls OnHold)');\n    }\n  }\n\n  private _getTrackTarget(path: string): TrackTarget {\n    if (!path) {\n      return null;\n    }\n\n    const routes = path.split('/');\n    let formatRoute: string = null;\n    const needMatchSecondRoutes = ['calls'];\n    if (routes.length >= 3 && needMatchSecondRoutes.indexOf(routes[1]) !== -1) {\n      formatRoute = `/${routes[1]}/${routes[2]}`;\n    } else if (routes.length > 1) {\n      formatRoute = `/${routes[1]}`;\n    }\n\n    const targets: TrackTarget[] = [\n      {\n        eventPostfix: 'Dialer',\n        router: '/dialer',\n      },\n      {\n        eventPostfix: 'Compose SMS',\n        router: '/composeText',\n      },\n      {\n        eventPostfix: 'Messages',\n        router: '/messages',\n      },\n      {\n        eventPostfix: 'Conversation',\n        router: '/conversations',\n      },\n      {\n        eventPostfix: 'Call History',\n        router: '/history',\n      },\n      {\n        eventPostfix: 'All calls page',\n        router: '/calls',\n      },\n      {\n        eventPostfix: 'Settings',\n        router: '/settings',\n      },\n      {\n        eventPostfix: 'Conference',\n        router: '/conference',\n      },\n      {\n        eventPostfix: 'Meeting',\n        router: '/meeting',\n      },\n      {\n        eventPostfix: 'Contacts',\n        router: '/contacts',\n      },\n      {\n        eventPostfix: 'Call Control',\n        router: '/calls/active',\n      },\n      {\n        eventPostfix: 'Transfer',\n        router: '/transfer',\n      },\n      {\n        eventPostfix: 'Small call control',\n        router: '/simplifycallctrl',\n      },\n      {\n        eventPostfix: 'Flip',\n        router: '/flip',\n      },\n      {\n        eventPostfix: 'Add',\n        router: '/conferenceCall',\n      },\n    ];\n\n    const target = targets.find((target) => formatRoute === target.router);\n    return target;\n  }\n\n  @tracking\n  private _schedule(action: TrackAction) {\n    if (\n      this._meeting?.actionTypes.initScheduling === action.type ||\n      this._rcVideo?.actionTypes.initCreating === action.type\n    ) {\n      const target = this._getTrackTarget(this._routerInteraction?.currentPath);\n      if (target) {\n        this.trackSchedule(target);\n      }\n    }\n  }\n\n  @tracking\n  private _viewCallLogPage(action: TrackAction) {\n    if (this._callLogSection?.actionTypes.showLogSection === action.type) {\n      this.track('Call Log: View/Call log page');\n    }\n  }\n\n  @tracking\n  private _notificationClickLog(action: TrackAction) {\n    if (this._callLogSection?.actionTypes.expandNotification === action.type) {\n      this.track('Call Log: Click call log/Notification');\n    }\n  }\n\n  @tracking\n  private _muteOnSimpleCallControl(action: TrackAction) {\n    if (\n      this._activeCallControl?.actionTypes.mute === action.type &&\n      this._routerInteraction?.currentPath.includes('/simplifycallctrl')\n    ) {\n      this.track('Call Control: Mute/Small call control');\n    }\n  }\n\n  @tracking\n  private _unmuteOnSimpleCallControl(action: TrackAction) {\n    if (\n      this._activeCallControl?.actionTypes.unmute === action.type &&\n      this._routerInteraction?.currentPath.includes('/simplifycallctrl')\n    ) {\n      this.track('Call Control: Unmute/Small call control');\n    }\n  }\n\n  @tracking\n  private _holdOnSimpleCallControl(action: TrackAction) {\n    if (\n      this._activeCallControl?.actionTypes.hold === action.type &&\n      this._routerInteraction?.currentPath.includes('/simplifycallctrl')\n    ) {\n      this.track('Call Control: Hold/Small call control');\n    }\n  }\n\n  @tracking\n  private _unholdOnSimpleCallControl(action: TrackAction) {\n    if (\n      this._activeCallControl?.actionTypes.unhold === action.type &&\n      this._routerInteraction?.currentPath.includes('/simplifycallctrl')\n    ) {\n      this.track('Call Control: Unhold/Small call control');\n    }\n  }\n\n  @tracking\n  private _confirmTransfer(action: TrackAction) {\n    if (this._activeCallControl?.actionTypes.transfer === action.type) {\n      this.track('Call Control: Cold transfer/Transfer page');\n    }\n  }\n\n  @tracking\n  private _muteOnCallLogPage(action: TrackAction) {\n    if (\n      this._callLogSection?.show &&\n      this._activeCallControl?.actionTypes.mute === action.type\n    ) {\n      this.track('Call Control: Mute/Call log page');\n    }\n  }\n\n  @tracking\n  private _unmuteOnCallLogPage(action: TrackAction) {\n    if (\n      this._callLogSection?.show &&\n      this._activeCallControl?.actionTypes.unmute === action.type\n    ) {\n      this.track('Call Control: Unmute/Call log page');\n    }\n  }\n\n  @tracking\n  private _holdOnCallLogPage(action: TrackAction) {\n    if (\n      this._callLogSection?.show &&\n      this._activeCallControl?.actionTypes.hold === action.type\n    ) {\n      this.track('Call Control: Hold/Call log page');\n    }\n  }\n\n  @tracking\n  private _unholdOnCallLogPage(action: TrackAction) {\n    if (\n      this._callLogSection?.show &&\n      this._activeCallControl?.actionTypes.unhold === action.type\n    ) {\n      this.track('Call Control: Unhold/Call log page');\n    }\n  }\n\n  @tracking\n  private _hangupOnCallLogPage(action: TrackAction) {\n    if (\n      this._callLogSection?.show &&\n      this._activeCallControl?.actionTypes.hangUp === action.type\n    ) {\n      this.track('Call Control: Hang up/Call log page');\n    }\n  }\n\n  @tracking\n  private _smsHistoryPlaceRingOutCall(action: TrackAction) {\n    if (\n      this._messageStore?.actionTypes.clickToCall === action.type &&\n      this._callingSettings.callingMode === callingModes.ringout\n    ) {\n      this.track('Call: Place RingOut call/SMS history');\n    }\n  }\n\n  @tracking\n  private _callHistoryPlaceRingOutCall(action: TrackAction) {\n    if (\n      this._callHistory?.actionTypes.clickToCall === action.type &&\n      this._callingSettings.callingMode === callingModes.ringout\n    ) {\n      this.track('Call: Place RingOut call/Call history');\n    }\n  }\n\n  @tracking\n  private _dialerPlaceRingOutCall(action: TrackAction) {\n    if (\n      this._dialerUI?.actionTypes.call === action.type &&\n      action.phoneNumber?.length > 0 &&\n      this._callingSettings.callingMode === callingModes.ringout\n    ) {\n      this.track('Call: Place RingOut call/Dialer');\n    }\n  }\n\n  get trackList(): TrackItem[] {\n    return this._trackList;\n  }\n\n  get analytics() {\n    return (global as any).analytics;\n  }\n\n  get lastActions(): TrackAction[] {\n    return this.state.lastActions;\n  }\n\n  get status(): string {\n    return this.state.status;\n  }\n\n  get ready(): boolean {\n    return this.status === moduleStatuses.ready;\n  }\n\n  get pending(): boolean {\n    return this.status === moduleStatuses.pending;\n  }\n\n  get trackProps(): TrackProps {\n    return {\n      appName: this._appName,\n      appVersion: this._appVersion,\n      brand: this._brandCode,\n      'App Language': this._locale?.currentLocale || '',\n      'Browser Language': this._locale?.browserLocale || '',\n      'Extension Type': this._extensionInfo?.info.type || '',\n    };\n  }\n}\n"],"file":"Analytics.js"}