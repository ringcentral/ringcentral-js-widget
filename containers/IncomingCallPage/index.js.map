{"version":3,"sources":["containers/IncomingCallPage/index.js"],"names":["IncomingCallPage","props","answer","session","id","reject","toVoiceMail","replyWithMessage","message","toggleMinimized","answerAndEnd","hangup","activeSessionId","answerAndHold","onHold","onForward","forwardNumber","state","selectedMatcherIndex","avatarUrl","hasOtherActiveCall","onSelectMatcherName","option","nameMatches","findIndex","match","setState","contact","updateSessionMatchedContact","getAvatarUrl","then","_mounted","_updateAvatarAndMatchIndex","nextProps","contactMatch","showCallQueueName","active","minimized","phoneNumber","direction","callDirections","outbound","to","from","fallbackUserName","inbound","i18n","getString","currentLocale","callQueueName","formatPhone","areaCode","countryCode","forwardingNumbers","brand","showContactDisplayPlaceholder","sourceIcons","searchContact","searchContactList","phoneTypeRenderer","phoneSourceNameRenderer","children","Component","propTypes","PropTypes","shape","string","startTime","number","isOnMute","bool","isOnHold","isOnRecord","object","isRequired","func","node","array","defaultProps","undefined","mapToProps","_","phone","webphone","locale","contactMatcher","contactSearch","regionSettings","forwardingNumber","currentSession","ringingCallOnView","contactMapping","dataMapping","fromMatches","toMatches","fullName","sortedResult","mapToFunctions","conferenceCall","sessionId","closeMergingPair","forward","hold","pattern","debouncedSearch","searchString","IncomingCallContainer"],"mappings":"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","sourcesContent":["import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\n\nimport callDirections from 'ringcentral-integration/enums/callDirections';\n\nimport IncomingCallPanel from '../../components/IncomingCallPanel';\nimport { withPhone } from '../../lib/phoneContext';\n\nimport i18n from './i18n';\n\nclass IncomingCallPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedMatcherIndex: 0,\n      avatarUrl: null,\n      hasOtherActiveCall: false,\n    };\n\n    this.onSelectMatcherName = (option) => {\n      const nameMatches = this.props.nameMatches || [];\n      let selectedMatcherIndex = nameMatches.findIndex(\n        (match) => match.id === option.id,\n      );\n      if (selectedMatcherIndex < 0) {\n        selectedMatcherIndex = 0;\n      }\n      this.setState({\n        selectedMatcherIndex,\n        avatarUrl: null,\n      });\n      const contact = nameMatches[selectedMatcherIndex];\n      if (contact) {\n        this.props.updateSessionMatchedContact(this.props.session.id, contact);\n        this.props.getAvatarUrl(contact).then((avatarUrl) => {\n          this.setState({ avatarUrl });\n        });\n      }\n    };\n  }\n\n  answer = () => this.props.answer(this.props.session.id);\n  reject = () => this.props.reject(this.props.session.id);\n  toVoiceMail = () => this.props.toVoiceMail(this.props.session.id);\n  replyWithMessage = (message) =>\n    this.props.replyWithMessage(this.props.session.id, message);\n  toggleMinimized = () => this.props.toggleMinimized(this.props.session.id);\n  answerAndEnd = async () => {\n    await this.props.hangup(this.props.activeSessionId);\n    await this.props.answer(this.props.session.id);\n  };\n  answerAndHold = async () => {\n    await this.props.onHold(this.props.activeSessionId);\n    await this.props.answer(this.props.session.id);\n  };\n  onForward = (forwardNumber) =>\n    this.props.onForward(this.props.session.id, forwardNumber);\n\n  componentDidMount() {\n    this._mounted = true;\n    this._updateAvatarAndMatchIndex(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.session.id !== nextProps.session.id) {\n      this._updateAvatarAndMatchIndex(nextProps);\n    }\n    this.setState({\n      hasOtherActiveCall: !!nextProps.activeSessionId,\n    });\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  _updateAvatarAndMatchIndex(props) {\n    let selectedMatcherIndex = 0;\n    let contact = props.session.contactMatch;\n    if (!contact) {\n      contact = props.nameMatches && props.nameMatches[0];\n    } else {\n      selectedMatcherIndex = props.nameMatches.findIndex(\n        (match) => match.id === contact.id,\n      );\n    }\n    this.setState({\n      selectedMatcherIndex,\n      avatarUrl: null,\n    });\n    if (contact) {\n      props.getAvatarUrl(contact).then((avatarUrl) => {\n        if (!this._mounted) {\n          return;\n        }\n        this.setState({ avatarUrl });\n      });\n    }\n  }\n\n  render() {\n    const { session, showCallQueueName } = this.props;\n    const active = !!session.id;\n    if (!active) {\n      return null;\n    }\n    if (session.minimized) {\n      return null;\n    }\n    const phoneNumber =\n      session.direction === callDirections.outbound ? session.to : session.from;\n    let fallbackUserName;\n    if (\n      session.direction === callDirections.inbound &&\n      session.from === 'anonymous'\n    ) {\n      fallbackUserName = i18n.getString('anonymous', this.props.currentLocale);\n    }\n    if (!fallbackUserName) {\n      fallbackUserName = i18n.getString('unknown', this.props.currentLocale);\n    }\n    return (\n      <IncomingCallPanel\n        currentLocale={this.props.currentLocale}\n        nameMatches={this.props.nameMatches}\n        fallBackName={fallbackUserName}\n        callQueueName={showCallQueueName ? session.callQueueName : null}\n        phoneNumber={phoneNumber}\n        answer={this.answer}\n        reject={this.reject}\n        replyWithMessage={this.replyWithMessage}\n        toVoiceMail={this.toVoiceMail}\n        formatPhone={this.props.formatPhone}\n        areaCode={this.props.areaCode}\n        countryCode={this.props.countryCode}\n        selectedMatcherIndex={this.state.selectedMatcherIndex}\n        onSelectMatcherName={this.onSelectMatcherName}\n        avatarUrl={this.state.avatarUrl}\n        onBackButtonClick={this.toggleMinimized}\n        forwardingNumbers={this.props.forwardingNumbers}\n        onForward={this.onForward}\n        brand={this.props.brand}\n        showContactDisplayPlaceholder={this.props.showContactDisplayPlaceholder}\n        hasOtherActiveCall={this.state.hasOtherActiveCall}\n        answerAndEnd={this.answerAndEnd}\n        answerAndHold={this.answerAndHold}\n        sessionId={this.props.session.id}\n        sourceIcons={this.props.sourceIcons}\n        searchContact={this.props.searchContact}\n        searchContactList={this.props.searchContactList}\n        phoneTypeRenderer={this.props.phoneTypeRenderer}\n        phoneSourceNameRenderer={this.props.phoneSourceNameRenderer}\n      >\n        {this.props.children}\n      </IncomingCallPanel>\n    );\n  }\n}\n\nIncomingCallPage.propTypes = {\n  session: PropTypes.shape({\n    id: PropTypes.string,\n    direction: PropTypes.string,\n    startTime: PropTypes.number,\n    isOnMute: PropTypes.bool,\n    isOnHold: PropTypes.bool,\n    isOnRecord: PropTypes.bool,\n    to: PropTypes.string,\n    from: PropTypes.string,\n    contactMatch: PropTypes.object,\n  }).isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  toggleMinimized: PropTypes.func.isRequired,\n  answer: PropTypes.func.isRequired,\n  reject: PropTypes.func.isRequired,\n  onForward: PropTypes.func.isRequired,\n  toVoiceMail: PropTypes.func.isRequired,\n  replyWithMessage: PropTypes.func.isRequired,\n  formatPhone: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  nameMatches: PropTypes.array.isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  getAvatarUrl: PropTypes.func.isRequired,\n  forwardingNumbers: PropTypes.array.isRequired,\n  updateSessionMatchedContact: PropTypes.func.isRequired,\n  showContactDisplayPlaceholder: PropTypes.bool.isRequired,\n  brand: PropTypes.string.isRequired,\n  activeSessionId: PropTypes.string,\n  sourceIcons: PropTypes.object,\n  hangup: PropTypes.func.isRequired,\n  onHold: PropTypes.func.isRequired,\n  searchContactList: PropTypes.array.isRequired,\n  searchContact: PropTypes.func.isRequired,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n};\n\nIncomingCallPage.defaultProps = {\n  children: undefined,\n  activeSessionId: null,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n};\n\nfunction mapToProps(\n  _,\n  {\n    phone: {\n      webphone,\n      locale,\n      contactMatcher,\n      contactSearch,\n      regionSettings,\n      forwardingNumber,\n      brand,\n    },\n    showContactDisplayPlaceholder = false,\n    phoneTypeRenderer,\n    phoneSourceNameRenderer,\n    showCallQueueName,\n  },\n) {\n  const currentSession = webphone.ringingCallOnView || {};\n  const contactMapping = contactMatcher && contactMatcher.dataMapping;\n  const fromMatches =\n    (contactMapping && contactMapping[currentSession.from]) || [];\n  const toMatches = (contactMapping && contactMapping[currentSession.to]) || [];\n  const nameMatches =\n    currentSession.direction === callDirections.outbound\n      ? toMatches\n      : fromMatches;\n  return {\n    brand: brand.fullName,\n    nameMatches,\n    currentLocale: locale.currentLocale,\n    session: currentSession,\n    activeSessionId: webphone.activeSessionId,\n    areaCode: regionSettings.areaCode,\n    countryCode: regionSettings.countryCode,\n    forwardingNumbers: forwardingNumber.forwardingNumbers,\n    showContactDisplayPlaceholder,\n    searchContactList: contactSearch.sortedResult,\n    phoneTypeRenderer,\n    phoneSourceNameRenderer,\n    showCallQueueName,\n  };\n}\n\nfunction mapToFunctions(\n  _,\n  {\n    phone: { webphone, regionSettings, contactSearch, conferenceCall },\n    getAvatarUrl = () => null,\n  },\n) {\n  return {\n    formatPhone: (phoneNumber) =>\n      formatNumber({\n        phoneNumber,\n        areaCode: regionSettings.areaCode,\n        countryCode: regionSettings.countryCode,\n      }),\n    answer(sessionId) {\n      if (conferenceCall) {\n        conferenceCall.closeMergingPair();\n      }\n      webphone.answer(sessionId);\n    },\n    reject: (sessionId) => webphone.reject(sessionId),\n    toVoiceMail: (sessionId) => webphone.toVoiceMail(sessionId),\n    onForward: (sessionId, forwardNumber) =>\n      webphone.forward(sessionId, forwardNumber),\n    replyWithMessage: (sessionId, message) =>\n      webphone.replyWithMessage(sessionId, message),\n    toggleMinimized: (sessionId) => webphone.toggleMinimized(sessionId),\n    updateSessionMatchedContact: (sessionId, contact) =>\n      webphone.updateSessionMatchedContact(sessionId, contact),\n    getAvatarUrl,\n    hangup: (sessionId) => webphone.hangup(sessionId),\n    onHold: (sessionId) => webphone.hold(sessionId),\n    searchContact: (pattern) =>\n      contactSearch.debouncedSearch({ searchString: pattern }),\n  };\n}\n\nconst IncomingCallContainer = withPhone(\n  connect(\n    mapToProps,\n    mapToFunctions,\n  )(IncomingCallPage),\n);\n\nexport default IncomingCallContainer;\n"],"file":"index.js"}