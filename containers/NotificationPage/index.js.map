{"version":3,"sources":["containers/NotificationPage/index.js"],"names":["mapToProps","_","phone","callLogSection","locale","activeCallControl","connectivityMonitor","rateLimiter","showNotification","notificationIsExpand","currentNotificationIdentify","currentIdentify","logNotification","call","logName","currentLocale","currentSession","getActiveSession","disableLinks","connectivity","throttling","mapToFunctions","regionSettings","formatPhone","phoneNumber","areaCode","countryCode","onSaveNotification","saveAndHandleNotification","onDiscardNotification","discardAndHandleNotification","onCloseNotification","closeLogNotification","onExpandNotification","expandLogNotification","onReject","reject","bind","onHangup","hangUp","NotificationPage","NotificationPanel","WrapperComponent","propTypes","PropTypes","string","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport withPhone from '../../lib/withPhone';\nimport NotificationPanel from '../../components/NotificationPanel';\n\nfunction mapToProps(\n  _,\n  {\n    phone: {\n      callLogSection,\n      locale,\n      activeCallControl,\n      connectivityMonitor,\n      rateLimiter,\n    },\n  },\n) {\n  const {\n    showNotification = false,\n    notificationIsExpand = false,\n    currentNotificationIdentify,\n    currentIdentify,\n  } = callLogSection;\n\n  return {\n    logNotification: {\n      showNotification,\n      notificationIsExpand,\n      call: null,\n      logName: null,\n    },\n    currentLocale: locale.currentLocale,\n    currentNotificationIdentify,\n    currentIdentify,\n    currentSession: activeCallControl.getActiveSession(\n      currentNotificationIdentify,\n    ),\n    disableLinks: !connectivityMonitor.connectivity || rateLimiter.throttling,\n  };\n}\n\nfunction mapToFunctions(_, { phone }) {\n  const { callLogSection, regionSettings, activeCallControl } = phone;\n\n  return {\n    // notification\n    formatPhone(phoneNumber) {\n      return formatNumber({\n        phoneNumber,\n        areaCode: regionSettings.areaCode,\n        countryCode: regionSettings.countryCode,\n      });\n    },\n    onSaveNotification: () => callLogSection.saveAndHandleNotification(),\n    onDiscardNotification: () => callLogSection.discardAndHandleNotification(),\n    onCloseNotification: () => callLogSection.closeLogNotification(),\n    onExpandNotification: () => callLogSection.expandLogNotification(),\n    onReject: activeCallControl.reject.bind(activeCallControl),\n    onHangup: activeCallControl.hangUp.bind(activeCallControl),\n  };\n}\n\nconst NotificationPage = withPhone(\n  connect(\n    mapToProps,\n    mapToFunctions,\n  )(NotificationPanel),\n);\n\nconst WrapperComponent = ({ currentNotificationIdentify }) => {\n  if (!currentNotificationIdentify) return null;\n  return <NotificationPage />;\n};\n\nWrapperComponent.propTypes = {\n  currentNotificationIdentify: PropTypes.string,\n};\n\nWrapperComponent.defaultProps = {\n  currentNotificationIdentify: '',\n};\n\nexport default withPhone(\n  connect((_, { phone: { callLogSection } }) => ({\n    currentNotificationIdentify: callLogSection.currentNotificationIdentify,\n  }))(WrapperComponent),\n);\n"],"file":"index.js"}