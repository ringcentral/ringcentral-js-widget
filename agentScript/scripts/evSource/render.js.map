{"version":3,"sources":["agentScript/scripts/evSource/render.js"],"names":["setGlobalStateHelper","$inject","module","angular","config","provider","GlobalStateHelper","GlobalStateHelperProvider","stateHelperProvider","globalHelper","$get","setNestedState","name","url","params","uii","Date","getTime","views","main","templateUrl","controllerAs","controller","$scope","$state","$stateParams","document","model","$q","ApiKbGroupSvc","vm","script","type","callbacks","setScriptResult","setRecordingState","setHoldState","requestColdRequeue","requestWarmRequeue","requestHangup","getScriptData","getCallData","requestColdTransfer","requestWarmTransfer","requestDisposition","allowSendKbArticle","sendKbArticle","getKnowledgeBaseArticles","changeScript","state","_returnPromise","call","lead","kbGroupIds","getGroupsWithChildren","content","scriptId","result","defer","resolve","promise","scriptDocument","localStorageService","data","get","json","JSON","parse","isDefined","setDocument","getDocument","e","console","error","ScriptRenderSvc","then","pageTitle","that","$stateProviderGlobal","helper","getGlobalStateHelper"],"mappings":"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","sourcesContent":["(function () {\n  'use strict';\n  setGlobalStateHelper.$inject = [\n    'GlobalStateHelperProvider',\n    'stateHelperProvider',\n  ];\n  var module = angular.module('scriptingStudio.app.render', []);\n\n  module.config(setGlobalStateHelper);\n  module.provider('GlobalStateHelper', GlobalStateHelper);\n\n  // set the state helper in a config block\n  function setGlobalStateHelper(\n    GlobalStateHelperProvider,\n    stateHelperProvider,\n  ) {\n    var globalHelper = GlobalStateHelperProvider.$get();\n\n    globalHelper.setGlobalStateHelper(stateHelperProvider);\n\n    stateHelperProvider.setNestedState({\n      name: 'render',\n      url: '/render/:type',\n      params: {\n        uii: new Date().getTime(),\n      },\n      views: {\n        main: {\n          templateUrl: 'render/render.tpl.html',\n          controllerAs: 'vm',\n          controller: [\n            '$scope',\n            '$state',\n            '$stateParams',\n            'document',\n            'model',\n            '$q',\n            'ApiKbGroupSvc',\n            function (\n              $scope,\n              $state,\n              $stateParams,\n              document,\n              model,\n              $q,\n              ApiKbGroupSvc,\n            ) {\n              var vm = this;\n              vm.script = document;\n              vm.model = model;\n              vm.type = $state.params.type;\n\n              vm.uii = $stateParams.uii;\n              vm.config = document;\n              vm.callbacks = {\n                setScriptResult: setScriptResult,\n                setRecordingState: setRecordingState,\n                setHoldState: setHoldState,\n                requestColdRequeue: requestColdRequeue,\n                requestWarmRequeue: requestWarmRequeue,\n                requestHangup: requestHangup,\n                getScriptData: getCallData,\n                requestColdTransfer: requestColdTransfer,\n                requestWarmTransfer: requestWarmTransfer,\n                requestDisposition: requestDisposition,\n                allowSendKbArticle: allowSendKbArticle,\n                sendKbArticle: sendKbArticle,\n                getKnowledgeBaseArticles: getKnowledgeBaseArticles,\n                changeScript: changeScript,\n              };\n\n              function setScriptResult() {\n                return true;\n              }\n              function setRecordingState(state) {\n                return _returnPromise(state);\n              }\n              function setHoldState(state) {\n                return _returnPromise(state);\n              }\n              function requestColdRequeue() {\n                return _returnPromise(true);\n              }\n              function requestWarmRequeue() {\n                return _returnPromise(true);\n              }\n              function requestHangup() {\n                return _returnPromise(true);\n              }\n              function getCallData() {\n                return _returnPromise({\n                  model: {},\n                  call: {},\n                  lead: {},\n                });\n              }\n              function requestColdTransfer() {\n                return _returnPromise(true);\n              }\n              function requestWarmTransfer() {\n                return _returnPromise(true);\n              }\n              function requestDisposition() {\n                return _returnPromise(true);\n              }\n              function getKnowledgeBaseArticles(kbGroupIds) {\n                return ApiKbGroupSvc.getGroupsWithChildren(kbGroupIds);\n              }\n              function allowSendKbArticle() {\n                return true;\n              }\n              function sendKbArticle(uii, content) {\n                return [uii, content];\n              }\n\n              function changeScript(scriptId) {\n                return true;\n              }\n\n              function _returnPromise(result) {\n                var defer = $q.defer();\n                defer.resolve(result);\n                return defer.promise;\n              }\n            },\n          ],\n          resolve: {\n            document: [\n              'scriptDocument',\n              'localStorageService',\n              function (scriptDocument, localStorageService) {\n                try {\n                  var data = localStorageService.get('script:currentScript');\n                  var json = JSON.parse(angular.isDefined(data) ? data : null);\n                  scriptDocument.setDocument(json);\n                  return scriptDocument.getDocument();\n                } catch (e) {\n                  console.error('error parsing json for render', e);\n                }\n              },\n            ],\n            model: [\n              '$q',\n              'ScriptRenderSvc',\n              function ($q, ScriptRenderSvc) {\n                return $q(function (resolve) {\n                  ScriptRenderSvc.getCallData().then(function (result) {\n                    resolve(result);\n                  });\n                });\n              },\n            ],\n          },\n        },\n      },\n      pageTitle: 'Script',\n    });\n  }\n\n  // service that holds the state provider, can get and set it to use outside of config\n  function GlobalStateHelper() {\n    var that = this;\n    that.$get = function () {\n      return that;\n    };\n\n    that.$stateProviderGlobal = null;\n    that.setGlobalStateHelper = function (helper) {\n      that.$stateProviderGlobal = helper;\n    };\n\n    that.getGlobalStateHelper = function () {\n      return that.$stateProviderGlobal;\n    };\n  }\n})();\n"],"file":"render.js"}