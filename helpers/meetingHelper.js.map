{"version":3,"sources":["helpers/meetingHelper.ts"],"names":["getMobileDialingNumberTpl","dialInNumbers","meetingId","map","phoneNumber","location","join","getPhoneDialingNumberTpl","country","filterFormattedNumber","countryCode","isoCode","type","formatTypes","international","UTC_TIMEZONE_ID","MeetingType","SCHEDULED","RECURRING","SCHEDULED_RECURRING","INSTANT","PMI","isRecurringMeeting","meetingType","getMeetingSettings","extensionName","startTime","durationInMinutes","topic","password","schedule","timeZone","id","host","allowJoinBeforeHost","startHostVideo","startParticipantsVideo","audioOptions","getDefaultMeetingSettings","extensionId","usePersonalMeetingId","_requireMeetingPassword","_showDate","_showTime","_saved","getInitializedStartTime","now","Date","setHours","getHours","preferencesMembers","prunePreferencesObject","meeting","preferences","comparePreferences","preferencesChanged","key"],"mappings":"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","sourcesContent":["import { pick } from 'ramda';\nimport format, {\n  formatTypes,\n} from '@ringcentral-integration/phone-number/lib/format';\n\nfunction getMobileDialingNumberTpl(dialInNumbers, meetingId) {\n  return dialInNumbers\n    .map(({ phoneNumber, location = '' }) =>\n      location\n        ? `${phoneNumber},,${meetingId}# (${location})`\n        : `${phoneNumber},,${meetingId}#`,\n    )\n    .join('\\n    ');\n}\n\nfunction getPhoneDialingNumberTpl(dialInNumbers) {\n  return dialInNumbers\n    .map(({ phoneNumber, location = '', country }) => {\n      const filterFormattedNumber = format({\n        phoneNumber,\n        countryCode: country.isoCode,\n        type: formatTypes.international,\n      });\n      return location\n        ? `${filterFormattedNumber} (${location})`\n        : `${filterFormattedNumber}`;\n    })\n    .join('\\n    ');\n}\n\nconst UTC_TIMEZONE_ID = '1';\nconst MeetingType = {\n  SCHEDULED: 'Scheduled',\n  RECURRING: 'Recurring',\n  SCHEDULED_RECURRING: 'ScheduledRecurring',\n  INSTANT: 'Instant',\n  PMI: 'PMI',\n} as const;\n\nexport type MeetingTypeV = typeof MeetingType[keyof typeof MeetingType];\n\nfunction isRecurringMeeting(meetingType: MeetingTypeV) {\n  return (\n    meetingType === MeetingType.RECURRING ||\n    meetingType === MeetingType.SCHEDULED_RECURRING\n  );\n}\n\nfunction getMeetingSettings({\n  extensionName,\n  startTime,\n  durationInMinutes = 60,\n  topic = '',\n}) {\n  return {\n    topic: topic || `${extensionName}'s Meeting`,\n    meetingType: MeetingType.SCHEDULED,\n    password: '',\n    schedule: {\n      startTime,\n      durationInMinutes,\n      timeZone: {\n        id: UTC_TIMEZONE_ID,\n      },\n    },\n    host: {\n      id: null,\n    },\n    allowJoinBeforeHost: false,\n    startHostVideo: false,\n    startParticipantsVideo: false,\n    audioOptions: ['Phone', 'ComputerAudio'],\n  };\n}\n\n// Basic default meeting type information\nfunction getDefaultMeetingSettings(\n  extensionName: string,\n  startTime: string,\n  extensionId?: string,\n) {\n  return {\n    topic: `${extensionName}'s Meeting`,\n    meetingType: MeetingType.SCHEDULED,\n    password: '',\n    schedule: {\n      startTime,\n      durationInMinutes: 60,\n      timeZone: {\n        id: UTC_TIMEZONE_ID,\n      },\n    },\n    host: {\n      id: extensionId ?? null,\n    },\n    allowJoinBeforeHost: false,\n    startHostVideo: false,\n    startParticipantsVideo: false,\n    audioOptions: ['Phone', 'ComputerAudio'],\n    usePersonalMeetingId: false,\n    _requireMeetingPassword: false,\n    _showDate: false,\n    _showTime: false,\n    _saved: false,\n  };\n}\n\nfunction getInitializedStartTime(): number {\n  const now = new Date();\n  const startTime = now.setHours(now.getHours() + 1, 0, 0, 0);\n  return startTime;\n}\n\nconst preferencesMembers = [\n  'allowJoinBeforeHost',\n  'startHostVideo',\n  'startParticipantsVideo',\n  '_requireMeetingPassword',\n];\n\nfunction prunePreferencesObject(meeting) {\n  const preferences = pick(preferencesMembers, meeting);\n  return preferences;\n}\n\nfunction comparePreferences(preferences, meeting): boolean {\n  let preferencesChanged = false;\n  if (preferences && meeting) {\n    for (const key in preferences) {\n      if (preferences[key] !== meeting[key]) {\n        preferencesChanged = true;\n        break;\n      }\n    }\n  }\n  return preferencesChanged;\n}\n\nexport {\n  getMobileDialingNumberTpl,\n  getPhoneDialingNumberTpl,\n  UTC_TIMEZONE_ID,\n  MeetingType,\n  getMeetingSettings,\n  getDefaultMeetingSettings,\n  getInitializedStartTime,\n  prunePreferencesObject,\n  comparePreferences,\n  isRecurringMeeting,\n};\n"],"file":"meetingHelper.js"}