{"version":3,"sources":["components/InputSelect/index.js"],"names":["InputSelect","props","checkPropsUpdate","debonce","timeout","_renderPickList","subjectPicklist","expand","state","styles","select","map","option","i","onSelectChange","primary","listText","subject","setState","onSelectOption","onChange","then","onSave","toggleDropDownList","window","addEventListener","_handleDocumentClick","removeEventListener","e","wrapper","contains","target","nextProps","required","hasError","trim","root","ref","maxLength","updateValue","value","disabled","length","time","Component","propTypes","PropTypes","bool","array","string","func","number","defaultProps","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAMA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqBA,W;;;;;AAKnB,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,qFAAMA,KAAN;AADiB,UAJnBC,gBAImB,GAJA,4EAIA;AAAA,UAFnBC,OAEmB,GAFT,6DAAkB,MAAKF,KAAL,CAAWG,OAA7B,CAES;;AAAA,UAgBnBC,eAhBmB,GAgBD,YAAM;AAAA,UACdC,eADc,GACM,MAAKL,KADX,CACdK,eADc;AAAA,UAEdC,MAFc,GAEH,MAAKC,KAFF,CAEdD,MAFc;;AAGtB,UAAI,CAACA,MAAL,EAAa;AACX,eAAO,IAAP;AACD;;AACD,aACE;AAAK,QAAA,SAAS,EAAEE,mBAAOC;AAAvB,SACE,gCAAC,YAAD,QACGJ,eAAe,CAACK,GAAhB,CAAoB,UAACC,MAAD,EAASC,CAAT;AAAA,eACnB,gCAAC,gBAAD;AACE,UAAA,GAAG,EAAEA,CADP;AAEE,UAAA,MAAM,MAFR;AAGE,UAAA,UAAU,MAHZ;AAIE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAKC,cAAL,CAAoBF,MAApB,CAAN;AAAA,WAJX;AAKE,sCAAmBC,CAAnB;AALF,WAOE,gCAAC,oBAAD;AACE,UAAA,OAAO,EAAED,MADX;AAEE,UAAA,OAAO,EAAE;AACPG,YAAAA,OAAO,EAAEN,mBAAOO;AADT;AAFX,UAPF,CADmB;AAAA,OAApB,CADH,CADF,CADF;AAsBD,KA5CkB;;AAAA,UA8FnBF,cA9FmB,GA8FF,UAACG,OAAD,EAAa;AAC5B,YAAKC,QAAL,CAAc;AAAED,QAAAA,OAAO,EAAPA;AAAF,OAAd,EAA2B,YAAM;AAC/B,cAAKd,OAAL,CAAa,YAAM;AACjB,cAAI,MAAKF,KAAL,CAAWkB,cAAf,EAA+B;AAC7B,kBAAKlB,KAAL,CAAWkB,cAAX;AACD;;AACD,gBAAKlB,KAAL,CAAWmB,QAAX,CAAoB,MAAKZ,KAAL,CAAWS,OAA/B,EAAwCI,IAAxC,CAA6C;AAAA,mBAAM,MAAKpB,KAAL,CAAWqB,MAAX,EAAN;AAAA,WAA7C;AACD,SALD,EAKG,CALH;AAMD,OAPD;;AAQA,YAAKC,kBAAL;AACD,KAxGkB;;AAAA,UA0GnBA,kBA1GmB,GA0GE,YAAM;AAAA,UACjBhB,MADiB,GACN,MAAKC,KADC,CACjBD,MADiB;;AAEzB,UAAI,CAACA,MAAL,EAAa;AACXiB,QAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,MAAKC,oBAAtC,EAA4D,KAA5D;AACD,OAFD,MAEO;AACLF,QAAAA,MAAM,CAACG,mBAAP,CAA2B,OAA3B,EAAoC,MAAKD,oBAAzC,EAA+D,KAA/D;AACD;;AACD,YAAKR,QAAL,CAAc;AAAEX,QAAAA,MAAM,EAAE,CAACA;AAAX,OAAd;AACD,KAlHkB;;AAAA,UAoHnBmB,oBApHmB,GAoHI,UAACE,CAAD,EAAO;AAC5B,UAAI,MAAKC,OAAL,IAAgB,MAAKA,OAAL,CAAaC,QAAb,CAAsBF,CAAC,CAACG,MAAxB,CAApB,EAAqD;AACnD;AACD;;AAED,YAAKR,kBAAL;AACD,KA1HkB;;AAEjB,UAAKf,KAAL,GAAa;AACXS,MAAAA,OAAO,EAAE,MAAKhB,KAAL,CAAWgB,OADT;AAEXV,MAAAA,MAAM,EAAE;AAFG,KAAb;AAFiB;AAMlB;;;;8CAEyByB,S,EAAW;AACnC,WAAK9B,gBAAL,CAAsB8B,SAAtB,EAAiC,SAAjC;AACD;;;2CAEsB;AACrBR,MAAAA,MAAM,CAACG,mBAAP,CAA2B,OAA3B,EAAoC,KAAKD,oBAAzC,EAA+D,KAA/D;AACD;;;6BAgCQ;AAAA;;AAAA,wBAC+B,KAAKzB,KADpC;AAAA,UACCK,eADD,eACCA,eADD;AAAA,UACkB2B,QADlB,eACkBA,QADlB;AAAA,gCAEkB,KAAKzB,KAFvB,CAECS,OAFD;AAAA,UAECA,OAFD,oCAEW,EAFX;AAGP,UAAMiB,QAAQ,GAAGD,QAAQ,IAAIhB,OAAO,CAACkB,IAAR,OAAmB,EAAhD;AAEA,aACE;AACE,QAAA,SAAS,EAAE1B,mBAAO2B,IADpB;AAEE,QAAA,GAAG,EAAE,aAACC,IAAD,EAAS;AACZ,UAAA,MAAI,CAACR,OAAL,GAAeQ,IAAf;AACD;AAJH,SAME,gCAAC,iBAAD;AACE,QAAA,KAAK,EAAC,SADR;AAEE,qBAAU,SAFZ;AAGE,QAAA,SAAS,MAHX;AAIE,QAAA,QAAQ,EAAEJ,QAJZ;AAKE,QAAA,KAAK,EAAEhB,OALT;AAME,QAAA,KAAK,EAAEiB,QANT;AAOE,QAAA,UAAU,EAAE;AACVI,UAAAA,SAAS,EAAE;AADD,SAPd;AAUE,QAAA,QAAQ,EAAE,kBAACV,CAAD;AAAA,iBAAO,MAAI,CAACW,WAAL,CAAiBX,CAAC,CAACG,MAAF,CAASS,KAA1B,EAAiC,GAAjC,CAAP;AAAA,SAVZ;AAWE,QAAA,YAAY,EAAE,sBAACC,QAAD;AAAA,iBACZnC,eAAe,CAACoC,MAAhB,GAAyB,CAAzB,IACE,gCAAC,+BAAD;AACE,YAAA,MAAM,EAAE,EADV;AAEE,YAAA,QAAQ,EAAED,QAFZ;AAGE,YAAA,OAAO,EAAE,MAAI,CAAClB;AAHhB,YAFU;AAAA;AAXhB,QANF,EA2BG,KAAKlB,eAAL,EA3BH,CADF;AA+BD;;;gCAEWY,O,EAAS0B,I,EAAM;AAAA;;AACzB,WAAKzB,QAAL,CAAc;AAAED,QAAAA,OAAO,EAAPA;AAAF,OAAd,EAA2B,YAAM;AAC/B,QAAA,MAAI,CAACd,OAAL,CAAa,YAAM;AACjB,UAAA,MAAI,CAACF,KAAL,CAAWmB,QAAX,CAAoB,MAAI,CAACZ,KAAL,CAAWS,OAA/B,EAAwCI,IAAxC,CAA6C,YAAM;AACjD,YAAA,MAAI,CAAClB,OAAL,CAAa;AAAA,qBAAM,MAAI,CAACF,KAAL,CAAWqB,MAAX,EAAN;AAAA,aAAb,EAAwC,MAAI,CAACrB,KAAL,CAAWG,OAAX,GAAqBuC,IAA7D;AACD,WAFD;AAGD,SAJD,EAIGA,IAJH;AAKD,OAND;AAOD;;;;EAjGsCC,gB;;;AAkIzC5C,WAAW,CAAC6C,SAAZ,GAAwB;AACtB;AACA;AACAZ,EAAAA,QAAQ,EAAEa,sBAAUC,IAHE;AAItBzC,EAAAA,eAAe,EAAEwC,sBAAUE,KAJL;AAKtB/B,EAAAA,OAAO,EAAE6B,sBAAUG,MALG;AAMtB7B,EAAAA,QAAQ,EAAE0B,sBAAUI,IANE;AAOtB5B,EAAAA,MAAM,EAAEwB,sBAAUI,IAPI;AAQtB9C,EAAAA,OAAO,EAAE0C,sBAAUK,MARG;AAStBhC,EAAAA,cAAc,EAAE2B,sBAAUI;AATJ,CAAxB;AAWAlD,WAAW,CAACoD,YAAZ,GAA2B;AACzBnB,EAAAA,QAAQ,EAAE,KADe;AAEzB;AACA3B,EAAAA,eAAe,EAAE,EAHQ;AAIzB;AACAW,EAAAA,OAAO,EAAE,IALgB;AAMzBG,EAAAA,QAAQ,EAAEiC,SANe;AAOzB/B,EAAAA,MAAM,EAAE+B,SAPiB;AAQzBjD,EAAAA,OAAO,EAAE,GARgB;AASzBe,EAAAA,cAAc,EAAEkC;AATS,CAA3B","sourcesContent":["import PropTypes from 'prop-types';\nimport {\n  RcList,\n  RcListItem,\n  RcListItemText,\n  RcTextField,\n} from '@ringcentral-integration/rcui';\nimport React, { Component } from 'react';\nimport { CustomArrowButton } from '../Rcui/CustomButton';\n\nimport { bindDebonce } from '../../lib/bindDebonce';\nimport { bindNextPropsUpdate } from '../../lib/bindNextPropsUpdate';\nimport styles from './styles.scss';\n\nexport default class InputSelect extends Component {\n  checkPropsUpdate = bindNextPropsUpdate(this);\n\n  debonce = bindDebonce(this, this.props.timeout);\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: this.props.subject,\n      expand: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.checkPropsUpdate(nextProps, 'subject');\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this._handleDocumentClick, false);\n  }\n\n  _renderPickList = () => {\n    const { subjectPicklist } = this.props;\n    const { expand } = this.state;\n    if (!expand) {\n      return null;\n    }\n    return (\n      <div className={styles.select}>\n        <RcList>\n          {subjectPicklist.map((option, i) => (\n            <RcListItem\n              key={i}\n              button\n              singleLine\n              onClick={() => this.onSelectChange(option)}\n              data-sign={`match${i}`}\n            >\n              <RcListItemText\n                primary={option}\n                classes={{\n                  primary: styles.listText,\n                }}\n              />\n            </RcListItem>\n          ))}\n        </RcList>\n      </div>\n    );\n  };\n\n  render() {\n    const { subjectPicklist, required } = this.props;\n    const { subject = '' } = this.state;\n    const hasError = required && subject.trim() === '';\n\n    return (\n      <div\n        className={styles.root}\n        ref={(ref) => {\n          this.wrapper = ref;\n        }}\n      >\n        <RcTextField\n          label=\"Subject\"\n          data-sign=\"subject\"\n          fullWidth\n          required={required}\n          value={subject}\n          error={hasError}\n          inputProps={{\n            maxLength: 255,\n          }}\n          onChange={(e) => this.updateValue(e.target.value, 500)}\n          endAdornment={(disabled) =>\n            subjectPicklist.length > 0 && (\n              <CustomArrowButton\n                rotate={90}\n                disabled={disabled}\n                onClick={this.toggleDropDownList}\n              />\n            )\n          }\n        />\n        {this._renderPickList()}\n      </div>\n    );\n  }\n\n  updateValue(subject, time) {\n    this.setState({ subject }, () => {\n      this.debonce(() => {\n        this.props.onChange(this.state.subject).then(() => {\n          this.debonce(() => this.props.onSave(), this.props.timeout - time);\n        });\n      }, time);\n    });\n  }\n\n  onSelectChange = (subject) => {\n    this.setState({ subject }, () => {\n      this.debonce(() => {\n        if (this.props.onSelectOption) {\n          this.props.onSelectOption();\n        }\n        this.props.onChange(this.state.subject).then(() => this.props.onSave());\n      }, 0);\n    });\n    this.toggleDropDownList();\n  };\n\n  toggleDropDownList = () => {\n    const { expand } = this.state;\n    if (!expand) {\n      window.addEventListener('click', this._handleDocumentClick, false);\n    } else {\n      window.removeEventListener('click', this._handleDocumentClick, false);\n    }\n    this.setState({ expand: !expand });\n  };\n\n  _handleDocumentClick = (e) => {\n    if (this.wrapper && this.wrapper.contains(e.target)) {\n      return;\n    }\n\n    this.toggleDropDownList();\n  };\n}\n\nInputSelect.propTypes = {\n  // currentLocale: PropTypes.string,\n  // type: PropTypes.string,\n  required: PropTypes.bool,\n  subjectPicklist: PropTypes.array,\n  subject: PropTypes.string,\n  onChange: PropTypes.func,\n  onSave: PropTypes.func,\n  timeout: PropTypes.number,\n  onSelectOption: PropTypes.func,\n};\nInputSelect.defaultProps = {\n  required: false,\n  // type: null,\n  subjectPicklist: [],\n  // currentLocale: 'en-US',\n  subject: null,\n  onChange: undefined,\n  onSave: undefined,\n  timeout: 500,\n  onSelectOption: undefined,\n};\n"],"file":"index.js"}