{"version":3,"sources":["components/RequeueCallPanel/RequeueCallGroupPanel/RequeueCallGroupPanel.spec.tsx"],"names":["wrapper","currentLocale","searchGroup","text","groupName","toLowerCase","includes","defaultQueueGroups","gateGroupId","setup","queueGroups","selectedQueueGroupIndex","goToRequeueGroupDetailPage","goToRequeueCallPage","selectedQueueGroupId","afterEach","unmount","getGroupItems","find","at","getSearchInput","describe","it","expect","length","toBe","hasClass","jest","fn","simulate","toBeCalled","selectIndex","toBeCalledWith","groupId","eventObj","target","value","searchText"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RcThemeProvider } from '@ringcentral-integration/rcui';\nimport { mount } from 'enzyme';\nimport { RequeueCallGroupPanel } from './RequeueCallGroupPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst searchGroup = ({ groupName }, text) => {\n  return (\n    groupName && text && groupName.toLowerCase().includes(text.toLowerCase())\n  );\n};\nconst defaultQueueGroups = [\n  { gateGroupId: '50520', groupName: 'DukeTest1' },\n  { gateGroupId: '50521', groupName: 'DukeTest2' },\n  { gateGroupId: '50522', groupName: 'EVdemo' },\n];\n\nfunction setup({\n  queueGroups = defaultQueueGroups,\n  selectedQueueGroupIndex = 0,\n  goToRequeueGroupDetailPage = () => {},\n  goToRequeueCallPage = () => {},\n} = {}) {\n  const selectedQueueGroupId = queueGroups[selectedQueueGroupIndex]\n    ? queueGroups[selectedQueueGroupIndex].gateGroupId\n    : '';\n  return mount(\n    <RcThemeProvider>\n      <RequeueCallGroupPanel\n        currentLocale={currentLocale}\n        goToRequeueCallPage={goToRequeueCallPage}\n        searchGroup={searchGroup}\n        queueGroups={queueGroups as any}\n        selectedQueueGroupId={selectedQueueGroupId}\n        goToRequeueGroupDetailPage={goToRequeueGroupDetailPage}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nafterEach(async () => {\n  wrapper.unmount();\n});\n\nconst getGroupItems = () =>\n  wrapper\n    .find('[data-sign=\"searchResult\"]')\n    .at(0)\n    .find('ListItemWithScrollCheck');\n\nconst getSearchInput = () =>\n  wrapper\n    .find('RcOutlineTextField')\n    .at(0)\n    .find('input');\n\ndescribe('<RequeueCallGroupPanel />', async () => {\n  it('Has no available Requeue Group', () => {\n    wrapper = setup({ queueGroups: [] });\n    expect(\n      wrapper\n        .find('[data-sign=\"searchResult\"]')\n        .at(0)\n        .find('RcList').length,\n    ).toBe(0);\n  });\n\n  it('Can display all the Requeue Groups correctly', () => {\n    wrapper = setup({});\n    expect(getGroupItems().length).toBe(3);\n  });\n\n  it('Requeue Groups has default select Queue Group Id', () => {\n    const selectedQueueGroupIndex = 1;\n    wrapper = setup({ selectedQueueGroupIndex });\n\n    expect(\n      getGroupItems()\n        .at(selectedQueueGroupIndex)\n        .find('div')\n        .hasClass('Mui-selected'),\n    ).toBe(true);\n  });\n\n  it('When click the Back Button of the header, can redirct to RequeueCallPage', () => {\n    const goToRequeueCallPage = jest.fn(() => {});\n    wrapper = setup({ goToRequeueCallPage });\n    wrapper\n      .find('[data-sign=\"backButton\"]')\n      .at(0)\n      .find('button')\n      .simulate('click');\n    expect(goToRequeueCallPage).toBeCalled();\n  });\n\n  it('When click Requeue Group, can redirct to RequeueGroupDetailPage', () => {\n    const goToRequeueGroupDetailPage = jest.fn(() => {});\n    wrapper = setup({ goToRequeueGroupDetailPage });\n    const selectIndex = 1;\n    getGroupItems()\n      .at(selectIndex)\n      .find('[role=\"button\"]')\n      .simulate('click');\n\n    expect(goToRequeueGroupDetailPage).toBeCalledWith({\n      groupId: defaultQueueGroups[selectIndex].gateGroupId,\n    });\n  });\n\n  it('Can search Requeue Group', () => {\n    wrapper = setup();\n    const eventObj = { target: { value: 'Duke' } };\n    getSearchInput().simulate('change', eventObj);\n\n    expect(getGroupItems().length).toBe(2);\n  });\n\n  it('Can search Requeue Group, but with no result', () => {\n    wrapper = setup();\n    const searchText = 'Amy';\n    const eventObj = { target: { value: searchText } };\n    getSearchInput().simulate('change', eventObj);\n\n    expect(getGroupItems().length).toBe(0);\n    expect(\n      wrapper\n        .find('[data-sign=\"searchResult\"]')\n        .at(0)\n        .find('div')\n        .at(0)\n        .text(),\n    ).toBe(`No result found for \"${searchText}\"`);\n  });\n});\n"],"file":"RequeueCallGroupPanel.spec.js"}