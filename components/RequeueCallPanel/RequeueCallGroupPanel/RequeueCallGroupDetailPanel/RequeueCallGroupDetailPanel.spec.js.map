{"version":3,"sources":["components/RequeueCallPanel/RequeueCallGroupPanel/RequeueCallGroupDetailPanel/RequeueCallGroupDetailPanel.spec.tsx"],"names":["wrapper","currentLocale","searchGate","text","gateName","toLowerCase","includes","defalutSelectedQueueGroup","groupName","gates","gateId","setup","goBack","selectedQueueGroup","selectedGateIndex","submitSelection","selectedGateId","getSearchInput","find","at","getDetailItems","getSubmitButton","afterEach","unmount","describe","it","expect","prop","toBe","length","jest","fn","simulate","toBeCalled","submitButton","toBeCalledWith","not","eventObj","target","value","searchText"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RcThemeProvider } from '@ringcentral-integration/rcui';\nimport { mount } from 'enzyme';\nimport { RequeueCallGroupDetailPanel } from './RequeueCallGroupDetailPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst searchGate = ({ gateName }, text) => {\n  return (\n    gateName && text && gateName.toLowerCase().includes(text.toLowerCase())\n  );\n};\nconst defalutSelectedQueueGroup = {\n  groupName: 'group3432',\n  gates: [\n    { gateId: '40520', gateName: 'DukeTest1' },\n    { gateId: '40521', gateName: 'DukeTest2' },\n    { gateId: '40522', gateName: 'EVdemo' },\n  ],\n};\n\nfunction setup({\n  goBack = () => {},\n  selectedQueueGroup = defalutSelectedQueueGroup,\n  selectedGateIndex = 0,\n  submitSelection = () => {},\n} = {}) {\n  const selectedGateId = defalutSelectedQueueGroup.gates[selectedGateIndex]\n    ? defalutSelectedQueueGroup.gates[selectedGateIndex].gateId\n    : '';\n  return mount(\n    <RcThemeProvider>\n      <RequeueCallGroupDetailPanel\n        currentLocale={currentLocale}\n        goBack={goBack}\n        searchGate={searchGate}\n        selectedQueueGroup={selectedQueueGroup as any}\n        selectedGateId={selectedGateId}\n        submitSelection={submitSelection}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nconst getSearchInput = () =>\n  wrapper\n    .find('RcOutlineTextField')\n    .at(0)\n    .find('input');\n\nconst getDetailItems = () =>\n  wrapper\n    .find('RcList')\n    .at(0)\n    .find('ListItemWithScrollCheck');\nconst getSubmitButton = () =>\n  wrapper\n    .find('RcButton[data-sign=\"select-group-item\"]')\n    .at(0)\n    .find('button');\n\nafterEach(async () => {\n  wrapper.unmount();\n});\n\ndescribe('<RequeueCallGroupPanel />', async () => {\n  it('Can display selected Queue Group Name and all the Queues', () => {\n    wrapper = setup({});\n    expect(\n      wrapper\n        .find('BackHeader')\n        .at(0)\n        .prop('title'),\n    ).toBe(defalutSelectedQueueGroup.groupName);\n\n    expect(getDetailItems().length).toBe(3);\n  });\n\n  it('Default with select Queue and enabled Select Button', () => {\n    const selectedGateIndex = 1;\n    wrapper = setup({\n      selectedGateIndex,\n    });\n    expect(\n      getDetailItems()\n        .at(selectedGateIndex)\n        .prop('selected'),\n    ).toBe(true);\n    expect(getSubmitButton().prop('disabled')).toBe(false);\n  });\n\n  it('When user click Back Button and function goBack will be called', () => {\n    const goBack = jest.fn(() => {});\n    wrapper = setup({ goBack });\n    wrapper\n      .find('[data-sign=\"backButton\"]')\n      .at(0)\n      .find('button')\n      .simulate('click');\n    expect(goBack).toBeCalled();\n  });\n\n  it('When user select a queue, the queue will be highlighted, then user click the select button, submitSelection will be called', () => {\n    const selectedGateIndex = 1;\n    const submitSelection = jest.fn(() => {});\n    wrapper = setup({ submitSelection });\n\n    getDetailItems()\n      .at(selectedGateIndex)\n      .find('RcListItem')\n      .find('div')\n      .simulate('click');\n\n    expect(\n      getDetailItems()\n        .at(selectedGateIndex)\n        .find('RcListItem')\n        .prop('selected'),\n    ).toBe(true);\n\n    const submitButton = getSubmitButton();\n    expect(submitButton.prop('disabled')).toBe(false);\n    submitButton.simulate('click');\n\n    const selectedGateId =\n      defalutSelectedQueueGroup.gates[selectedGateIndex].gateId;\n    expect(submitSelection).toBeCalledWith(selectedGateId);\n  });\n\n  it(\"When user select no queue, the Select Button should be disabled and submitSelection shouldn' be called\", () => {\n    const selectedGateIndex = -1;\n    const submitSelection = jest.fn(() => {});\n    wrapper = setup({ submitSelection, selectedGateIndex });\n\n    expect(\n      wrapper\n        .find('RcList')\n        .at(0)\n        .find('ListItemWithScrollCheck[selected=true]').length,\n    ).toBe(0);\n\n    const submitButton = getSubmitButton();\n    expect(submitButton.prop('disabled')).toBe(true);\n\n    submitButton.simulate('click');\n    expect(submitSelection).not.toBeCalled();\n  });\n\n  it('Can search Requeue Queue', () => {\n    wrapper = setup();\n    const eventObj = { target: { value: 'Duke' } };\n    getSearchInput().simulate('change', eventObj);\n\n    expect(getDetailItems().length).toBe(2);\n  });\n\n  it('Can search Requeue Queue, but with no result', () => {\n    wrapper = setup();\n    const searchText = 'Amy';\n    const eventObj = { target: { value: searchText } };\n    getSearchInput().simulate('change', eventObj);\n\n    expect(getDetailItems().length).toBe(0);\n\n    expect(\n      wrapper\n        .find('[data-sign=\"searchResult\"]')\n        .at(0)\n        .find('div')\n        .at(0)\n        .text(),\n    ).toBe(`No result found for \"${searchText}\"`);\n  });\n});\n"],"file":"RequeueCallGroupDetailPanel.spec.js"}