{"version":3,"sources":["components/ConversationList/index.js"],"names":["ConversationList","props","onScroll","totalScrollHeight","messagesListBody","scrollHeight","clientHeight","currentScrollTop","scrollTop","_scrollTop","loadNextPage","prevProps","typeFilter","className","currentLocale","conversations","perPage","disableLinks","disableCallButton","placeholder","loadingNextPage","childProps","content","length","map","item","id","loading","styles","i18n","getString","root","list","Component","propTypes","brand","PropTypes","string","isRequired","arrayOf","shape","number","conversationId","subject","bool","showConversationDetail","func","readMessage","markMessage","unmarkMessage","dateTimeFormatter","showContactDisplayPlaceholder","sourceIcons","object","phoneTypeRenderer","phoneSourceNameRenderer","showGroupNumberName","renderExtraButton","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport MessageItem from '../MessageItem';\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nexport default class ConversationList extends Component {\n  constructor(props) {\n    super(props);\n    this._scrollTop = 0;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.typeFilter === prevProps.typeFilter) {\n      return;\n    }\n    if (this.messagesListBody) {\n      this.messagesListBody.scrollTop = 0;\n    }\n  }\n\n  onScroll = () => {\n    const totalScrollHeight = this.messagesListBody.scrollHeight;\n    const { clientHeight } = this.messagesListBody;\n    const currentScrollTop = this.messagesListBody.scrollTop;\n    // load next page if scroll near buttom\n    if (\n      totalScrollHeight - this._scrollTop > clientHeight + 10 &&\n      totalScrollHeight - currentScrollTop <= clientHeight + 10\n    ) {\n      if (typeof this.props.loadNextPage === 'function') {\n        this.props.loadNextPage();\n      }\n    }\n    this._scrollTop = currentScrollTop;\n  };\n\n  render() {\n    const {\n      className,\n      currentLocale,\n      conversations,\n      perPage,\n      disableLinks,\n      disableCallButton,\n      placeholder,\n      loadingNextPage,\n      ...childProps\n    } = this.props;\n    let content;\n    if (conversations && conversations.length) {\n      content = conversations.map((item) => (\n        <MessageItem\n          {...childProps}\n          conversation={item}\n          currentLocale={currentLocale}\n          key={item.id}\n          disableLinks={disableLinks}\n          disableCallButton={disableCallButton}\n        />\n      ));\n    }\n    const loading = loadingNextPage ? (\n      <div className={styles.loading}>\n        {i18n.getString('loading', currentLocale)}\n      </div>\n    ) : null;\n    return (\n      <div\n        className={classnames(styles.root, className)}\n        onScroll={this.onScroll}\n        ref={(list) => {\n          this.messagesListBody = list;\n        }}\n      >\n        {content}\n        {loading}\n      </div>\n    );\n  }\n}\n\nConversationList.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  conversations: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      conversationId: PropTypes.string.isRequired,\n      subject: PropTypes.string,\n    }),\n  ).isRequired,\n  disableLinks: PropTypes.bool,\n  disableCallButton: PropTypes.bool,\n  perPage: PropTypes.number,\n  className: PropTypes.string,\n  showConversationDetail: PropTypes.func.isRequired,\n  readMessage: PropTypes.func.isRequired,\n  markMessage: PropTypes.func.isRequired,\n  unmarkMessage: PropTypes.func.isRequired,\n  dateTimeFormatter: PropTypes.func,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  showGroupNumberName: PropTypes.bool,\n  placeholder: PropTypes.string,\n  typeFilter: PropTypes.string,\n  loadNextPage: PropTypes.func,\n  loadingNextPage: PropTypes.bool,\n  renderExtraButton: PropTypes.func,\n};\nConversationList.defaultProps = {\n  perPage: 20,\n  className: undefined,\n  disableLinks: false,\n  disableCallButton: false,\n  dateTimeFormatter: undefined,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  showGroupNumberName: false,\n  placeholder: undefined,\n  loadNextPage: undefined,\n  loadingNextPage: false,\n  typeFilter: undefined,\n  renderExtraButton: undefined,\n};\n"],"file":"index.js"}