{"version":3,"sources":["components/ConferenceParticipantPanel/index.js"],"names":["ParticipantsContainer","props","state","showModal","detail","formatPrticipants","onRemoveBtnClick","onCancel","onCancelNoAfter","participants","formatPhone","map","participant","partyNumber","setState","afterOnRemoveBtnClick","afterOnCancel","nextProps","find","id","currentLocale","removeFunc","onBackButtonClick","backHeader","styles","header","i18n","getString","root","participantsListContainer","participantsCount","length","participantsList","avatarUrl","partyName","calleeType","displayText","calleeTypes","contacts","then","Component","propTypes","PropTypes","string","isRequired","func","arrayOf","object","defaultProps","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport calleeTypes from 'ringcentral-integration/enums/calleeTypes';\n\nimport BackButton from '../BackButton';\nimport BackHeader from '../BackHeader';\nimport ConfirmRemoveModal from './ConfirmRemoveModal';\nimport i18n from './i18n';\nimport ParticipantItem from './ParticipantItem';\nimport styles from './styles.scss';\n\nclass ParticipantsContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      detail: null,\n    };\n    this.formatPrticipants(props);\n    this.onRemoveBtnClick = this::this.onRemoveBtnClick;\n    this.onCancel = this::this.onCancel;\n    this.onCancelNoAfter = this::this.onCancelNoAfter;\n  }\n\n  formatPrticipants(props = this.props) {\n    const { participants, formatPhone } = props;\n\n    participants.map((participant) => {\n      participant.partyNumber = formatPhone(participant.partyNumber);\n      return participant;\n    });\n  }\n\n  onRemoveBtnClick(participant) {\n    this.setState(() => ({\n      detail: participant,\n      showModal: true,\n    }));\n    this.props.afterOnRemoveBtnClick();\n  }\n\n  onCancel() {\n    this.onCancelNoAfter();\n    this.props.afterOnCancel();\n  }\n  // onCancel without track\n  onCancelNoAfter() {\n    this.setState({\n      showModal: false,\n      detail: null,\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.formatPrticipants(nextProps);\n    if (\n      this.state.showModal &&\n      !nextProps.participants.find(\n        (participant) => participant.id === this.state.detail.id,\n      )\n    ) {\n      this.onCancelNoAfter();\n    }\n  }\n\n  render() {\n    const {\n      participants,\n      currentLocale,\n      removeFunc,\n      onBackButtonClick,\n    } = this.props;\n\n    const { detail, showModal } = this.state;\n\n    const backHeader = (\n      <BackHeader\n        className={styles.header}\n        onBackClick={onBackButtonClick}\n        backButton={\n          <BackButton label={i18n.getString('conferenceCall', currentLocale)} />\n        }\n      />\n    );\n\n    return (\n      <div className={styles.root}>\n        {backHeader}\n        <div className={styles.participantsListContainer}>\n          <div className={styles.participantsCount}>\n            {participants.length === 1\n              ? `${participants.length} ${i18n.getString(\n                  'participant',\n                  currentLocale,\n                )}`\n              : `${participants.length} ${i18n.getString(\n                  'participants',\n                  currentLocale,\n                )}`}\n          </div>\n          <div className={styles.participantsList}>\n            {participants.map((participant) => {\n              const {\n                id,\n                avatarUrl,\n                partyName,\n                partyNumber,\n                calleeType,\n              } = participant;\n              let displayText =\n                partyNumber || i18n.getString('unknownNumber', currentLocale);\n              if (partyName && calleeType === calleeTypes.contacts) {\n                // means that matched a contact\n                displayText = partyName;\n              }\n              return (\n                <ParticipantItem\n                  key={id}\n                  avatarUrl={avatarUrl}\n                  detail={displayText}\n                  currentLocale={currentLocale}\n                  onRemove={() => this.onRemoveBtnClick(participant)}\n                />\n              );\n            })}\n          </div>\n        </div>\n        <ConfirmRemoveModal\n          show={showModal}\n          detail={detail}\n          onCancel={this.onCancel}\n          currentLocale={currentLocale}\n          onRemove={() =>\n            removeFunc(detail && detail.id).then(this.onCancelNoAfter)\n          }\n        />\n      </div>\n    );\n  }\n}\n\nParticipantsContainer.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  removeFunc: PropTypes.func,\n  participants: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onBackButtonClick: PropTypes.func,\n  formatPhone: PropTypes.func,\n  afterOnCancel: PropTypes.func,\n  afterOnRemoveBtnClick: PropTypes.func,\n};\n\nParticipantsContainer.defaultProps = {\n  removeFunc: (i) => i,\n  onBackButtonClick: (i) => i,\n  formatPhone: (i) => i,\n  afterOnCancel: (i) => i,\n  afterOnRemoveBtnClick: (i) => i,\n};\n\nexport default ParticipantsContainer;\n"],"file":"index.js"}