{"version":3,"sources":["components/DialButton/index.js"],"names":["ALTERNATIVE_TIMEOUT","DialButton","props","args","state","pressed","timeout","isEdge","window","navigator","userAgent","indexOf","document","createElement","audios","btn","value","audio","src","onMouseDown","e","canPlayType","volume","muted","currentTime","play","onPress","setTimeout","clearTimeout","onOutput","alternativeValue","setState","alternativeTimeout","preventDefault","onMouseUp","onMouseLeave","isSpecial","styles","root","className","btnSvg","btnSvgGroup","circle","btnValue","special","btnText","dx","text","Component","propTypes","PropTypes","shape","string","isRequired","func","number","bool","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport audios from './audios';\n\nconst ALTERNATIVE_TIMEOUT = 1000;\n\nexport default class DialButton extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.state = {\n      pressed: false,\n    };\n    this.timeout = null;\n    this.isEdge =\n      (window &&\n        window.navigator &&\n        window.navigator.userAgent.indexOf('Edge') > -1) ||\n      false;\n    if (\n      typeof document !== 'undefined' &&\n      document.createElement &&\n      audios[props.btn.value]\n    ) {\n      this.audio = document.createElement('audio');\n      this.audio.src = audios[props.btn.value];\n    }\n    this.onMouseDown = (e) => {\n      if (this.audio && this.audio.canPlayType('audio/ogg') !== '') {\n        this.audio.volume = this.props.volume;\n        this.audio.muted = this.props.muted;\n        this.audio.currentTime = 0;\n        // on Edge, audio.play() could only use at the first time\n        // so we reset the src of the audio when using audio.play()\n        if (this.isEdge) {\n          this.audio.src = audios[props.btn.value];\n        }\n        this.audio.play();\n      }\n      if (typeof this.props.onPress === 'function') {\n        this.props.onPress(this.props.btn.value);\n      }\n\n      this.timeout = setTimeout(() => {\n        if (this.state.pressed) {\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n          }\n          if (typeof this.props.onOutput === 'function') {\n            this.props.onOutput(\n              this.props.btn.alternativeValue || this.props.btn.value,\n            );\n          }\n          this.setState({\n            pressed: false,\n          });\n        }\n      }, this.props.alternativeTimeout || ALTERNATIVE_TIMEOUT);\n\n      this.setState({\n        pressed: true,\n      });\n      e.preventDefault();\n    };\n    this.onMouseUp = () => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        if (typeof this.props.onOutput === 'function') {\n          this.props.onOutput(this.props.btn.value);\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    };\n    this.onMouseLeave = () => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    };\n  }\n  render() {\n    const isSpecial = this.props.btn.value === '*';\n    return (\n      <div\n        data-sign={`dialPadBtn${this.props.btn.value}`}\n        className={classnames(styles.root, this.props.className)}\n      >\n        <svg className={styles.btnSvg} viewBox=\"0 0 500 500\">\n          <g\n            className={classnames(\n              styles.btnSvgGroup,\n              this.state.pressed && styles.pressed,\n            )}\n            onMouseUp={this.onMouseUp}\n            onMouseDown={this.onMouseDown}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <circle className={styles.circle} cx=\"250\" cy=\"250\" r=\"191\" />\n            <text\n              className={classnames(\n                styles.btnValue,\n                isSpecial ? styles.special : null,\n              )}\n              x=\"0\"\n              dx=\"205\"\n              y=\"0\"\n              dy={isSpecial ? 350 : 250}\n            >\n              {this.props.btn.value}\n            </text>\n            <text\n              className={styles.btnText}\n              x=\"0\"\n              dx={this.props.btn.dx}\n              y=\"0\"\n              dy=\"360\"\n            >\n              {this.props.btn.text}\n            </text>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nDialButton.propTypes = {\n  btn: PropTypes.shape({\n    value: PropTypes.string.isRequired,\n    text: PropTypes.string,\n    alternativeValue: PropTypes.string,\n    dx: PropTypes.string,\n  }).isRequired,\n  className: PropTypes.string,\n  onPress: PropTypes.func,\n  onOutput: PropTypes.func,\n  alternativeTimeout: PropTypes.number,\n  volume: PropTypes.number,\n  muted: PropTypes.bool,\n};\n\nDialButton.defaultProps = {\n  className: null,\n  onPress: undefined,\n  onOutput: undefined,\n  alternativeTimeout: undefined,\n  volume: 1,\n  muted: false,\n};\n"],"file":"index.js"}