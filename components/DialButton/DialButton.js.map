{"version":3,"sources":["components/DialButton/DialButton.tsx"],"names":["ALTERNATIVE_TIMEOUT","DialButton","props","args","state","pressed","timeout","isEdge","window","navigator","userAgent","indexOf","audio","onMouseDown","e","preventDefault","canPlayType","volume","muted","currentTime","src","audios","btn","value","play","onPress","setTimeout","clearTimeout","onOutput","alternativeValue","setState","alternativeTimeout","onMouseUp","onMouseLeave","document","createElement","isSpecial","styles","root","className","btnSvg","btnSvgGroup","circle","btnValue","special","btnText","dx","text","Component","defaultProps"],"mappings":"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","sourcesContent":["import classnames from 'classnames';\nimport React, { Component } from 'react';\n\nimport audios from './audios';\nimport styles from './styles.scss';\n\nconst ALTERNATIVE_TIMEOUT = 1000;\n\ninterface DialButtonProps {\n  btn: {\n    value: string;\n    text?: string;\n    alternativeValue?: string;\n    dx?: string;\n  };\n  className?: string;\n  onPress?: (...args: any[]) => any;\n  onOutput?: (...args: any[]) => any;\n  alternativeTimeout?: number;\n  volume?: number;\n  muted?: boolean;\n}\ninterface DialButtonState {\n  pressed: boolean;\n}\nexport default class DialButton extends Component<\n  DialButtonProps,\n  DialButtonState\n> {\n  static defaultProps: Partial<DialButtonProps> = {\n    volume: 1,\n    muted: false,\n  };\n\n  state: DialButtonState = {\n    pressed: false,\n  };\n\n  timeout: NodeJS.Timeout;\n\n  isEdge =\n    (window &&\n      window.navigator &&\n      window.navigator.userAgent.indexOf('Edge') > -1) ||\n    false;\n\n  audio: HTMLAudioElement;\n\n  constructor(props: DialButtonProps, ...args) {\n    super(props, ...args);\n\n    if (\n      typeof document !== 'undefined' &&\n      document.createElement &&\n      audios[props.btn.value]\n    ) {\n      this.audio = document.createElement('audio');\n      this.audio.src = audios[props.btn.value];\n    }\n  }\n\n  onMouseDown = (e) => {\n    e.preventDefault();\n\n    if (this.audio && this.audio.canPlayType('audio/ogg') !== '') {\n      this.audio.volume = this.props.volume;\n      this.audio.muted = this.props.muted;\n      this.audio.currentTime = 0;\n      // on Edge, audio.play() could only use at the first time\n      // so we reset the src of the audio when using audio.play()\n      if (this.isEdge) {\n        this.audio.src = audios[this.props.btn.value];\n      }\n      this.audio.play();\n    }\n    if (typeof this.props.onPress === 'function') {\n      this.props.onPress(this.props.btn.value);\n    }\n\n    this.timeout = setTimeout(() => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        if (typeof this.props.onOutput === 'function') {\n          this.props.onOutput(\n            this.props.btn.alternativeValue || this.props.btn.value,\n          );\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    }, this.props.alternativeTimeout || ALTERNATIVE_TIMEOUT);\n\n    this.setState({\n      pressed: true,\n    });\n  };\n\n  onMouseUp = () => {\n    if (this.state.pressed) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n      if (typeof this.props.onOutput === 'function') {\n        this.props.onOutput(this.props.btn.value);\n      }\n      this.setState({\n        pressed: false,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (this.state.pressed) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n      this.setState({\n        pressed: false,\n      });\n    }\n  };\n\n  render() {\n    const isSpecial = this.props.btn.value === '*';\n    return (\n      <div\n        data-sign={`dialPadBtn${this.props.btn.value}`}\n        className={classnames(styles.root, this.props.className)}\n      >\n        <svg className={styles.btnSvg} viewBox=\"0 0 500 500\">\n          <g\n            className={classnames(\n              styles.btnSvgGroup,\n              this.state.pressed && styles.pressed,\n            )}\n            onMouseUp={this.onMouseUp}\n            onMouseDown={this.onMouseDown}\n            onMouseLeave={this.onMouseLeave}\n          >\n            <circle className={styles.circle} cx=\"250\" cy=\"250\" r=\"191\" />\n            <text\n              className={classnames(\n                styles.btnValue,\n                isSpecial ? styles.special : null,\n              )}\n              x=\"0\"\n              dx=\"205\"\n              y=\"0\"\n              dy={isSpecial ? 350 : 250}\n            >\n              {this.props.btn.value}\n            </text>\n            <text\n              className={styles.btnText}\n              x=\"0\"\n              dx={this.props.btn.dx}\n              y=\"0\"\n              dy=\"360\"\n            >\n              {this.props.btn.text}\n            </text>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n"],"file":"DialButton.js"}