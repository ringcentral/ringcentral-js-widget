{"version":3,"sources":["components/Rcui/RecipientsInput/RecipientsInput.tsx"],"names":["throttledTime","RecipientsInput","placeholder","value","currentLocale","onChange","onFocus","onDelete","onClear","inputRef","remainSpace","setRemainSpace","mouseDownTime","setMouseDownTime","timer","setTimer","deleteRef","hasDeletetn","current","focus","clientWidth","mouseDown","Date","setTimeout","mouseUp","curTime","clearTimeout","width","styles","inputRoot","i18n","getString","maxLength","e","target","disableUnderline","classes","root","input","deleteIcon"],"mappings":"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","sourcesContent":["import {\n  RcTextField,\n  RcTextFieldProps,\n  RcIconButton,\n} from '@ringcentral-integration/rcui';\nimport React, { FunctionComponent, useEffect, useRef, useState } from 'react';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\ntype RecipientsInputProps = {\n  recipients?: {\n    phoneNumber: string;\n    name?: string;\n  }[];\n  currentLocale: string;\n  onChange(value?: string): any;\n  onDelete(): any;\n  onClear(): any;\n} & Omit<RcTextFieldProps, 'onChange'>;\n\nconst throttledTime = 1000;\n\nexport const RecipientsInput: FunctionComponent<RecipientsInputProps> = ({\n  placeholder,\n  value,\n  currentLocale,\n  onChange,\n  onFocus,\n  onDelete,\n  onClear,\n}) => {\n  const inputRef = useRef<HTMLInputElement>();\n  const [remainSpace, setRemainSpace] = useState(0);\n  const [mouseDownTime, setMouseDownTime] = useState<number>(null);\n  const [timer, setTimer] = useState(null);\n  const deleteRef = useRef<HTMLDivElement>();\n\n  const hasDeletetn = !!value;\n\n  useEffect(() => {\n    inputRef.current.focus();\n    onFocus(null);\n  }, [value]);\n\n  useEffect(() => {\n    setRemainSpace(deleteRef.current.clientWidth);\n  }, [hasDeletetn]);\n\n  const mouseDown = () => {\n    setMouseDownTime(+new Date());\n\n    setTimer(\n      setTimeout(() => {\n        onClear();\n        setTimer(null);\n      }, throttledTime),\n    );\n  };\n\n  const mouseUp = () => {\n    const curTime = +new Date();\n    if (mouseDownTime && curTime - mouseDownTime >= throttledTime) {\n      return;\n    }\n\n    clearTimeout(timer);\n    onDelete();\n  };\n\n  return (\n    <>\n      <i style={{ width: remainSpace }} />\n      <div className={styles.inputRoot}>\n        <RcTextField\n          placeholder={\n            placeholder || i18n.getString('dialPlaceholder', currentLocale)\n          }\n          value={value}\n          inputProps={{\n            maxLength: 30,\n          }}\n          fullWidth\n          inputRef={inputRef}\n          onChange={(e) => {\n            onChange(e.target.value);\n          }}\n          data-sign=\"numberField\"\n          onFocus={onFocus}\n          // eslint-disable-next-line react/jsx-no-duplicate-props\n          InputProps={{\n            disableUnderline: true,\n            classes: {\n              root: styles.root,\n              input: styles.input,\n            },\n          }}\n          autoComplete=\"off\"\n        />\n      </div>\n      <div className={styles.deleteIcon} ref={deleteRef}>\n        {hasDeletetn && (\n          <RcIconButton\n            variant=\"plain\"\n            size=\"small\"\n            icon=\"deletenumber\"\n            data-sign=\"deleteButton\"\n            onMouseUp={mouseUp}\n            onMouseDown={mouseDown}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n"],"file":"RecipientsInput.js"}