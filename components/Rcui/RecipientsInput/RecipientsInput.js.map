{"version":3,"sources":["components/Rcui/RecipientsInput/RecipientsInput.tsx"],"names":["throttledTime","RecipientsInput","placeholder","value","currentLocale","onChange","onFocus","onBlur","onDelete","onClear","className","inputRef","mouseDownTime","setMouseDownTime","timer","setTimer","haveDeleteButton","current","focus","mouseDown","Date","setTimeout","mouseUp","curTime","clearTimeout","styles","inputRoot","i18n","getString","maxLength","e","target","root","textFieldRoot","disableUnderline","classes","input","endAdornment","deletenumberSvg"],"mappings":"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","sourcesContent":["import {\n  RcIconButton,\n  RcTextField,\n  RcTextFieldProps,\n} from '@ringcentral-integration/rcui';\nimport deletenumberSvg from '@ringcentral-integration/rcui/icons/icon-deletenumber.svg';\nimport classNames from 'classnames';\nimport React, {\n  FunctionComponent,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\ntype RecipientsInputProps = {\n  recipients?: {\n    phoneNumber: string;\n    name?: string;\n  }[];\n  currentLocale: string;\n  onChange(value?: string): any;\n  onDelete(): any;\n  onClear(): any;\n  className?: string;\n} & Omit<RcTextFieldProps, 'onChange'>;\n\nconst throttledTime = 1000;\n\nexport const RecipientsInput: FunctionComponent<RecipientsInputProps> = ({\n  placeholder,\n  value,\n  currentLocale,\n  onChange,\n  onFocus,\n  onBlur,\n  onDelete,\n  onClear,\n  className,\n}) => {\n  const inputRef = useRef<HTMLInputElement>();\n  const [mouseDownTime, setMouseDownTime] = useState<number>(null);\n  const [timer, setTimer] = useState(null);\n\n  const haveDeleteButton = !!value;\n\n  useEffect(() => {\n    inputRef.current.focus();\n    onFocus(null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [value]);\n\n  const mouseDown = useMemo(\n    () => () => {\n      setMouseDownTime(+new Date());\n\n      setTimer(\n        setTimeout(() => {\n          onClear();\n          setTimer(null);\n        }, throttledTime),\n      );\n    },\n    [onClear],\n  );\n\n  const mouseUp = useMemo(\n    () => () => {\n      const curTime = +new Date();\n      if (mouseDownTime && curTime - mouseDownTime >= throttledTime) {\n        return;\n      }\n\n      clearTimeout(timer);\n      onDelete();\n    },\n    [mouseDownTime, onDelete, timer],\n  );\n\n  return (\n    <div className={classNames(className, styles.inputRoot)}>\n      <RcTextField\n        placeholder={\n          placeholder || i18n.getString('dialPlaceholder', currentLocale)\n        }\n        value={value}\n        inputProps={{\n          maxLength: 30,\n        }}\n        fullWidth\n        clearBtn={false}\n        inputRef={inputRef}\n        onChange={(e) => {\n          onChange(e.target.value);\n        }}\n        classes={{\n          root: styles.textFieldRoot,\n        }}\n        data-sign=\"numberField\"\n        onFocus={onFocus}\n        onBlur={onBlur}\n        InputProps={{\n          disableUnderline: true,\n          classes: {\n            root: styles.root,\n            input: styles.input,\n          },\n          endAdornment: haveDeleteButton && (\n            <RcIconButton\n              variant=\"plain\"\n              size=\"large\"\n              color=\"grey.400\"\n              symbol={deletenumberSvg}\n              data-sign=\"deleteButton\"\n              onMouseUp={mouseUp}\n              onMouseDown={mouseDown}\n            />\n          ),\n        }}\n        autoComplete=\"off\"\n      />\n    </div>\n  );\n};\n"],"file":"RecipientsInput.js"}