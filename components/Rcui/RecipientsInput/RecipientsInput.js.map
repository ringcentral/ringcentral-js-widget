{"version":3,"sources":["components/Rcui/RecipientsInput/RecipientsInput.tsx"],"names":["throttledTime","RecipientsInput","placeholder","value","currentLocale","onChange","onDelete","onClear","className","deleteIconProps","rest","inputRef","mouseDownTime","setMouseDownTime","timer","setTimer","haveDeleteButton","handleMouseDown","Date","setTimeout","handleMouseUp","curTime","clearTimeout","current","focus","styles","inputRoot","i18n","getString","maxLength","e","target","root","textFieldRoot","disableUnderline","classes","input","endAdornment","deletenumberSvg","onMouseUp","onMouseDown"],"mappings":"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","sourcesContent":["import {\n  combineProps,\n  RcBaseProps,\n  RcIconButton,\n  RcIconButtonProps,\n  RcTextField,\n  RcTextFieldProps,\n  useEventCallback,\n} from '@ringcentral/juno';\nimport deletenumberSvg from '@ringcentral/juno/icon/Deletenumber';\nimport classNames from 'classnames';\nimport React, { FunctionComponent, useEffect, useRef, useState } from 'react';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nexport type RecipientsInputProps = {\n  recipients?: {\n    phoneNumber: string;\n    name?: string;\n  }[];\n  /** if you need default placeholder, you need pass currentLocal */\n  currentLocale?: string;\n  onChange(value?: string): any;\n  onDelete(): any;\n  onClear(): any;\n  /** props for `deleteIcon` */\n  deleteIconProps?: RcBaseProps<RcIconButtonProps, 'variant' | 'size'>;\n  className?: string;\n} & Omit<RcTextFieldProps, 'onChange'>;\n\nconst throttledTime = 1000;\n\nexport const RecipientsInput: FunctionComponent<RecipientsInputProps> = ({\n  placeholder,\n  value,\n  currentLocale,\n  onChange,\n  onDelete,\n  onClear,\n  className,\n  deleteIconProps,\n  ...rest\n}) => {\n  const inputRef = useRef<HTMLInputElement>();\n  const [mouseDownTime, setMouseDownTime] = useState<number>(null);\n  const [timer, setTimer] = useState(null);\n\n  const haveDeleteButton = !!value;\n\n  const handleMouseDown = useEventCallback(() => {\n    setMouseDownTime(+new Date());\n\n    setTimer(\n      setTimeout(() => {\n        onClear();\n        setTimer(null);\n      }, throttledTime),\n    );\n  });\n\n  const handleMouseUp = useEventCallback(() => {\n    const curTime = +new Date();\n    if (mouseDownTime && curTime - mouseDownTime >= throttledTime) {\n      return;\n    }\n\n    clearTimeout(timer);\n    onDelete();\n  });\n\n  useEffect(() => {\n    inputRef.current.focus();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [value]);\n\n  return (\n    <div className={classNames(className, styles.inputRoot)}>\n      <RcTextField\n        placeholder={\n          placeholder || i18n.getString('dialPlaceholder', currentLocale)\n        }\n        value={value}\n        inputProps={{\n          maxLength: 30,\n        }}\n        fullWidth\n        clearBtn={false}\n        inputRef={inputRef}\n        onChange={(e) => {\n          onChange(e.target.value);\n        }}\n        classes={{\n          root: styles.textFieldRoot,\n        }}\n        data-sign=\"numberField\"\n        InputProps={{\n          disableUnderline: true,\n          classes: {\n            root: styles.root,\n            input: styles.input,\n          },\n          endAdornment: haveDeleteButton && (\n            <RcIconButton\n              color=\"neutral.f03\"\n              symbol={deletenumberSvg}\n              data-sign=\"deleteButton\"\n              title=\"delete\"\n              {...combineProps(\n                {\n                  onMouseUp: handleMouseUp,\n                  onMouseDown: handleMouseDown,\n                },\n                deleteIconProps,\n              )}\n              variant=\"plain\"\n              size=\"large\"\n            />\n          ),\n        }}\n        autoComplete=\"off\"\n        {...rest}\n      />\n    </div>\n  );\n};\n"],"file":"RecipientsInput.js"}