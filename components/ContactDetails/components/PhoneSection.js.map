{"version":3,"sources":["components/ContactDetails/components/PhoneSection.tsx"],"names":["PhoneList","label","children","styles","item","content","PhoneListItem","contact","currentLocale","disableLinks","formatNumber","internalSmsPermission","isClickToDialEnabled","isCallButtonDisabled","isClickToTextEnabled","onClickToDial","onClickToSMS","outboundSmsPermission","phoneNumber","rawPhoneNumber","phoneType","formattedNumber","showCallButton","phoneTypes","fax","showTextButton","extension","text","number","menu","disabled","i18n","getString","dynamicsFont","call","composeText","PhoneSection","phoneNumbers","length","sortedPhoneNumbers","phoneMap","acc","lastType","map","push","section","contacts"],"mappings":"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","sourcesContent":["import React, { FunctionComponent } from 'react';\nimport classnames from 'classnames';\nimport { map, reduce, keys } from 'ramda';\nimport phoneTypes from 'ringcentral-integration/enums/phoneTypes';\nimport {\n  sortByPhoneTypes,\n  filterByPhoneTypes,\n} from 'ringcentral-integration/lib/phoneTypeHelper';\nimport { ContactModel } from 'ringcentral-integration/models/Contact.model';\nimport dynamicsFont from '../../../assets/DynamicsFont/DynamicsFont.scss';\nimport styles from '../styles.scss';\nimport i18n from '../i18n';\nimport {\n  onClickToSMS,\n  formatNumber,\n  onClickToDial,\n} from '../ContactDetails.interface';\n\n/**\n * TODO\n * 1. Refactor phone type and phoneTypeOrder into modules\n * 2. RawNumberDisplay\n */\n\ninterface PhoneListProps {\n  label: string;\n}\n\nconst PhoneList: FunctionComponent<PhoneListProps> = ({ label, children }) => {\n  return (\n    <div className={styles.item}>\n      <div className={styles.label}>\n        <span>{label}</span>\n      </div>\n      <ul className={styles.content}>{children}</ul>\n    </div>\n  );\n};\n\ninterface PhoneListItemProps extends formatNumber, onClickToDial, onClickToSMS {\n  currentLocale: string;\n  contact: ContactModel;\n  disableLinks: boolean;\n  internalSmsPermission: boolean;\n  isClickToDialEnabled: boolean;\n  isCallButtonDisabled: boolean;\n  isClickToTextEnabled: boolean;\n  outboundSmsPermission: boolean;\n  phoneNumber: string;\n  rawPhoneNumber: string;\n  phoneType: string;\n}\n\nconst PhoneListItem: FunctionComponent<PhoneListItemProps> = ({\n  contact,\n  currentLocale,\n  disableLinks,\n  formatNumber,\n  internalSmsPermission,\n  isClickToDialEnabled,\n  isCallButtonDisabled,\n  isClickToTextEnabled,\n  onClickToDial,\n  onClickToSMS,\n  outboundSmsPermission,\n  phoneNumber,\n  rawPhoneNumber,\n  phoneType,\n}) => {\n  const formattedNumber = rawPhoneNumber || formatNumber(phoneNumber);\n  const showCallButton = !(\n    !isClickToDialEnabled || phoneType === phoneTypes.fax\n  );\n  const showTextButton = !(\n    !isClickToTextEnabled ||\n    phoneType === phoneTypes.fax ||\n    (phoneType === phoneTypes.extension && !internalSmsPermission) ||\n    (phoneType !== phoneTypes.extension && !outboundSmsPermission)\n  );\n  return (\n    <li>\n      <div className={classnames(styles.text, styles.number)}>\n        <span data-sign=\"contactNumber\" title={phoneNumber}>\n          {formattedNumber}\n        </span>\n      </div>\n      <div className={styles.menu}>\n        {showCallButton ? (\n          <button\n            type=\"button\"\n            className={classnames(isCallButtonDisabled && styles.disabled)}\n            title={`${i18n.getString('call', currentLocale)} ${phoneNumber}`}\n            disabled={isCallButtonDisabled}\n            onClick={() => onClickToDial(contact, phoneNumber)}\n          >\n            <i className={dynamicsFont.call} />\n          </button>\n        ) : null}\n        {showTextButton ? (\n          <button\n            type=\"button\"\n            className={classnames(disableLinks && styles.disabled)}\n            title={`${i18n.getString('text', currentLocale)} ${phoneNumber}`}\n            disabled={disableLinks}\n            onClick={() => onClickToSMS(contact, phoneNumber)}\n          >\n            <i className={dynamicsFont.composeText} />\n          </button>\n        ) : null}\n      </div>\n    </li>\n  );\n};\n\nexport interface PhoneSectionProps\n  extends formatNumber,\n    onClickToDial,\n    onClickToSMS {\n  currentLocale: string;\n  contact: ContactModel;\n  disableLinks: boolean;\n  isClickToDialEnabled: boolean;\n  isCallButtonDisabled: boolean;\n  isClickToTextEnabled: boolean;\n  internalSmsPermission: boolean;\n  outboundSmsPermission: boolean;\n}\n\nexport const PhoneSection: FunctionComponent<PhoneSectionProps> = ({\n  contact,\n  currentLocale,\n  disableLinks,\n  isClickToDialEnabled,\n  isCallButtonDisabled,\n  isClickToTextEnabled,\n  formatNumber,\n  internalSmsPermission,\n  onClickToDial,\n  onClickToSMS,\n  outboundSmsPermission,\n}) => {\n  if (contact && contact.phoneNumbers && contact.phoneNumbers.length) {\n    const sortedPhoneNumbers = sortByPhoneTypes(\n      filterByPhoneTypes(contact.phoneNumbers),\n    );\n    const phoneMap = reduce(\n      (acc, item) => {\n        if (item.phoneType !== acc.lastType) {\n          acc.lastType = item.phoneType;\n          acc.map[item.phoneType] = [];\n        }\n        acc.map[item.phoneType].push(item);\n        return acc;\n      },\n      {\n        map: {},\n        lastType: null,\n      },\n      sortedPhoneNumbers,\n    ).map;\n    return (\n      <div className={classnames(styles.section, styles.contacts)}>\n        {map(\n          (phoneType) => (\n            <PhoneList\n              key={phoneType}\n              label={i18n.getString(phoneType, currentLocale)}\n            >\n              {map(\n                ({ phoneNumber, rawPhoneNumber }) => (\n                  <PhoneListItem\n                    key={phoneNumber}\n                    phoneNumber={phoneNumber}\n                    rawPhoneNumber={rawPhoneNumber}\n                    phoneType={phoneType}\n                    contact={contact}\n                    formatNumber={formatNumber}\n                    currentLocale={currentLocale}\n                    isClickToDialEnabled={isClickToDialEnabled}\n                    isCallButtonDisabled={isCallButtonDisabled}\n                    isClickToTextEnabled={isClickToTextEnabled}\n                    disableLinks={disableLinks}\n                    internalSmsPermission={internalSmsPermission}\n                    onClickToDial={onClickToDial}\n                    onClickToSMS={onClickToSMS}\n                    outboundSmsPermission={outboundSmsPermission}\n                  />\n                ),\n                phoneMap[phoneType],\n              )}\n            </PhoneList>\n          ),\n          keys(phoneMap),\n        )}\n      </div>\n    );\n  }\n  return null;\n};\n"],"file":"PhoneSection.js"}