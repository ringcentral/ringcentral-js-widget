{"version":3,"sources":["components/ActiveCallListPanel/ActiveCallListPanel.spec.tsx"],"names":["wrapper","currentLocale","defaultCallList","session","sessionId","isHold","setup","goBack","callList","onHangup","onUnHold","onHold","afterEach","unmount","getHoldButton","itemIndex","callItem","find","at","button","title","prop","click","simulate","getHandUpButton","describe","it","jest","fn","expect","toBeCalled","text","toBe","holdButton","i18n","getString","not","toBeCalledWith","handUpButton"],"mappings":"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","sourcesContent":["import { RcThemeProvider, DeepPartial } from '@ringcentral-integration/rcui';\nimport { mount } from 'enzyme';\nimport React from 'react';\n\nimport { EvCallData } from '../../interfaces';\nimport i18n from '../SmallCallControl/i18n';\nimport { ActiveCallListPanel } from './ActiveCallListPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst defaultCallList: DeepPartial<EvCallData>[] = [\n  {\n    session: {\n      sessionId: '5001',\n    },\n    isHold: true,\n  },\n  {\n    session: {\n      sessionId: '5002',\n    },\n    isHold: false,\n  },\n  {\n    session: {\n      sessionId: '5003',\n    },\n    isHold: true,\n  },\n] as any;\n\nfunction setup({\n  goBack = () => {},\n  callList = defaultCallList,\n  onHangup = () => {},\n  onUnHold = () => {},\n  onHold = () => {},\n} = {}) {\n  return mount(\n    <RcThemeProvider>\n      <ActiveCallListPanel\n        currentLocale={currentLocale}\n        goBack={goBack}\n        callList={callList as any}\n        onHangup={onHangup}\n        onUnHold={onUnHold}\n        onHold={onHold}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nafterEach(async () => {\n  wrapper.unmount();\n});\n\nconst getHoldButton = (itemIndex) => {\n  const callItem = wrapper.find('[data-sign=\"callItem\"]').at(itemIndex);\n  const button = callItem.find('HoldCallButton').find('button');\n  return {\n    title: callItem.find('CircleIconButton[data-icon=\"hold\"]').prop('title'),\n    click: () => button.simulate('click'),\n  };\n};\n\nconst getHandUpButton = (itemIndex) => {\n  const callItem = wrapper.find('[data-sign=\"callItem\"]').at(itemIndex);\n  const button = callItem.find('HandUpButton').find('button');\n  return {\n    title: callItem.find('CircleIconButton[data-icon=\"hand-up\"]').prop('title'),\n    click: () => button.simulate('click'),\n  };\n};\ndescribe('<ActiveCallListPanel />', async () => {\n  it('Display Back Button and when user click it, function goBack will be called', () => {\n    const goBack = jest.fn();\n    wrapper = setup({ goBack });\n    wrapper\n      .find('[data-sign=\"backButton\"]')\n      .at(0)\n      .find('button')\n      .simulate('click');\n    expect(goBack).toBeCalled();\n  });\n\n  it('When there is no call, can render corrently', () => {\n    const callList = [];\n    wrapper = setup({\n      callList,\n    });\n    expect(wrapper.find('[data-sign=\"callList\"]').text()).toBe('');\n  });\n\n  it('when call is onhold can render correctly', () => {\n    const onHold = jest.fn();\n    const onUnHold = jest.fn();\n    const itemIndex = 2;\n    wrapper = setup({\n      onHold,\n      onUnHold,\n    });\n    const holdButton = getHoldButton(itemIndex);\n    expect(holdButton.title).toBe(i18n.getString('onHold'));\n    holdButton.click();\n    expect(onHold).not.toBeCalled();\n    expect(onUnHold).toBeCalledWith(defaultCallList[itemIndex]);\n  });\n\n  it('when call is unhold can render correctly', () => {\n    const onHold = jest.fn();\n    const onUnHold = jest.fn();\n    const itemIndex = 1;\n    wrapper = setup({ onHold, onUnHold });\n    const holdButton = getHoldButton(itemIndex);\n    expect(holdButton.title).toBe(i18n.getString('hold'));\n    holdButton.click();\n    expect(onHold).toBeCalledWith(defaultCallList[itemIndex]);\n    expect(onUnHold).not.toBeCalled();\n  });\n\n  it('HandUpButton can render correctly', () => {\n    const onHangup = jest.fn();\n    const itemIndex = 0;\n    wrapper = setup({ onHangup });\n    const handUpButton = getHandUpButton(itemIndex);\n    expect(handUpButton.title).toBe(i18n.getString('hangup'));\n    handUpButton.click();\n    expect(onHangup).toBeCalledWith(defaultCallList[itemIndex]);\n  });\n});\n"],"file":"ActiveCallListPanel.spec.js"}