{"version":3,"sources":["components/RecipientsInput/RecipientsInput.tsx"],"names":["RecipientsInput","props","setSelectedIndex","scrollOperation","addSelectedContactIndex","reduceSelectedContactIndex","isSplitter","handleHotKey","listRef","inputRef","_focusTimeout","onInputKeyUp","e","searchContact","currentTarget","value","setState","isFocusOnInput","onInputFocus","onInputChange","onChange","scrollTop","onClean","clickHandler","evt","contains","target","_addToRecipients","item","addToRecipients","setInputRef","ref","state","selectedContactIndex","scrollDirection","index","direction","length","searchContactList","preState","key","keyCode","preventDefault","relatedContactList","currentSelected","name","phoneNumber","replace","nextProps","undefined","window","addEventListener","autoFocus","setTimeout","focus","removeEventListener","className","contactInfoRenderer","contactPhoneRenderer","currentLocale","formatContactPhone","isLastInputFromDialpad","label","multiple","phoneSourceNameRenderer","phoneTypeRenderer","placeholder","recipient","recipients","recipientsClassName","removeFromRecipients","titleEnabled","useRCUI","slice","labelEl","styles","i18n","getString","toNumberInput","inputWrapper","inputField","numberInput","removeButton","container","rcuiStyle","rightPanel","Component","defaultProps"],"mappings":"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","sourcesContent":["import classnames from 'classnames';\nimport React, { Component } from 'react';\nimport ContactDropdownList from '../ContactDropdownList';\nimport { RemoveButton } from '../RemoveButton';\nimport { focusCampo } from './focusCampo';\nimport i18n from './i18n';\nimport { SelectedRecipients } from './SelectedRecipients';\nimport styles from './styles.scss';\n\ntype RecipientsInputProps = {\n  className?: string;\n  recipientsClassName?: string;\n  label?: string;\n  placeholder?: string;\n  searchContactList: {\n    name: string;\n    entityType: string;\n    phoneType: string;\n    phoneNumber: string;\n  }[];\n  recipient?: {\n    phoneNumber: string;\n    name?: string;\n  };\n  recipients?: {\n    phoneNumber: string;\n    name?: string;\n  }[];\n  value: string;\n  onChange: (...args: any[]) => any;\n  onClean: (...args: any[]) => any;\n  addToRecipients: (...args: any[]) => any;\n  removeFromRecipients: (...args: any[]) => any;\n  formatContactPhone: (...args: any[]) => any;\n  searchContact?: (...args: any[]) => any;\n  titleEnabled?: boolean;\n  autoFocus?: boolean;\n  currentLocale: string;\n  multiple?: boolean;\n  inputRef?: (...args: any[]) => any;\n  phoneTypeRenderer?: (...args: any[]) => any;\n  phoneSourceNameRenderer?: (...args: any[]) => any;\n  contactInfoRenderer?: (...args: any[]) => any;\n  contactPhoneRenderer?: (...args: any[]) => any;\n  useRCUI?: boolean;\n  isLastInputFromDialpad?: boolean;\n};\ntype RecipientsInputState = {\n  value: any;\n  isFocusOnInput: boolean;\n  selectedContactIndex: number;\n  scrollDirection: null;\n};\n\nclass RecipientsInput extends Component<\n  RecipientsInputProps,\n  RecipientsInputState\n> {\n  setSelectedIndex: (index: any) => void;\n  scrollOperation: (direction: any) => void;\n  addSelectedContactIndex: () => void;\n  reduceSelectedContactIndex: () => void;\n  isSplitter: (e: any) => boolean;\n  handleHotKey: (e: any) => void;\n  listRef: any;\n  inputRef: any;\n  _focusTimeout: NodeJS.Timeout;\n\n  static defaultProps: Partial<RecipientsInputProps> = {\n    recipients: [],\n    searchContact: () => null,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value,\n      isFocusOnInput: false,\n      selectedContactIndex: 0,\n      scrollDirection: null,\n    };\n    this.setSelectedIndex = (index) => {\n      this.setState({\n        selectedContactIndex: index,\n        scrollDirection: null,\n      });\n    };\n    this.scrollOperation = (direction) => {\n      if (direction === 'ArrowDown' || direction === 'ArrowUp') {\n        this.setState({\n          scrollDirection: direction,\n        });\n      }\n    };\n    this.addSelectedContactIndex = () => {\n      const { length } = this.props.searchContactList;\n      if (this.state.selectedContactIndex >= length - 1) {\n        this.setState({\n          selectedContactIndex: length - 1,\n        });\n      } else {\n        this.setState((preState) => ({\n          selectedContactIndex: preState.selectedContactIndex + 1,\n        }));\n      }\n    };\n    this.reduceSelectedContactIndex = () => {\n      if (this.state.selectedContactIndex > 0) {\n        this.setState((preState) => ({\n          selectedContactIndex: preState.selectedContactIndex - 1,\n        }));\n      } else {\n        this.setState({\n          selectedContactIndex: 0,\n        });\n      }\n    };\n    this.isSplitter = (e) => {\n      if (\n        e.key === ',' ||\n        e.key === ';' ||\n        e.key === 'Enter' ||\n        (e.key === 'Unidentified' && // for Safari (FF cannot rely on keyCode...)\n          (e.keyCode === 186 || // semicolon\n          e.keyCode === 188 || // comma\n            e.keyCode === 13)) // enter\n      ) {\n        return true;\n      }\n      return false;\n    };\n    // using React SyntheticEvent to deal with cross browser issue\n    this.handleHotKey = (e) => {\n      if (this.state.isFocusOnInput && this.state.value.length >= 3) {\n        if (e.key === 'ArrowUp') {\n          this.reduceSelectedContactIndex();\n          this.scrollOperation(e.key);\n        } else if (e.key === 'ArrowDown') {\n          this.addSelectedContactIndex();\n          this.scrollOperation(e.key);\n        }\n      } else {\n        this.setState({\n          selectedContactIndex: 0,\n        });\n      }\n      if (this.isSplitter(e)) {\n        e.preventDefault();\n        if (this.state.value.length === 0) {\n          return;\n        }\n        const relatedContactList =\n          this.state.value.length >= 3 ? this.props.searchContactList : [];\n        const currentSelected =\n          relatedContactList[this.state.selectedContactIndex];\n        if (currentSelected && e.key === 'Enter') {\n          this.props.addToRecipients({\n            name: currentSelected.name,\n            phoneNumber: currentSelected.phoneNumber,\n          });\n        } else {\n          this.props.addToRecipients({\n            name: this.state.value.replace(',', ''),\n            phoneNumber: this.state.value.replace(',', ''),\n          });\n        }\n      }\n    };\n  }\n\n  onInputKeyUp = (e) => {\n    this.props.searchContact(e.currentTarget.value);\n    this.setState({\n      isFocusOnInput: true,\n    });\n  };\n\n  onInputFocus = () => {\n    this.setState({\n      isFocusOnInput: true,\n    });\n  };\n\n  onInputChange = (e) => {\n    const { value } = e.currentTarget;\n    this.setState({ value }, () => {\n      this.props.onChange(value);\n    });\n    if (this.listRef) {\n      this.listRef.scrollTop = 0;\n    }\n  };\n\n  onClean = () => {\n    this.setState({ value: '' });\n    this.props.onClean();\n  };\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.value !== undefined &&\n      nextProps.value !== this.props.value &&\n      nextProps.value !== this.state.value\n    ) {\n      this.setState({ value: nextProps.value }, () => {\n        if (this.inputRef) {\n          focusCampo(this.inputRef);\n        }\n      });\n      this.props.searchContact(nextProps.value);\n    }\n  }\n\n  componentDidMount() {\n    this.props.searchContact(this.props.value);\n    window.addEventListener('click', this.clickHandler);\n    if (this.props.autoFocus) {\n      this._focusTimeout = setTimeout(() => {\n        if (this.inputRef) {\n          this.inputRef.focus();\n        }\n      }, 300);\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.clickHandler);\n  }\n\n  clickHandler = (evt) => {\n    if (this.listRef && this.listRef.contains(evt.target)) return;\n    if (this.inputRef && this.inputRef.contains(evt.target)) {\n      this.setState({\n        isFocusOnInput: true,\n      });\n      return;\n    }\n    this.setState({\n      isFocusOnInput: false,\n    });\n  };\n\n  _addToRecipients = (item) => {\n    this.setState({ value: '', isFocusOnInput: false });\n    this.props.addToRecipients(item);\n  };\n\n  setInputRef = (ref) => {\n    this.inputRef = ref;\n    if (typeof this.props.inputRef === 'function') {\n      this.props.inputRef(ref);\n    }\n  };\n\n  render() {\n    const {\n      className,\n      contactInfoRenderer,\n      contactPhoneRenderer,\n      currentLocale,\n      formatContactPhone,\n      isLastInputFromDialpad,\n      label,\n      multiple,\n      phoneSourceNameRenderer,\n      phoneTypeRenderer,\n      placeholder,\n      recipient,\n      recipients,\n      recipientsClassName,\n      removeFromRecipients,\n      searchContactList,\n      titleEnabled,\n      useRCUI,\n    } = this.props;\n\n    const {\n      value,\n      isFocusOnInput,\n      scrollDirection,\n      selectedContactIndex,\n    } = this.state;\n    // TODO a temporary fix for rendering slower search result.\n    const relatedContactList =\n      value.length >= 3 ? searchContactList.slice(0, 50) : [];\n    const labelEl = (\n      // eslint-disable-next-line jsx-a11y/label-has-associated-control\n      <label className={styles.label}>\n        {label === undefined\n          ? `${i18n.getString('to', currentLocale)}:`\n          : label}\n      </label>\n    );\n    const toNumberInput =\n      !multiple && recipient ? null : (\n        <div className={styles.inputWrapper}>\n          <div\n            className={classnames(\n              styles.inputField,\n              isFocusOnInput ? 'Mui-focused' : null,\n              'MuiInput-underline',\n            )}\n          >\n            <input\n              data-sign=\"recipientsInput\"\n              ref={this.setInputRef}\n              name=\"receiver\"\n              value={value}\n              onChange={this.onInputChange}\n              className={styles.numberInput}\n              maxLength={30}\n              onFocus={this.onInputFocus}\n              onKeyUp={this.onInputKeyUp}\n              placeholder={\n                placeholder === undefined\n                  ? i18n.getString('enterNameOrNumber', currentLocale)\n                  : placeholder\n              }\n              autoComplete=\"off\"\n            />\n          </div>\n          <RemoveButton\n            className={styles.removeButton}\n            onClick={this.onClean}\n            visibility={value.length > 0}\n          />\n        </div>\n      );\n    return (\n      <div\n        className={classnames(\n          styles.container,\n          useRCUI ? styles.rcuiStyle : null,\n          className,\n        )}\n        onKeyDown={this.handleHotKey}\n      >\n        {labelEl}\n        <div\n          className={classnames(\n            useRCUI ? styles.rcuiStyle : null,\n            label === undefined ? styles.rightPanel : '',\n          )}\n        >\n          <SelectedRecipients\n            recipient={recipient}\n            recipients={recipients}\n            multiple={multiple}\n            onRemove={removeFromRecipients}\n            className={recipientsClassName}\n          />\n          {toNumberInput}\n        </div>\n        <ContactDropdownList\n          currentLocale={currentLocale}\n          listRef={(ref) => {\n            this.listRef = ref;\n          }}\n          scrollDirection={scrollDirection}\n          selectedIndex={selectedContactIndex}\n          setSelectedIndex={this.setSelectedIndex}\n          addToRecipients={this._addToRecipients}\n          items={relatedContactList}\n          formatContactPhone={formatContactPhone}\n          visibility={isFocusOnInput && !isLastInputFromDialpad}\n          titleEnabled={titleEnabled}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n          contactInfoRenderer={contactInfoRenderer}\n          contactPhoneRenderer={contactPhoneRenderer}\n        />\n      </div>\n    );\n  }\n}\n\nexport default RecipientsInput;\n"],"file":"RecipientsInput.js"}