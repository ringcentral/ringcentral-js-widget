{"version":3,"sources":["components/CallsPanel/index.js"],"names":["HEADER_HEIGHT","CallsPanel","props","_onResize","_mounted","_calculateContentSize","state","contentHeight","contentWidth","_listWrapper","React","createRef","window","addEventListener","removeEventListener","current","getBoundingClientRect","react","setState","bottom","top","right","left","brand","currentLocale","calls","areaCode","countryCode","onViewContact","onCreateContact","onLogCall","onClickToDial","onClickToSms","isLoggedContact","disableLinks","disableCallButton","disableClickToDial","outboundSmsPermission","internalSmsPermission","dateTimeFormatter","showSpinner","title","active","loggingMap","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","enableContactFallback","autoLog","showContactDisplayPlaceholder","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","useNewList","callsListView","content","styles","root","PureComponent","propTypes","PropTypes","string","isRequired","arrayOf","any","func","bool","object","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport debounce from 'ringcentral-integration/lib/debounce';\nimport { Header } from '../Header';\nimport Panel from '../Panel';\nimport SpinnerOverlay from '../SpinnerOverlay';\nimport CallList from '../CallList';\nimport CallListV2 from '../CallListV2';\n\nimport styles from './styles.scss';\n\nconst HEADER_HEIGHT = 38;\n\nexport default class CallsPanel extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      contentHeight: 0,\n      contentWidth: 0,\n    };\n\n    this._mounted = false;\n    this._listWrapper = React.createRef();\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    this._calculateContentSize();\n    window.addEventListener('resize', this._onResize);\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    window.removeEventListener('resize', this._onResize);\n  }\n\n  _onResize = debounce(() => {\n    if (this._mounted) {\n      this._calculateContentSize();\n    }\n  }, 300);\n\n  _calculateContentSize() {\n    if (\n      this._listWrapper &&\n      this._listWrapper.current &&\n      this._listWrapper.current.getBoundingClientRect\n    ) {\n      const react = this._listWrapper.current.getBoundingClientRect();\n\n      this.setState({\n        contentHeight: react.bottom - react.top - HEADER_HEIGHT,\n        contentWidth: react.right - react.left,\n      });\n\n      return;\n    }\n\n    this.setState({\n      contentHeight: 0,\n      contentWidth: 0,\n    });\n  }\n\n  render() {\n    const {\n      brand,\n      currentLocale,\n      calls,\n      areaCode,\n      countryCode,\n      onViewContact,\n      onCreateContact,\n      onLogCall,\n      onClickToDial,\n      onClickToSms,\n      isLoggedContact,\n      disableLinks,\n      disableCallButton,\n      disableClickToDial,\n      outboundSmsPermission,\n      internalSmsPermission,\n      dateTimeFormatter,\n      showSpinner,\n      title,\n      active,\n      loggingMap,\n      webphoneAnswer,\n      webphoneReject,\n      webphoneHangup,\n      webphoneResume,\n      enableContactFallback,\n      autoLog,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      useNewList,\n    } = this.props;\n\n    const { contentWidth, contentHeight } = this.state;\n\n    const callsListView = useNewList ? (\n      <CallListV2\n        brand={brand}\n        currentLocale={currentLocale}\n        calls={calls}\n        areaCode={areaCode}\n        countryCode={countryCode}\n        onViewContact={onViewContact}\n        onCreateContact={onCreateContact}\n        onLogCall={onLogCall}\n        onClickToDial={onClickToDial}\n        onClickToSms={onClickToSms}\n        isLoggedContact={isLoggedContact}\n        disableLinks={disableLinks}\n        disableCallButton={disableCallButton}\n        disableClickToDial={disableClickToDial}\n        outboundSmsPermission={outboundSmsPermission}\n        internalSmsPermission={internalSmsPermission}\n        dateTimeFormatter={dateTimeFormatter}\n        active={active}\n        loggingMap={loggingMap}\n        webphoneAnswer={webphoneAnswer}\n        webphoneReject={webphoneReject}\n        webphoneHangup={webphoneHangup}\n        webphoneResume={webphoneResume}\n        enableContactFallback={enableContactFallback}\n        autoLog={autoLog}\n        showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n        sourceIcons={sourceIcons}\n        phoneTypeRenderer={phoneTypeRenderer}\n        phoneSourceNameRenderer={phoneSourceNameRenderer}\n        width={contentWidth}\n        height={contentHeight}\n        useNewList={useNewList}\n      />\n    ) : (\n      <CallList\n        brand={brand}\n        currentLocale={currentLocale}\n        calls={calls}\n        areaCode={areaCode}\n        countryCode={countryCode}\n        onViewContact={onViewContact}\n        onCreateContact={onCreateContact}\n        onLogCall={onLogCall}\n        onClickToDial={onClickToDial}\n        onClickToSms={onClickToSms}\n        isLoggedContact={isLoggedContact}\n        disableLinks={disableLinks}\n        disableCallButton={disableCallButton}\n        disableClickToDial={disableClickToDial}\n        outboundSmsPermission={outboundSmsPermission}\n        internalSmsPermission={internalSmsPermission}\n        dateTimeFormatter={dateTimeFormatter}\n        active={active}\n        loggingMap={loggingMap}\n        webphoneAnswer={webphoneAnswer}\n        webphoneReject={webphoneReject}\n        webphoneHangup={webphoneHangup}\n        webphoneResume={webphoneResume}\n        enableContactFallback={enableContactFallback}\n        autoLog={autoLog}\n        showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n        sourceIcons={sourceIcons}\n        phoneTypeRenderer={phoneTypeRenderer}\n        phoneSourceNameRenderer={phoneSourceNameRenderer}\n      />\n    );\n\n    const content = showSpinner ? <SpinnerOverlay /> : callsListView;\n\n    return (\n      <div className={styles.root} ref={this._listWrapper}>\n        <Header>{title}</Header>\n        <Panel className={styles.content}>{content}</Panel>\n      </div>\n    );\n  }\n}\n\nCallsPanel.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  calls: PropTypes.arrayOf(PropTypes.any).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  onLogCall: PropTypes.func,\n  isLoggedContact: PropTypes.func,\n  disableLinks: PropTypes.bool.isRequired,\n  disableCallButton: PropTypes.bool,\n  disableClickToDial: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  showSpinner: PropTypes.bool,\n  title: PropTypes.string,\n  active: PropTypes.bool,\n  loggingMap: PropTypes.object,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  useNewList: PropTypes.bool,\n};\n\nCallsPanel.defaultProps = {\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  onLogCall: undefined,\n  onClickToDial: undefined,\n  onClickToSms: undefined,\n  disableCallButton: false,\n  disableClickToDial: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  showSpinner: false,\n  title: '',\n  active: false,\n  isLoggedContact: undefined,\n  loggingMap: {},\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  enableContactFallback: undefined,\n  autoLog: false,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  useNewList: false,\n};\n"],"file":"index.js"}