{"version":3,"sources":["components/LogBasicInfoV2/LogBasicInfo.js"],"names":["callIconMap","callResults","missed","dynamicsFont","callDirections","inbound","outbound","telephonyStatuses","ringing","callHover","getInfoStatus","status","onHold","callConnected","LogBasicInfo","props","currentLog","call","logName","formatPhone","currentLocale","dataSign","disableLinks","dateTimeFormatter","isWide","className","direction","to","from","startTime","offset","duration","result","telephonyStatus","getDurationElm","durationElement","i18n","getString","number","phoneNumber","extensionNumber","formatNumber","statusI18n","isRinging","infoStatus","styles","root","classic","top","leftSectionInfo","icon","callDisplay","info","follow","time","utcTimestamp","locale","propTypes","PropTypes","string","func","object","bool","isRequired","defaultProps","value","undefined"],"mappings":"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","sourcesContent":["import classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\nimport callResults from 'ringcentral-integration/enums/callResults';\nimport telephonyStatuses from 'ringcentral-integration/enums/telephonyStatus';\nimport { isMissed } from 'ringcentral-integration/lib/callLogHelpers';\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport DurationCounter from '../DurationCounter';\nimport formatDuration from '../../lib/formatDuration';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\nimport { CallIcon } from './CallIcon';\nimport { ShinyBar } from './ShinyBar';\n\nconst callIconMap = {\n  [callResults.missed]: dynamicsFont.missed,\n  [callDirections.inbound]: dynamicsFont.inbound,\n  [callDirections.outbound]: dynamicsFont.outbound,\n  [telephonyStatuses.ringing]: dynamicsFont.callHover,\n};\n\nfunction getInfoStatus(status) {\n  switch (status) {\n    case telephonyStatuses.onHold:\n      return 'onHold';\n    case telephonyStatuses.callConnected:\n    case telephonyStatuses.ringing:\n      return 'active';\n    default:\n      return 'callEnd';\n  }\n}\n\nexport default function LogBasicInfo(props) {\n  const {\n    currentLog: { call, logName },\n    formatPhone,\n    currentLocale,\n    dataSign,\n    disableLinks,\n    dateTimeFormatter,\n    isWide,\n    className,\n  } = props;\n  if (!call) return null;\n  const {\n    direction,\n    to,\n    from,\n    startTime,\n    offset,\n    duration,\n    result,\n    telephonyStatus,\n  } = call;\n\n  function getDurationElm() {\n    let durationElement = null;\n    if (typeof duration === 'undefined') {\n      durationElement = disableLinks ? (\n        i18n.getString('unavailable', currentLocale)\n      ) : (\n        <DurationCounter startTime={startTime} offset={offset} />\n      );\n    } else {\n      durationElement = formatDuration(duration);\n    }\n    return durationElement;\n  }\n\n  const number =\n    direction === callDirections.outbound\n      ? to && (to.phoneNumber || to.extensionNumber)\n      : from && (from.phoneNumber || from.extensionNumber);\n  const formatNumber = formatPhone(number);\n  const missed = isMissed(call);\n\n  const durationElement = getDurationElm();\n  const status = result || telephonyStatus;\n\n  const statusI18n = i18n.getString(status, currentLocale);\n\n  const isRinging = status === telephonyStatuses.ringing;\n\n  const infoStatus = getInfoStatus(status);\n\n  return (\n    <div\n      data-sign=\"logSection\"\n      className={classnames(\n        styles.root,\n        !isWide && styles.classic,\n        styles[infoStatus],\n        className,\n      )}\n    >\n      <ShinyBar\n        className={styles.top}\n        isRinging={isRinging}\n        status={infoStatus}\n      />\n      <div data-sign={dataSign} className={styles.leftSectionInfo}>\n        <CallIcon\n          title={\n            missed\n              ? i18n.getString(callResults.missed, currentLocale)\n              : i18n.getString(direction, currentLocale)\n          }\n          iconClassName={classnames(\n            styles.icon,\n            callIconMap[missed ? callResults.missed : direction],\n          )}\n        />\n        <ul className={styles.callDisplay}>\n          <li className={styles.info}>\n            <p className={styles.logName} title={logName}>\n              {logName}\n            </p>\n            <p className={classnames(styles.follow, styles['text-ellipsis'])}>\n              <span title={formatNumber} data-sign=\"phoneNumber\">\n                {formatNumber}\n              </span>\n              <span data-sign=\"callStatus\" title={statusI18n}>\n                {statusI18n}\n              </span>\n            </p>\n          </li>\n          <li className={styles['flex-fill']} />\n          <li className={classnames(styles.follow, styles.time)}>\n            <p>{durationElement}</p>\n            <p>\n              {dateTimeFormatter({\n                utcTimestamp: startTime,\n                locale: currentLocale,\n              })}\n            </p>\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nLogBasicInfo.propTypes = {\n  currentLocale: PropTypes.string,\n  formatPhone: PropTypes.func,\n  currentLog: PropTypes.object,\n  dataSign: PropTypes.string,\n  disableLinks: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  isWide: PropTypes.bool,\n  className: PropTypes.string,\n};\n\nLogBasicInfo.defaultProps = {\n  formatPhone: (value) => value,\n  currentLog: {},\n  dataSign: undefined,\n  disableLinks: false,\n  isWide: true,\n  currentLocale: 'en',\n  className: null,\n};\n"],"file":"LogBasicInfo.js"}