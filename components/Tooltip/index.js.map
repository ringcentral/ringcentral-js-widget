{"version":3,"sources":["components/Tooltip/index.js"],"names":["POSITION","Enum","TAIL_HEIGHT","Math","sqrt","getDimensions","element","PROPERTIES","position","visibility","nodeType","clonedEl","cloneNode","Object","keys","forEach","key","style","document","body","appendChild","result","width","offsetWidth","height","offsetHeight","removeChild","transitionEnd","el","createElement","transEndEventNames","WebkitTransition","MozTransition","OTransition","transition","name","undefined","getPageOffset","rect","getBoundingClientRect","scollLeft","window","pageXOffset","documentElement","scrollLeft","scrollTop","pageYOffset","top","left","getRelativeOffset","res","tmp","getComputedStyle","offsetTop","offsetLeft","parentElement","TRANSITION_END_EVT_NAME","Tooltip","props","onResize","checkPosition","onTransitionEnd","state","cachedPositioning","dom","React","createRef","open","setInVisible","setState","preState","fixed","triggerElm","RELATIVE","elm","potition","current","demensionOfTrigger","currentDemension","offset","direction","recordPositioning","changeTriggerElmPosition","setVisibility","addEventListener","nextProps","restorePositioning","children","setVisible","beforeOpen","beforeClose","onOpen","onClose","removeEventListener","styles","dropdownContainer","opened","dropdown","tail","Component","propTypes","PropTypes","object","bool","string","func","node","defaultProps","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { isFunction } from 'ringcentral-integration/lib/di/utils/is_type';\nimport Enum from 'ringcentral-integration/lib/Enum';\n\nimport styles from './styles.scss';\n\nconst POSITION = new Enum(['top', 'left']);\n\nconst TAIL_HEIGHT = Math.sqrt(10 ** 2 * 2);\n\nconst getDimensions = (element) => {\n  const PROPERTIES = {\n    position: 'fixed',\n    visibility: 'hidden',\n  };\n\n  if (element.nodeType) {\n    let clonedEl = element.cloneNode(true);\n\n    Object.keys(PROPERTIES).forEach((key) => {\n      clonedEl.style[key] = PROPERTIES[key];\n    });\n\n    document.body.appendChild(clonedEl);\n\n    const result = {\n      width: element.offsetWidth,\n      height: element.offsetHeight,\n    };\n\n    document.body.removeChild(clonedEl);\n    clonedEl = null;\n\n    return result;\n  }\n  return null;\n};\n\nconst transitionEnd = () => {\n  const el = document.createElement('bootstrap');\n\n  const transEndEventNames = {\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'transitionend',\n    OTransition: 'oTransitionEnd otransitionend',\n    transition: 'transitionend',\n  };\n\n  for (const name in transEndEventNames) {\n    if (el.style[name] !== undefined) {\n      return transEndEventNames[name];\n    }\n  }\n  return null;\n};\n\nconst getPageOffset = (el) => {\n  if (!el) {\n    return null;\n  }\n  const rect = el.getBoundingClientRect();\n  const scollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n  return {\n    top: rect.top + scrollTop,\n    left: rect.left + scollLeft,\n  };\n};\n\nconst getRelativeOffset = (el) => {\n  const res = { top: 0, left: 0 };\n  if (!el) {\n    return null;\n  }\n  let tmp = el;\n  while (window.getComputedStyle(tmp).position === 'static') {\n    res.top += el.offsetTop;\n    res.left += el.offsetLeft;\n    tmp = tmp.parentElement;\n  }\n  return res;\n};\n\nconst TRANSITION_END_EVT_NAME = transitionEnd();\n\nclass Tooltip extends Component {\n  constructor(props) {\n    super(props);\n    this.onResize = this::this.checkPosition;\n    this.onTransitionEnd = this::this.onTransitionEnd;\n\n    this.state = {\n      cachedPositioning: null,\n      visibility: null,\n      position: null,\n    };\n\n    this.dom = React.createRef();\n  }\n\n  onTransitionEnd() {\n    return !this.props.open ? this.setInVisible() : null;\n  }\n\n  setVisibility(props = this.props) {\n    this.setState((preState) => ({\n      ...preState,\n      visibility: props.open ? 'initial' : 'hidden',\n    }));\n  }\n\n  setVisible() {\n    this.setState((preState) => ({\n      ...preState,\n      visibility: 'initial',\n    }));\n  }\n\n  setInVisible() {\n    this.setState((preState) => ({\n      ...preState,\n      visibility: 'hidden',\n    }));\n  }\n\n  changeTriggerElmPosition(\n    fixed = this.props.fixed,\n    triggerElm = this.props.triggerElm,\n  ) {\n    const RELATIVE = 'relative';\n    let elm;\n    if (!fixed) {\n      elm = triggerElm;\n    } else {\n      elm = document.body;\n    }\n    if (elm) {\n      elm.style.position = RELATIVE;\n    }\n  }\n\n  recordPositioning(triggerElm = this.props.triggerElm) {\n    if (triggerElm) {\n      const cachedPositioning = this.props.fixed\n        ? {\n            elm: document.body,\n            position: window.getComputedStyle(document.body).position,\n          }\n        : {\n            elm: triggerElm,\n            position: window.getComputedStyle(triggerElm).position,\n          };\n      this.setState({\n        cachedPositioning,\n      });\n    }\n  }\n\n  restorePositioning() {\n    if (this.state.cachedPositioning && this.state.cachedPositioning.elm) {\n      this.state.cachedPositioning.elm.style.potition = this.state.cachedPositioning.position;\n    }\n  }\n\n  checkPosition(props = this.props) {\n    const triggerElm = this.props.triggerElm;\n\n    if (triggerElm) {\n      const {\n        dom: { current },\n      } = this;\n      const demensionOfTrigger = getDimensions(triggerElm);\n      const currentDemension = getDimensions(current);\n\n      let offset;\n\n      if (props.fixed) {\n        offset = getPageOffset(triggerElm);\n      } else {\n        offset = getRelativeOffset(triggerElm);\n      }\n\n      const top =\n        props.direction === POSITION.top\n          ? offset && offset.top - currentDemension.height - TAIL_HEIGHT / 2\n          : offset && offset.top + demensionOfTrigger.height + TAIL_HEIGHT / 2;\n      const left =\n        offset &&\n        offset.left + demensionOfTrigger.width / 2 - currentDemension.width / 2;\n\n      this.setState((preState) => ({\n        ...preState,\n        position: {\n          left,\n          top,\n        },\n      }));\n    }\n  }\n\n  componentDidMount() {\n    this.recordPositioning();\n    this.changeTriggerElmPosition();\n    this.checkPosition();\n    this.setVisibility();\n    window.addEventListener('resize', this.onResize);\n    if (TRANSITION_END_EVT_NAME) {\n      this.dom.current.addEventListener(\n        TRANSITION_END_EVT_NAME,\n        this.onTransitionEnd,\n      );\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.triggerElm !== this.props.triggerElm) {\n      this.restorePositioning();\n      this.recordPositioning(nextProps.triggerElm);\n      this.changeTriggerElmPosition(nextProps.fixed, nextProps.triggerElm);\n    }\n    if (\n      nextProps.children !== this.props.children ||\n      nextProps.fixed !== this.props.fixed\n    ) {\n      this.checkPosition(nextProps);\n    }\n    if (nextProps.open !== this.props.open) {\n      if (nextProps.open) {\n        this.setVisible(nextProps);\n      }\n      if (nextProps.open) {\n        isFunction(this.props.beforeOpen) && this.props.beforeOpen();\n      } else {\n        isFunction(this.props.beforeClose) && this.props.beforeClose();\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.open) {\n      isFunction(this.props.onOpen) && this.props.onOpen();\n    } else {\n      isFunction(this.props.onClose) && this.props.onClose();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n    if (TRANSITION_END_EVT_NAME) {\n      this.dom.current.removeEventListener(\n        TRANSITION_END_EVT_NAME,\n        this.onTransitionEnd,\n      );\n    }\n    this.restorePositioning();\n  }\n\n  render() {\n    const { open, direction, fixed, children } = this.props;\n    return (\n      <div\n        ref={this.dom}\n        className={classnames(\n          styles.dropdownContainer,\n          open ? styles.opened : null,\n          styles[direction],\n        )}\n        style={{\n          visibility: this.state.visibility,\n          position: fixed ? 'fixed' : 'absolute',\n          ...this.state.position,\n        }}\n      >\n        <div className={styles.dropdown}>{children}</div>\n        <div className={styles.tail} />\n      </div>\n    );\n  }\n}\n\nTooltip.propTypes = {\n  triggerElm: PropTypes.object,\n  fixed: PropTypes.bool,\n  direction: PropTypes.string,\n  open: PropTypes.bool,\n  onOpen: PropTypes.func,\n  beforeOpen: PropTypes.func,\n  beforeClose: PropTypes.func,\n  onClose: PropTypes.func,\n  children: PropTypes.node,\n};\n\nTooltip.defaultProps = {\n  triggerElm: null,\n  fixed: false,\n  direction: 'bottom',\n  open: false,\n  children: null,\n  beforeOpen: (i) => i,\n  onOpen: (i) => i,\n  beforeClose: (i) => i,\n  onClose: (i) => i,\n};\n\nexport default Tooltip;\n"],"file":"index.js"}