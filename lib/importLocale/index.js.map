{"version":3,"sources":["lib/importLocale/index.js"],"names":["prompt","inquirer","createPromptModule","writeFiles","localeData","sourceFolder","sourceLocale","folderPath","locale","targetData","files","ast","code","annotations","result","key","value","push","JSON","stringify","join","output","fs","writeFileSync","path","resolve","file","Object","keys","formatReason","reason","fileName","type","chalk","red","mergeTranslationData","translations","interactive","silent","sourceData","relativePath","relative","newData","shouldDelete","data","has","get","source","message","name","console","log","set","Map","filePath","dirname","originalData","translatedData","shouldSkip","content","sourceType","defaultExport","item","program","body","properties","prop","wrapInBracket","entry","extra","raw","rawValue","declaration","importLocale","defaultConfig","localizationFolder","supportedLocales","Error","mergedData"],"mappings":"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","sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport chalk from 'chalk';\nimport { reduce, filter, forEach, find } from 'ramda';\nimport { parse } from '@babel/parser';\nimport generate from '@babel/generator';\nimport formatLocale from '@ringcentral-integration/i18n/lib/formatLocale';\nimport inquirer from 'inquirer';\n\nimport compileLocaleData from '../compileLocaleData';\nimport defaultConfig from '../defaultConfig';\nimport readXlfData from '../readXlfData';\nimport asyncReduce from '../asyncReduce';\nimport asyncForEach from '../asyncForEach';\n\nconst prompt = inquirer.createPromptModule();\n\nfunction writeFiles({ localeData, sourceFolder, sourceLocale }) {\n  forEach((folderPath) => {\n    forEach((locale) => {\n      if (locale !== sourceLocale) {\n        // write file\n        const targetData = localeData[folderPath].files[locale];\n        const { code } = generate(targetData.ast);\n        const annotations = reduce(\n          (result, [key, value]) => {\n            result.push(\n              `// @key: @#@${JSON.stringify(\n                key,\n              )}@#@ @source: @#@${JSON.stringify(value)}@#@`,\n            );\n            return result;\n          },\n          [],\n          targetData.annotations,\n        ).join('\\n');\n        const output = `${code}\\n\\n${annotations}\\n`;\n        fs.writeFileSync(\n          path.resolve(sourceFolder, folderPath, targetData.file),\n          output,\n        );\n      }\n    }, Object.keys(localeData[folderPath].files));\n  }, Object.keys(localeData));\n}\n\nfunction formatReason({ reason, key, fileName, type }) {\n  return `[locale] ${chalk.red(\n    `{${type}}`,\n  )} Key: '${key}', File: '${fileName}', Reason: ${reason}.`;\n}\n\nasync function mergeTranslationData({\n  localeData,\n  translations = {},\n  sourceFolder,\n  sourceLocale,\n  interactive = true,\n  silent = false,\n}) {\n  // clean up original Data\n  await asyncForEach(async (folderPath) => {\n    await asyncForEach(async (locale) => {\n      if (locale !== sourceLocale) {\n        const targetData = localeData[folderPath].files[locale];\n        const sourceData = localeData[folderPath].files[sourceLocale];\n        const relativePath = path.relative(\n          sourceFolder,\n          path.resolve(folderPath, targetData.file),\n        );\n        targetData.data = await asyncReduce(\n          async (newData, [key, value]) => {\n            const type = 'Delete';\n            let shouldDelete = false;\n            let message;\n            if (sourceData.data.has(key)) {\n              if (sourceData.data.get(key).value !== value.source) {\n                message = formatReason({\n                  type,\n                  reason: 'Source value changed',\n                  key,\n                  fileName: relativePath,\n                });\n                if (interactive) {\n                  shouldDelete = (await prompt({\n                    name: 'result',\n                    type: 'confirm',\n                    message,\n                  })).result;\n                } else {\n                  shouldDelete = true;\n                }\n              }\n            } else {\n              message = formatReason({\n                type,\n                reason: 'Source no longer exists',\n                key,\n                fileName: relativePath,\n              });\n              if (interactive) {\n                shouldDelete = (await prompt({\n                  name: 'result',\n                  type: 'confirm',\n                  message,\n                })).result;\n              } else {\n                shouldDelete = true;\n              }\n            }\n            if (shouldDelete) {\n              if (!interactive && !silent) {\n                console.log(message);\n              }\n            } else {\n              newData.set(key, value);\n            }\n\n            return newData;\n          },\n          new Map(),\n          targetData.data,\n        );\n      }\n    }, Object.keys(localeData[folderPath].files));\n  }, Object.keys(localeData));\n\n  // merge in translations\n  await asyncForEach(async (locale) => {\n    await asyncForEach(async (fileName) => {\n      const filePath = path.resolve(sourceFolder, fileName);\n      const folderPath = path.dirname(filePath);\n\n      if (\n        localeData[folderPath] &&\n        localeData[folderPath].files[sourceLocale]\n      ) {\n        const sourceData = localeData[folderPath].files[sourceLocale].data;\n        if (!localeData[folderPath].files[locale]) {\n          localeData[folderPath].files[locale] = {\n            file: `${formatLocale(locale)}.js`,\n          };\n        }\n        if (!localeData[folderPath].files[locale].data) {\n          localeData[folderPath].files[locale].data = new Map();\n        }\n        const originalData = localeData[folderPath].files[locale].data;\n        const translatedData = translations[locale][fileName];\n        await asyncForEach(async (key) => {\n          const type = 'Skip';\n          let shouldSkip = false;\n          let message;\n          if (!sourceData.has(key)) {\n            message = formatReason({\n              type,\n              reason: 'Source no longer exists',\n              key,\n              fileName,\n            });\n            if (interactive) {\n              shouldSkip = (await prompt({\n                name: 'result',\n                type: 'confirm',\n                message,\n              })).result;\n            } else {\n              shouldSkip = true;\n            }\n          } else if (sourceData.get(key).value !== translatedData[key].source) {\n            message = formatReason({\n              type,\n              reason: 'Source value changed',\n              key,\n              fileName,\n            });\n            if (interactive) {\n              shouldSkip = (await prompt({\n                name: 'result',\n                type: 'confirm',\n                message,\n              })).result;\n            } else {\n              shouldSkip = true;\n            }\n          }\n\n          if (shouldSkip) {\n            if (!interactive && !silent) {\n              console.log(message);\n            }\n          } else {\n            originalData.set(key, {\n              ...translatedData[key],\n              key,\n            });\n          }\n        }, Object.keys(translatedData));\n      }\n    }, Object.keys(translations[locale]));\n  }, Object.keys(translations));\n\n  // Update ast and generate code\n  forEach((folderPath) => {\n    forEach((locale) => {\n      if (locale !== sourceLocale) {\n        const targetData = localeData[folderPath].files[locale];\n        const sourceData = localeData[folderPath].files[sourceLocale];\n        targetData.ast = parse(sourceData.content, { sourceType: 'module' });\n        targetData.annotations = new Map();\n\n        const defaultExport = find(\n          (item) => item.type === 'ExportDefaultDeclaration',\n          targetData.ast.program.body,\n        );\n        const properties = filter((prop) => {\n          const wrapInBracket =\n            prop.key.type === 'MemberExpression' ||\n            prop.key.type === 'TemplateLiteral';\n          const key = wrapInBracket\n            ? `[${generate(prop.key).code}]`\n            : generate(prop.key).code;\n          const entry = targetData.data.get(key);\n          if (entry && entry.value) {\n            prop.value = {\n              type: 'StringLiteral',\n              value: entry.value,\n              extra: {\n                // generate desired raw to by pass babel jsesc use\n                raw: JSON.stringify(entry.value),\n                rawValue: entry.value,\n              },\n            };\n            targetData.annotations.set(key, sourceData.data.get(key).value);\n            return true;\n          }\n          return false;\n        }, defaultExport.declaration.properties);\n        defaultExport.declaration.properties = properties;\n      }\n    }, Object.keys(localeData[folderPath].files));\n  }, Object.keys(localeData));\n  return localeData;\n}\n\nexport default async function importLocale({\n  sourceFolder = defaultConfig.sourceFolder,\n  localizationFolder = defaultConfig.localizationFolder,\n  sourceLocale = defaultConfig.sourceLocale,\n  supportedLocales,\n  interactive = defaultConfig.interactive,\n  silent = defaultConfig.silent,\n} = {}) {\n  if (!supportedLocales) {\n    throw new Error('options.supportedLocales is missing');\n  }\n  const localeData = compileLocaleData({\n    sourceFolder,\n    sourceLocale,\n    supportedLocales,\n  });\n  const translations = readXlfData({\n    localizationFolder,\n    supportedLocales,\n  });\n  const mergedData = await mergeTranslationData({\n    localeData,\n    translations,\n    sourceFolder,\n    sourceLocale,\n    interactive,\n    silent,\n  });\n  writeFiles({\n    localeData: mergedData,\n    sourceFolder,\n    sourceLocale,\n  });\n}\n"],"file":"index.js"}