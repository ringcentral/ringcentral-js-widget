{"version":3,"sources":["lib/proxy/handleProxyAction.ts"],"names":["dropStates","action","_state","params","_inversePatches","actionRest","_usm","usmAction","pushStates","target","store","getState","_patches"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;AAMO,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,MAAD,EAAiB;AACzC;AADyC,MAEjCC,MAFiC,GAEkBD,MAFlB,CAEjCC,MAFiC;AAAA,MAEzBC,MAFyB,GAEkBF,MAFlB,CAEzBE,MAFyB;AAAA,MAEjBC,eAFiB,GAEkBH,MAFlB,CAEjBG,eAFiB;AAAA,MAEGC,UAFH,4BAEkBJ,MAFlB;;AAGzC,MAAIA,MAAM,CAACK,IAAP,KAAgBC,eAApB,EAA+B;AAC7B;AACA,WAAOF,UAAP;AACD;;AACD,SAAOJ,MAAP;AACD,CARM;;;;AAUA,IAAMO,UAAU,GAAG,SAAbA,UAAa,CAACC,MAAD,EAAqBR,MAArB,EAAqC;AAC7D,MAAIA,MAAM,CAACK,IAAP,KAAgBC,eAApB,EAA+B;AAC7B;AACA,QAAML,MAAM,GAAG,wBAAaO,MAAM,CAACC,KAAP,CAAaC,QAAb,EAAb,EAAsCV,MAAM,CAACW,QAA7C,CAAf;;AACA,2CACKX,MADL;AAEEC,MAAAA,MAAM,EAANA;AAFF;AAID;;AACD,SAAOD,MAAP;AACD,CAVM","sourcesContent":["import {\n  applyPatches,\n  RcModuleV2,\n  usmAction,\n} from '@ringcentral-integration/core';\n\nexport const dropStates = (action: any) => {\n  // In `_state`/`params`/`_inversePatches`, there may be a large amount of data that needs to be serialized from server to client.\n  const { _state, params, _inversePatches, ...actionRest } = action;\n  if (action._usm === usmAction) {\n    // drop states for reduction of serialized data\n    return actionRest;\n  }\n  return action;\n};\n\nexport const pushStates = (target: RcModuleV2, action: any) => {\n  if (action._usm === usmAction) {\n    // restore changes states for reduction of serialized data from `patches`\n    const _state = applyPatches(target.store.getState(), action._patches);\n    return {\n      ...action,\n      _state,\n    };\n  }\n  return action;\n};\n"],"file":"handleProxyAction.js"}