{"version":3,"sources":["lib/proxy/proxify.ts"],"names":["proxify","prototype","property","descriptor","configurable","enumerable","value","proxyFn","args","_transport","call","functionPath","modulePath","request","payload","type","_proxyActionTypes","execute"],"mappings":";;;;;;;;;AAAe,SAASA,OAAT,CACbC,SADa,EAEbC,QAFa,EAGbC,UAHa,EAIb;AAAA,MACQC,YADR,GAC4CD,UAD5C,CACQC,YADR;AAAA,MACsBC,UADtB,GAC4CF,UAD5C,CACsBE,UADtB;AAAA,MACkCC,KADlC,GAC4CH,UAD5C,CACkCG,KADlC;;AAGA,WAASC,OAAT,GAQE;AAAA,sCADGC,IACH;AADGA,MAAAA,IACH;AAAA;;AACA,QAAI,CAAC,KAAKC,UAAV,EAAsB;AACpB,aAAOH,KAAK,CAACI,IAAN,OAAAJ,KAAK,GAAM,IAAN,SAAeE,IAAf,EAAZ;AACD;;AACD,QAAMG,YAAY,aAAM,KAAKC,UAAX,cAAyBV,QAAzB,CAAlB;AACA,WAAO,KAAKO,UAAL,CAAgBI,OAAhB,CAAwB;AAC7BC,MAAAA,OAAO,EAAE;AACPC,QAAAA,IAAI,EAAE,KAAKC,iBAAL,CAAuBC,OADtB;AAEPN,QAAAA,YAAY,EAAZA,YAFO;AAGPH,QAAAA,IAAI,EAAJA;AAHO;AADoB,KAAxB,CAAP;AAOD;;AACD,SAAO;AACLJ,IAAAA,YAAY,EAAZA,YADK;AAELC,IAAAA,UAAU,EAAVA,UAFK;AAGLC,IAAAA,KAAK,EAAEC;AAHF,GAAP;AAKD","sourcesContent":["export default function proxify(\n  prototype: object,\n  property: string,\n  descriptor: TypedPropertyDescriptor<(...args: any) => Promise<any>>,\n) {\n  const { configurable, enumerable, value } = descriptor;\n\n  function proxyFn(\n    // TODO: fix type\n    this: {\n      _transport: any;\n      modulePath: string;\n      _proxyActionTypes: Record<string, string>;\n    },\n    ...args: any\n  ) {\n    if (!this._transport) {\n      return value.call(this, ...args);\n    }\n    const functionPath = `${this.modulePath}.${property}`;\n    return this._transport.request({\n      payload: {\n        type: this._proxyActionTypes.execute,\n        functionPath,\n        args,\n      },\n    });\n  }\n  return {\n    configurable,\n    enumerable,\n    value: proxyFn,\n  };\n}\n"],"file":"proxify.js"}