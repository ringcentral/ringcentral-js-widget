{"version":3,"sources":["lib/transformLoader/index.js"],"names":["transformLoader","noChunk","through","obj","file","enc","done","content","contents","toString","folderPath","path","dirname","fs","readdir","files","filter","isLocaleFile","loader","Buffer","from","push","transform"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEe,SAASA,eAAT,GAAmD;AAAA,iFAAJ,EAAI;AAAA,0BAAxBC,OAAwB;AAAA,MAAxBA,OAAwB,6BAAd,KAAc;;AAChE,SAAOC,oBAAQC,GAAR;AAAA,6EAAY,iBAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,cAAAA,OADW,GACDH,IAAI,CAACI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;AAAA,mBAEb,8BAAaE,OAAb,CAFa;AAAA;AAAA;AAAA;;AAGTG,cAAAA,UAHS,GAGIC,iBAAKC,OAAL,CAAaR,IAAI,CAACO,IAAlB,CAHJ;AAAA;AAAA,qBAIME,oBAAGC,OAAH,CAAWJ,UAAX,CAJN;;AAAA;AAITK,cAAAA,KAJS,iBAI8BC,MAJ9B,CAIqCC,wBAJrC;AAKTC,cAAAA,MALS,GAKA,uCAAsB;AACnCH,gBAAAA,KAAK,EAALA,KADmC;AAEnCd,gBAAAA,OAAO,EAAEA,OAAO,IAAI,4BAASM,OAAT;AAFe,eAAtB,CALA;AASfH,cAAAA,IAAI,CAACI,QAAL,GAAgBW,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoB,MAApB,CAAhB;;AATe;AAWjB,mBAAKG,IAAL,CAAUjB,IAAV;AACAE,cAAAA,IAAI;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA,aAA2BgB,SAA3B;AAAA;AAAA;;AAAA,WAA2BA,SAA3B;AAAA,MAAP;AAcD","sourcesContent":["import through from 'through2';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\nexport default function transformLoader({ noChunk = false } = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (isLoaderFile(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoaderContent({\n        files,\n        noChunk: noChunk || noChunks(content),\n      });\n      file.contents = Buffer.from(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"],"file":"index.js"}