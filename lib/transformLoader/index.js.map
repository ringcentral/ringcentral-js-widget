{"version":3,"sources":["lib/transformLoader/index.js"],"names":["transformLoader","noChunk","through","obj","transform","file","enc","done","content","contents","toString","folderPath","path","dirname","fs","readdir","isLocaleFile","files","filter","loader","Buffer","from","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEe,SAASA,eAAT,GAAmD;AAAA,iFAAJ,EAAI;AAAA,0BAAxBC,OAAwB;AAAA,MAAxBA,OAAwB,6BAAd,KAAc;;AAChE,SAAOC,oBAAQC,GAAR,CAAY,SAAeC,SAAf,CAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,YAAAA,OADW,GACDH,IAAI,CAACI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;AAAA,iBAEb,8BAAaE,OAAb,CAFa;AAAA;AAAA;AAAA;;AAGTG,YAAAA,UAHS,GAGIC,iBAAKC,OAAL,CAAaR,IAAI,CAACO,IAAlB,CAHJ;AAAA;AAAA,4CAIME,oBAAGC,OAAH,CAAWJ,UAAX,CAJN;;AAAA;AAAA,0BAIqCK,wBAJrC;AAITC,YAAAA,KAJS,iBAI8BC,MAJ9B;AAKTC,YAAAA,MALS,GAKA,uCAAsB;AACnCF,cAAAA,KAAK,EAALA,KADmC;AAEnChB,cAAAA,OAAO,EAAEA,OAAO,IAAI,4BAASO,OAAT;AAFe,aAAtB,CALA;AASfH,YAAAA,IAAI,CAACI,QAAL,GAAgBW,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoB,MAApB,CAAhB;;AATe;AAWjB,iBAAKG,IAAL,CAAUjB,IAAV;AACAE,YAAAA,IAAI;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAZ,CAAP;AAcD","sourcesContent":["import through from 'through2';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\nexport default function transformLoader({ noChunk = false } = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (isLoaderFile(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoaderContent({\n        files,\n        noChunk: noChunk || noChunks(content),\n      });\n      file.contents = Buffer.from(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"],"file":"index.js"}