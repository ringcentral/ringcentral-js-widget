{"version":3,"sources":["lib/localeLoader/index.js"],"names":["module","exports","localeLoader","content","callback","async","querys","loaderUtils","getOptions","supportedLocales","fs","readdir","context","f","files","filter","chunk"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAAA;;AAC9C,MAAMC,QAAQ,GAAG,KAAKC,KAAL,EAAjB;AACA,MAAMC,MAAM,GAAGC,wBAAYC,UAAZ,CAAuB,IAAvB,KAAgC,EAA/C;AACA,MAAMC,gBAAgB,GAAGH,MAAM,CAACG,gBAAP,IAA2B,EAApD;;AACA,MAAI,8BAAaN,OAAb,CAAJ,EAA2B;AACzB,KAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CACsBO,oBAAGC,OAAH,CAAW,KAAI,CAACC,OAAhB,CADtB;;AAAA;AAAA,4BAEW,UAACC,CAAD;AAAA,uBAAO,8BAAaA,CAAb,CAAP;AAAA,eAFX;;AAAA,4BAGW,gCAAaJ,gBAAb,CAHX;AACOK,cAAAA,KADP,iBAEIC,MAFJ,cAGIA,MAHJ;AAICX,cAAAA,QAAQ,CACN,IADM,EAEN,uCAAsB;AACpBU,gBAAAA,KAAK,EAALA,KADoB;AAEpBE,gBAAAA,KAAK,EAAE,CAAC,4BAASb,OAAT;AAFY,eAAtB,CAFM,CAAR;;AAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAYD,GAbD,MAaO;AACLC,IAAAA,QAAQ,CAAC,IAAD,EAAOD,OAAP,CAAR;AACD;AACF,CApBD","sourcesContent":["import fs from 'fs-extra';\nimport loaderUtils from 'loader-utils';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile, { localeFilter } from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\nmodule.exports = function localeLoader(content) {\n  const callback = this.async();\n  const querys = loaderUtils.getOptions(this) || {};\n  const supportedLocales = querys.supportedLocales || [];\n  if (isLoaderFile(content)) {\n    (async () => {\n      const files = (await fs.readdir(this.context))\n        .filter((f) => isLocaleFile(f))\n        .filter(localeFilter(supportedLocales));\n      callback(\n        null,\n        generateLoaderContent({\n          files,\n          chunk: !noChunks(content),\n        }),\n      );\n    })();\n  } else {\n    callback(null, content);\n  }\n};\n"],"file":"index.js"}