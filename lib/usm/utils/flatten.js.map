{"version":3,"sources":["lib/usm/utils/flatten.ts"],"names":["flatten","modulesTree","flattenModules","Object","entries","_modules","forEach","key","module","__name__","__key__","length"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,SAASA,OAAT,CACEC,WADF,EAGiB;AAAA,MADfC,cACe,uEADiB,EACjB;AACfC,EAAAA,MAAM,CAACC,OAAP,CAAeH,WAAW,CAACI,QAA3B,EAAqCC,OAArC,CACE,gBAAoC;AAAA;AAAA,QAAlCC,GAAkC;AAAA,QAA7BC,MAA6B;;AAClC,QACE,QAAOA,MAAP,MAAkB,QAAlB,KACCA,MAAM,CAACC,QAAP,KAAoB,IAApB,IAA4B,OAAOD,MAAM,CAACC,QAAd,KAA2B,WADxD,CADF,EAGE;AACAD,MAAAA,MAAM,CAACE,OAAP,GAAiBH,GAAjB;AACD;;AACDL,IAAAA,cAAc,CAACK,GAAD,CAAd,GAAsBC,MAAtB;;AACA,QACE,QAAOA,MAAM,CAACH,QAAd,MAA2B,QAA3B,IACAF,MAAM,CAACC,OAAP,CAAeI,MAAM,CAACH,QAAtB,EAAgCM,MAAhC,GAAyC,CAF3C,EAGE;AACAX,MAAAA,OAAO,CAACQ,MAAD,EAASN,cAAT,CAAP;AACD;AACF,GAfH;AAiBA,2BACKA,cADL;AAGD","sourcesContent":["type SubModule<T> = T | any;\ntype ModulesTuple<T> = [string, SubModule<T>];\ntype ModulesTree<T> = {\n  [P in string]?: SubModule<T>;\n};\n\nexport type Properties<T = any> = {\n  [P in string]?: T;\n};\n\nfunction flatten<T>(\n  modulesTree: ModulesTree<T>,\n  flattenModules: Properties<T> = {},\n): Properties<T> {\n  Object.entries(modulesTree._modules).forEach(\n    ([key, module]: ModulesTuple<T>) => {\n      if (\n        typeof module === 'object' &&\n        (module.__name__ === null || typeof module.__name__ === 'undefined')\n      ) {\n        module.__key__ = key;\n      }\n      flattenModules[key] = module;\n      if (\n        typeof module._modules === 'object' &&\n        Object.entries(module._modules).length > 0\n      ) {\n        flatten(module, flattenModules);\n      }\n    },\n  );\n  return {\n    ...flattenModules,\n  };\n}\n\nexport { flatten };\n"],"file":"flatten.js"}