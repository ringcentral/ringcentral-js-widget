{"version":3,"sources":["lib/time.ts"],"names":["polling","fn","interval","waitWithCheck","timeout","Promise","race","_","reject","setTimeout","waitForSubscribe"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAAOC,EAAP,EAAWC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA,gBACjB,OAAOD,EAAP,KAAc,UADG;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,0CAEXA,EAAE,EAFS;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,0CAGf,uBAAMC,QAAN,CAHe;;AAAA;AAAA;AAAA,0CAIfF,OAAO,CAACC,EAAD,EAAKC,QAAL,CAJQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;;;;AAOA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAC3BF,EAD2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4EAEc,EAFd,uBAEzBC,QAFyB,EAEzBA,QAFyB,8BAEd,GAFc,sCAETE,OAFS,EAETA,OAFS,6BAEC,OAAO,CAFR;;AAAA,gBAIvB,OAAOH,EAAP,KAAc,UAJS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,0CAKrBI,OAAO,CAACC,IAAR,CAAmB,CACvBN,OAAO,CAACC,EAAD,EAAKC,QAAL,CADgB,EAEvB,IAAIG,OAAJ,CAAkB,UAACE,CAAD,EAAIC,MAAJ;AAAA,mBAAeC,UAAU,CAACD,MAAD,EAASJ,OAAT,CAAzB;AAAA,WAAlB,CAFuB,CAAnB,CALqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB;;;;AAWA,IAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CACxB,uBAAM,MAAM,IAAZ,CADwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAzB","sourcesContent":["import sleep from './sleep';\n\nexport const polling = async (fn, interval) => {\n  if (typeof fn !== 'function') return;\n  if (await fn()) return;\n  await sleep(interval);\n  await polling(fn, interval);\n};\n\nexport const waitWithCheck = async (\n  fn,\n  { interval = 100, timeout = 1000 * 5 } = {},\n) => {\n  if (typeof fn !== 'function') return;\n  await Promise.race<void>([\n    polling(fn, interval),\n    new Promise<void>((_, reject) => setTimeout(reject, timeout)),\n  ]);\n};\n\nexport const waitForSubscribe = async () => {\n  await sleep(2.5 * 1000);\n};\n"],"file":"time.js"}